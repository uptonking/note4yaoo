---
title: job-com-modao
tags: [company, job, 墨刀]
created: '2021-10-15T13:09:21.662Z'
modified: '2021-10-15T13:10:19.995Z'
---

# job-com-modao

# guide

# [lod, mipmap, 影像金字塔](https://wenku.baidu.com/view/39af72360b4c2e3f572763b4.html)
- 在目前的各种图形绘制加速方法中，主要有下面三种方法来实现图形的实时高速绘制。
- 一是可见性判断，
  - 可见性判断分为外部判断和内部判断，外部判断是通过裁减技术（如，视棱椎技术）来剔除掉视点之外的多边形，从而减少不必要的绘制；
  - 内部判断是判断视点内的遮掩情况，如果已绘制的近处对象挡住了未绘制的远处对象，则省去不绘。
- 二是纹理映射mipmap，
  - 通过位图（影像）等来表达表面细节，省去几何建模的过程，大大减少建模、绘制的数据量，就比如现在发展的基于图像的绘制技术(Image-based Rendering)就是从纹理映射技术发展而来的。
- 三是多边形简化LOD，
  - 多边形简化是通过多层次细节(LevelsOfDetail，缩写为LOD)算法来减少多边形的数目通常的做法是把一些不重要的固元(顶点、边和三角形)从多边形网格中移去。

- LOD模型就是在同一场景中依据视觉观察的特性，远离视点的物体用较组细节表示而离视点近的物体用详细的细节，这样便可以通过具有不同细节描述得到一组模型，供绘制渲染时调用。

- mipmap就是针对包含了主要的纹理信息的位图、影像预先计算，生成具有不同纹理细节层次的位图集合，来提高渲染速度、减少走样，这项技术就是mipmap
- 影像金字塔，水平尺度上分块管理，垂直尺度上分层管理

- LOD和mipmap是同一种思想。
  - 它们**都是通过预先生成不同level的地形或纹理层次，或连续或是离散的，以供调用**。
  - 对于离散的LOD，可以通过线性过滤来生成位于不同尺度间的尺度；
  - 对于高于最高尺度的尺度的请求，可以用其他方法来实现，如Catmull的递归细分方法。
  - 这种给出不同细节应用我们还会想到影像金字塔，是的，它们应该是同一种思想，不同应用给了它们不同的名词。

- 那么这样想来，用于生成金字塔、Lod、mip-map的算法，它们的存储，索引等方法是否可以互相借鉴？
- 在计算机图形学中，纹理映射(texture mapping)把存储在内存里的位图包裹到3D渲染物体的表面。
  - 纹理给物体提供了丰富的细节，用简单的方式模拟出了复杂的外观。
  - 一个图像（纹理）被贴(映射)到场景中的一个简单形体上，就像印花贴到一个平面上一样。这大大减少了在场景中制作形体和纹理的计算量。
- 优点有二，
  - 一是用位图代替一大堆三角形和四边形，真实好看；
  - 二是使程序运行会更快。
- 位图可能只是一个四边形图片，而一个由多边形构建而来的物体表面却很可能包括成百上千的多边形，很显然，位图极大的节省了CPU时间。
- **最后显示在屏幕上的pixel是从纹理的texel中计算的**，这由纹理过滤决定。
  - 纹理过滤方法有三种：双线性过滤、三线性过滤和各向异性过滤。
  - 另外，纹理也可用来决定模型表面的颜色，甚至双向反射分布函数(BRDF)，从而和光照模型等方法结合起来。
  - 这个从texel到pixel的过程中，尽可能地减少走样问题，是映射的主要工作

- 一个mipmap就是一系列的纹理，每一幅纹理都与前一幅是相同的图样，但是分辨率都要比前一幅有所降低。
  - mipmap中的每一幅或者每一级图象的高和宽都比前一级小二分之一。Mipmap并不一定必须是正方形。
- 高分辨率的mipmap图象用于接近观察者的物体。当物体逐渐远离观察者时，使用低分辨率的图象。Mipmap可以提高场景渲染的质量，但是它的内存消耗却很大。
- Direct3D将mipmap描绘成一系列相互联系的表面。高分辨率的纹理位于开始处，并与下一级纹理相互联系。以此类推，纹理相互联系，逐渐排列到分辨率最小的一级
# [图像金字塔](https://www.cnblogs.com/WAoyu/p/13189298.html)
- 高斯金字塔
- 一个下采样的序列，例如原始尺寸是512x512，那么一个图像序列，尺寸例如，512，256，128，...，4，2. 
  - 这样一些尺寸的图像序列构成了高斯金字塔。
  - 这样一个序列的存储空间最大为原图像的4/3，因为每个图像是前一个层级的1/4尺寸，那么等比数列求和就好了。
- 高斯金字塔是怎么构建的呢？
  - 首先对原图进行高斯平滑然后下采样，然后再平滑再下采样...，最后构成一个图像序列。
  - 这里有一点，对图像进行平滑，就已经损失了一些信息，所以我们就没必要存储原尺寸了，对其进行下采样然后存储就好了。

- 通过平滑我们损失了一些细节（可能是边缘），所以从高level无法还原出原图像，那我们能做一个无损信息的金字塔吗？可以，拉普拉斯金字塔。

- 拉普拉斯金字塔
- 对于每一层来说，存储图像和其平滑后图像的差值，最高层保留小图，用来恢复图像
- 对于拉普拉斯金字塔的第0层（或者1层，就是最开始的层），用原图减去原图高斯平滑后的图像（此时还没有下采样，尺寸和原图一致）就得到了拉普拉斯金字塔的第0层。
- **在拉普拉斯金字塔的构建过程中，我们也自然的得到了高斯金字塔**(因为要平滑、下采样)
- 那我们如何利用拉普拉斯金字塔来恢复图像呢？
  - 对于最后保留的小图，上采样然后和拉普斯金字塔的差分图像加起来，然后重复这个过程，就逐步恢复了原始图像。
- 拉普拉斯金字塔和高斯金字塔比起来，存储的都是差分图像（除了最后用来恢复图像的小图），
  - 差分图像的特点就是大部分都是相同的数值，因此应该可以很好的对差分图像进行压缩。（本身金字塔没有压缩图像，反而增加了存储空间的消耗，但是差分图像应该比较容易进行压缩，而且效果很好。）
  - 那为什么叫拉普拉斯金字塔呢？因为差分高斯滤波器可以近似为拉普拉斯滤波器。

- 奈奎斯特采样定理解释了采样率和所测信号频率之间的关系。
  - 采样频率要大于两倍的信号频率，也就能通过信号线性插值较好的恢复出原信号。
  - 那么高斯金字塔，通过平滑，相当于去掉了一些高频的信号，相当与降低了fmax的值，所以fS可以不用那么大，也就是可以少采样一些，也没关系，不会出现走样混叠的情况。所以平滑后下采样可以解决走样混叠的问题。

- 图像金字塔的应用
  - 图像压缩
  - 多尺度纹理映射（图形学中的mipmap）
  - 图像混合
  - 图像去噪
  - 多尺度图像配准
# [富文本编辑器的实现思路有吗](http://www.mianshigee.com/question/29642qbr/)
- 原生 `<textarea>` 没法显示带格式的文本
- 可以
  - 堆 `<div>` ；
  - 在点击输入框时，通过 `HTMLElement.focus()` 聚焦到到一个隐藏的 `<input>` 上，通过监听 `oninput` 来获得用户输入。
- 存储格式，可以使用 json；
- 用户点击输入框的不同位置时通过 e.offsetX 与 e.offsetY 来实现定位光标。

- contenteditable(HTML)属性：一个全局枚举属性，用于表示元素是否可编辑；该属性可被继承。
- caret-color(CSS)属性：可设置编辑区域内的可插入光标的颜色；
- Window.getSelection()方法：返回一个Selection对象，表示用户选择的文本范围或光标的当前位置；利用该方法可以对选中的文字进行样式设置，或在光标处插入内容等操作。

- 使用document.getSelection()方法，返回Selection对象

- 方法一：iframe+designMode
- 方法二：contenteditable + document.execCommand()

# 墨刀 公司相关

- 
