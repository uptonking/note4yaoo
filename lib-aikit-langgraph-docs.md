---
title: lib-aikit-langgraph-docs
tags: [docs, langgraph]
created: 2025-08-11T08:47:23.340Z
modified: 2025-08-11T08:47:32.124Z
---

# lib-aikit-langgraph-docs

# guide

# overview

# docs

# blogs

## [LangGraph 的 内存/记忆 机制总结 - 知乎](https://zhuanlan.zhihu.com/p/1915604388443031303)

- 旨在为 AI 代理提供在不同交互中存储、检索和利用信息的能力
- 短期记忆是针对单个对话线程（或会话）的，可以在该线程内的任何时间被回忆。它类似于人类在一次对话中记住的内容。
  - LangGraph 将短期记忆作为代理状态（State）的一部分进行管理。这个状态会通过检查点（Checkpointer）持久化到数据库中，这意味着即使会话中断，也可以随时恢复。
  - 更新机制： 短期记忆在图被调用或某个步骤完成时更新，并在每个步骤开始时读取。
  - 典型应用： 最常见的短期记忆形式是对话历史（conversation history）。
  - 针对长对话可能导致的上下文窗口限制和性能下降问题，LangGraph 提供了以下策略：
    - 编辑消息列表（Editing message lists）
    - 总结过去对话（Summarizing past conversations）： 通过调用 LLM 对历史对话进行摘要，并将摘要作为新的上下文传入，以减少消息数量同时保留关键信息
  - LangGraph 将短期记忆作为其核心图状态（Graph State）的一部分进行管理，并通过内置的“reducer”函数实现状态的原子性更新。这种基于图的状态机模式使得管理对话历史和相关上下文（如上传文件、检索文档）变得非常自然和强大。检查点机制保证了会话的可恢复性。

- 长期记忆是跨对话线程共享的，可以在任何时间、任何线程中被回忆。它不像短期记忆那样局限于单个会话。
  - LangGraph 将长期记忆存储为 JSON 文档，并使用存储（Store）（如 `InMemoryStore` 或生产环境中的数据库支持的存储）进行管理。
  - 每个记忆都组织在一个自定义的命名空间（namespace）和一个唯一的键（key）下。命名空间通常包含用户 ID、组织 ID 或其他标签，便于分层组织信息，并支持跨命名空间的搜索（通过内容过滤器）。
  - 长期记忆的类型
    - 语义记忆（Semantic Memory）： 存储事实和概念。
    - 情景记忆（Episodic Memory）： 存储过去的事件或行为经验。常
    - 程序记忆（Procedural Memory）： 存储执行任务的规则或指令。
  - 记忆更新时机：
    - 热路径（Hot Path）： 在代理的应用程序逻辑运行时实时创建记忆。优点是实时更新和透明度，但可能增加复杂性、延迟，并影响记忆的数量和质量。
    - 后台（Background）： 作为单独的异步任务创建记忆。优点是避免主应用延迟、分离逻辑，并允许更聚焦的任务完成

- LangGraph 明确区分了短期记忆（会话级）和长期记忆（跨会话），并进一步将长期记忆细化为语义记忆（事实）、情景记忆（经验）和程序记忆（规则）。这种细粒度的区分和管理方式在主流框架中相对不常见。
- LangGraph 提供了一个明确的 Store 抽象，用于存储和检索长期记忆（JSON 文档）。它支持命名空间和内容过滤/向量相似性搜索，并提供了“profile”和“collection”两种不同的语义记忆管理模式。这种抽象使得长期记忆的集成更为直接。
# more
