---
title: lib-editor-ckeditor5-dev-log
tags: [ckeditor, dev-log]
created: '2021-10-27T03:20:11.947Z'
modified: '2021-10-27T03:20:45.841Z'
---

# lib-editor-ckeditor5-dev-log

# daily

- company-unskilled
  - ç¡®è®¤ä¸‹ä¸€æ­¥å·¥ä½œè®¡åˆ’
  - æ²Ÿé€šä¼‘æ¯

- **markdown-editor for vscode**

- å·¥ä½œå¼€å‘é—®é¢˜
  - åŸå› å®šä½
  - è§£å†³æ–¹æ³•
  - å…¶ä»–æ–¹æ¡ˆ
  - æå‡ºé—®é¢˜ä¹‹åï¼Œæœ‰ä»€ä¹ˆæ›´å¥½çš„æ–¹æ¡ˆã€è¡Œä¸šå†…æ›´ä¸“ä¸šçš„æ–¹æ¡ˆ

- dev-xp
  - ä¸è¦æ‰§ç€äºåœ¨æ—§ç‰ˆä»£ç ä¸­æ‰¾å®ç°å‚è€ƒï¼Œæœ‰æ—¶ä¼šæµªè´¹è¿‡å¤šæ—¶é—´ï¼Œæ–°çš„apiä¹Ÿè®¸è‡ªèº«å°±æä¾›äº†å®ç°

- dev-summary
  - ä½¿ç”¨æœ€å¤šçš„ç»„ä»¶
    - icon
    - button
    - input/TextField
    - list
    - dialog/modal/popover
  - æ—¥å†çƒ­åŠ›å›¾ react-activity-calendar
    - ä¸­æ–‡æœ¬åœ°åŒ–
    - å§‹ç»ˆæ˜¾ç¤º70+Nå¤©
    - to-do
      - tooltipä¼ å…¥ç»„ä»¶
  - æ–‡ä»¶åˆ—è¡¨ react-table
    - æ‚¬æµ®å·¥å…·æ¡
    - to-do
      - sticky header
  - çœ‹æ¿å·¥å…· personal-kanban
    - å‚è€ƒgithubæœ€æ–°çš„çœ‹æ¿è®¾è®¡å’Œå®ç°ï¼Œgithubé¡¹ç›®åœ¨twitterä¸­é¢„è§ˆçš„å¡ç‰‡
  - æ–‡æœ¬ä»¥æ‰“å­—åŠ¨ç”»çš„å½¢å¼åŠ¨æ€å±•ç¤º typed.js
    - ä¹¦å†™åŠ¨ç”»ã€å›é€€åŠ¨ç”»
    - to-do
      - å®ç°å¤šè¡Œæ–‡æœ¬ä¾æ¬¡å±•ç¤º
  - hover-show-otherwise-hidden

- almanacä½“éªŒ-pros
- almanacä½“éªŒ-cons
- almanacä½“éªŒ-feat-ç‰ˆæœ¬æ§åˆ¶
  - äº®ç‚¹ï¼šåˆ›å»ºåˆ†æ”¯ + åˆå¹¶ä¿®æ”¹
  - mergeåˆ†æ”¯æ–‡æ¡£åˆ°ä¸»æ–‡æ¡£æ—¶ï¼Œå¤´éƒ¨å›¾ç‰‡ä¸ä¼šè‡ªåŠ¨è¿ç§»ï¼Œéœ€è¦æ‰‹åŠ¨ä¿®æ”¹
  - åˆ†æ”¯æ–‡æ¡£è¢«åˆå¹¶åˆ°ä¸»æ–‡æ¡£åï¼Œåˆ†æ”¯æ–‡æ¡£çš„çŠ¶æ€ä¼šæ”¹å˜ä¸ºlockedåªè¯»ï¼Œä¸èƒ½å†æ¬¡ç¼–è¾‘
    - å·²è¢«åˆå¹¶è¿‡çš„åˆ†æ”¯æ–‡æ¡£ï¼Œåªæœ‰è¢«å†æ¬¡å¤åˆ¶åˆ›å»ºå‰¯æœ¬ï¼Œæ‰èƒ½ä¿®æ”¹
  - ç‰ˆæœ¬æ§åˆ¶cons
    - æ²¡æœ‰æ˜¾ç¤ºåˆ†æ”¯çš„æ—¶é—´å…ˆåå…³ç³»ï¼Œåªæ˜¾ç¤ºäº†å·²åˆå¹¶æœªåˆå¹¶
      - ç±»ä¼¼github insightsé‡Œé¢ä¸åŒforkçš„é¡ºåº

- dev-xp
  - ä¸€æ®µä»£ç æ’æŸ¥å¾ˆä¹…æ²¡æ‰¾åˆ°åŸå› ï¼Œå¯èƒ½æ˜¯å¤åˆ¶ç²˜è´´ä»£ç æ—¶å¿˜äº†ä¿®æ”¹ç»†èŠ‚ï¼Œå¦‚ç²˜è´´åfalseæœªä¿®æ”¹ä¸ºtrue

- material-uiç¼ºç‚¹
  - æ²¡æœ‰dropdownï¼Œselecté»˜è®¤ä¼šé®æŒ¡è§¦å‘å…ƒç´ 

## not-yet

- to-do
  - workspace æ–‡æ¡£åˆ—è¡¨
    - sticky header
    - åˆ é™¤æ–‡æ¡£åï¼Œåªåœ¨åˆ—è¡¨åˆ é™¤äº†ï¼Œæ–‡æ¡£æ•°æ®åº“ä¸­ä»ç„¶å­˜åœ¨
  - å…¨å±€è·¯ç”±å®ˆå«çš„æ—¶æœºé”™è¯¯
    - **åº”è¯¥åœ¨è·¯ç”±è·³è½¬å‰é‡å®šå‘ï¼Œè€Œä¸æ˜¯åœ¨è·¯ç”±è·³è½¬åå†æ¬¡è·³è½¬**

- ä»»åŠ¡çœ‹æ¿
  - features
    - åˆ‡æ¢ åˆ—è¡¨è§†å›¾ã€çœ‹æ¿è§†å›¾ã€æ—¶é—´çº¿(ç”˜ç‰¹å›¾)è§†å›¾
    - ä»çœ‹æ¿åˆ›å»ºæ–‡æ¡£
    - checkbox
- çœ‹æ¿ to-do
  - [x] è´Ÿè´£äººåˆ—è¡¨ä¸èƒ½å¤šé€‰
  - [ ] æˆªæ­¢æ—¥æœŸä¸èƒ½æ¸…é™¤
  - çœ‹æ¿ã€è¡¨æ ¼çš„æ•°æ®è€ƒè™‘å…¨å±€ï¼Œæš´éœ²å‡ºå»ç»™å…¶ä»–ç»„ä»¶è®¿é—®

- åˆ·æ–°é¡µé¢ï¼Œç™»é™†ä¼šå¤±æ•ˆçš„é—®é¢˜
  - å®ç°é€€å‡ºç™»å½•
  - ç™»å½•æ—¶ï¼Œä¸æ”¯æŒæœªæ³¨å†Œç”¨æˆ·ç›´æ¥é€šè¿‡éªŒè¯ç ç™»å½•

- workspaceå¦‚ä½•è®¾è®¡
  - æœ¬åœ°ä»“åº“ã€äº‘ç«¯ä»“åº“
  - æˆ‘çš„ä»“åº“ã€å…¬å…±ä»“åº“
  - æ˜¯å¦å¯å‚è€ƒgithubä»“åº“ï¼Ÿ

- affineæ–‡æ¡£æ ¸å¿ƒåŠŸèƒ½
  - åŒé“¾å±•ç¤º
  - åˆ†æ”¯æ–‡æ¡£
  - å·¥ä½œç©ºé—´å†…æœç´¢

- affineçš„uxäº¤äº’è®¾è®¡
  - è½åœ°é¡µ/æœªç™»å½•æ—¶çš„å®£ä¼ é¡µ
  - ä¸ªäººä¸»é¡µ/é¦–é¡µ
  - å·¥ä½œç©ºé—´é¡µ
  - å›½å†…ç¯å¢ƒä¸é€‚åˆå¯¹æ¥githubï¼Œå¯è€ƒè™‘ç™¾åº¦ç½‘ç›˜

- affineæ–°é¦–é¡µè®¾è®¡ä¸å·¥ä½œè®¡åˆ’
  - [x] é¦–é¡µä½¿ç”¨~~ç±»ä¼¼workspaceçš„è®¾è®¡~~ï¼Œå¿«æ·èœå•è·³è½¬åˆ°workspace
  - [x] å¸ƒå±€æ”¹ä¸ºå·¦ä¾§è¾¹æ 
  - [x] æ–‡æ¡£åˆ—è¡¨åªæ˜¾ç¤ºåˆ›å»ºçš„æ–‡ä»¶ï¼Œæœ€è¿‘æ“ä½œçš„æ–‡æ¡£è¦è·³è½¬åˆ°å•ç‹¬é¡µé¢
  - [ ] æ–‡æ¡£åˆ—è¡¨ï¼špinç½®é¡¶ä¸€ä¸ªæ—¥æœŸ

- ç¼–è¾‘å™¨å·¥ä½œè®¡åˆ’
  - å·¦ä¾§ç›®å½•æ˜¾ç¤ºå‚è€ƒæ–‡çŒ®é”šç‚¹
  - ç¼–è¾‘å™¨é¦–é¡µé¡¶éƒ¨æ˜¾ç¤ºå›¾ç‰‡

- æŠ˜å åˆ—è¡¨æ—¶ï¼Œå¦‚ä½•æ·»åŠ äº‹ä»¶ç›‘å¬å™¨çš„èƒ½å‡å°‘rerender

- æ—¥æœŸæ—¶é—´çš„å¤„ç†
  - å¯å‚è€ƒæ—¥å†ç»„ä»¶çš„å®ç°æ–¹æ¡ˆ

- æµç¨‹å›¾ç¼©æ”¾é—®é¢˜

- æ£€æŸ¥å›¾ç‰‡çš„æ¥å…¥æ–¹å¼
  - toolbaræ‰“å¼€æ–‡ä»¶é€‰æ‹©å™¨
  - æ‹–æ‹½æœ¬åœ°å›¾ç‰‡åˆ°ç¼–è¾‘å™¨å…‰æ ‡ä½ç½®
  - ctrl+vç²˜è´´å›¾ç‰‡åˆ°ç¼–è¾‘å™¨

- å›¾ç‰‡ä¸Šä¼ çš„é—®é¢˜
  - ~~å°† åŒæ­¥æ‰§è¡Œçš„createObjectURL æ”¹ä¸º å¼‚æ­¥æ‰§è¡Œçš„` FileReader.readAsArrayBuffer` + `new Blob([arrayBuffer], { type: "mime/type" })`~~
  - ä¸Šä¼ å·²ç»ä»¥å‰å·²ç»ä¸Šä¼ è¿‡çš„å›¾ç‰‡æ—¶ï¼Œæ˜¯å¦ä¿å­˜äº†2ä»½æ•°æ®ï¼Œå­˜åœ¨å†—ä½™
  - é¦–æ¬¡æ¸²æŸ“å›¾ç‰‡æ—¶ï¼Œç”±äºblobUrlå¤±æ•ˆäº†ï¼Œæ§åˆ¶å°ä¼šæŠ¥é”™
    - blob:http://127.0.0.1:4001/223c5400-55e2-4ac7-b936-574b47cd0201 net::ERR_FILE_NOT_FOUND
  - è€ƒè™‘ç›´æ¥å°†æ•°æ®åº“ä¸­docIdå­˜å‚¨åˆ°

- å¦‚ä½•åœ¨è‡ªå®šä¹‰æ’ä»¶ä¸­ä½¿ç”¨å®˜æ–¹image-pluginçš„åŠŸèƒ½å’ŒUI
  - ç±»ä¼¼æ’å…¥buttonViewä¸€æ ·æ’å…¥imageView
  - éœ€è¦ç»§æ‰¿å®˜æ–¹pluginæš´éœ²çš„å„ä¸ªclassï¼Œç„¶åæ·»åŠ è‡ªå®šä¹‰é€»è¾‘ï¼Œå†glueä¸€ä¸ªæ–°çš„å…¥å£ç±»

- æ˜¯å¦éœ€è¦æ›´æ–°å›¾ç‰‡æ ‡é¢˜çš„æ˜¾ç¤ºé€»è¾‘
  - è‹¥ä¸å­˜åœ¨ï¼Œåˆ™é»˜è®¤ä¸æ˜¾ç¤ºï¼›é€‰ä¸­å›¾ç‰‡æ—¶ï¼Œå¯è¾“å…¥æ ‡é¢˜
  - è‹¥å­˜åœ¨ï¼Œåˆ™å§‹ç»ˆæ˜¾ç¤ºï¼›é€‰ä¸­å›¾ç‰‡æ—¶ï¼Œå¯è¾“å…¥ä¿®æ”¹æ ‡é¢˜
  - å›¾ç‰‡ä¸‹æ–¹æ ‡é¢˜é»˜è®¤å±…ä¸­å¯¹é½

- è¦ä¸è¦å®ç°è‡ªå®šä¹‰image-plugin
  - åŒå‡»å›¾ç‰‡æ—¶ï¼Œä¼šåœ¨è’™ç‰ˆå±‚ä¸­æ”¾å¤§å›¾ç‰‡ï¼Œå…¨å±æ˜¾ç¤ºå›¾ç‰‡
  - å›¾ç‰‡è£å‰ªå›¾æ ‡
  - ç³»ç»Ÿæ“ä½œèœå•ï¼Œå¦‚æ”¶è—ã€ä¸‹è½½ã€åˆ é™¤å½“å‰å›¾ç‰‡
  - æ›¿æ¢å½“å‰å›¾ç‰‡
  - è‡ªå®šä¹‰å›¾ç‰‡æ ‡é¢˜çš„æ˜¾ç¤ºå’Œæ›´æ–°é€»è¾‘
  - å¦‚ä½•æ’å…¥inlineå›¾ç‰‡ï¼Œæ’å…¥å›¾ç‰‡åï¼Œå…ˆç¼©å°ï¼Œå†æ‹–æ”¾åˆ°ä¸€è¡Œå†…

- boxEditing, boxUI çš„uiéƒ¨åˆ†ä¸ºä»€ä¹ˆæ€»æ˜¯toolbarç•Œé¢ç›¸å…³çš„å†…å®¹
  - æ’å…¥å…ƒç´ çš„ä½ç½®ï¼Œé€šå¸¸æ”¾åœ¨command

- later
  - å°±ç®—postcss-loader/style-loaderç‰ˆæœ¬ä¸å®˜æ–¹æ–‡æ¡£ä¸€è‡´ï¼Œä¹Ÿå¯èƒ½ä¼šå‡ºç°demoæ ·å¼å¼‚å¸¸çš„é—®é¢˜
  - æµ‹è¯•è¿ç»­è°ƒç”¨è‡ªå®šä¹‰hookæ—¶useRefçš„currentçš„å€¼çš„å˜åŒ–
# 2021
- TODO
  - [x] ç‚¹å‡»ä»»åŠ¡å¡ç‰‡æ—¶ï¼Œåº”è¯¥å‡ºç°å¼¹çª—
  - [x] checklist/å­ä»»åŠ¡
  - [x] åˆ›å»ºæ–‡æ¡£
  - [x] æ·»åŠ æ—¥ç¨‹ï¼šå¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´
  - [x] @è´Ÿè´£äººæˆå‘˜æˆ–ç”¨æˆ·
  - [x] çœ‹æ¿å¡ç‰‡å³ä¸Šè§’çš„åˆ é™¤ã€æ›´å¤šå›¾æ ‡åº”è¯¥æ‚¬æµ®æ—¶æ‰å‡ºç°
  - [x] é¼ æ ‡åœ¨å¡ç‰‡ä¸Šæ–¹æ—¶ï¼Œå½¢çŠ¶åº”è¯¥æ˜¯pointerï¼Œè€Œä¸æ˜¯æ‹–æ‹½çš„grab
  - [ ] å¡ç‰‡å¼¹çª—åº”è¯¥è‡ªåŠ¨ä¿å­˜å†…å®¹ï¼Œè€Œä¸æ˜¯æ˜¾ç¤ºä¿å­˜å’Œæ”¾å¼ƒä¿®æ”¹æŒ‰é’®
  - å¡ç‰‡ä¸Šæ–‡æ¡£åˆ—è¡¨å±•å¼€æ—¶ï¼Œåº•éƒ¨å¤´åƒä¼šè¢«å¿«é€ŸæŒ¤åˆ°å¡ç‰‡ä¹‹å¤–ï¼Œç„¶åå¿«é€Ÿè¿˜åŸ
  - å¡ç‰‡ä¸Šéœ€è¦åŠ¨ä½œèœå•åˆ—è¡¨ï¼Œå¯¹è¯æ¡†éœ€è¦å¼¹å‡ºæœç´¢åˆ—è¡¨ã€é€‰æ‹©åˆ—è¡¨ã€æ—¥æœŸé¢æ¿
  - å­ä»»åŠ¡æš‚æ—¶ä¸èƒ½ä¿®æ”¹ï¼Œåªèƒ½å…ˆåˆ é™¤å†æ·»åŠ ï¼Œéœ€è¦ä¸€ä¸ªåˆ—è¡¨
  - å°†å¡ç‰‡æ‹–åŠ¨åˆ°æœ€å³è¾¹`æ·»åŠ åˆ†ç»„`çš„ç©ºåˆ—æ—¶ï¼Œåº”è¯¥æ”¯æŒè‡ªåŠ¨æ–°å»ºå¡ç‰‡
  - æ ‡ç­¾ã€å­ä»»åŠ¡æ·»åŠ æŒ‰é’®å‡ºç°æ—¶ï¼Œæ—è¾¹åº”è¯¥è¿˜æœ‰å–æ¶ˆæŒ‰é’®
  - å¯¹äºçœ‹æ¿ä¸Šçš„æ—¥ç¨‹ï¼Œè¿‘æœŸæ—¥ç¨‹é™¤äº†æ—¥æœŸæ•°å­—å¤–ï¼Œè¿˜å¯ä»¥æ˜¾ç¤ºç±»ä¼¼ä¸‹å‘¨æ—¥è¿™æ ·çš„æ–‡æœ¬
  - çœ‹æ¿ä»»åŠ¡ä¸ç¼–è¾‘å™¨æ‰“é€š
    - å…¨å±€taskæ£€ç´¢å’Œå±•ç¤º
    - æ‰“é€š çœ‹æ¿ä»»åŠ¡ã€æ–‡æ¡£ä¾§è¾¹æ çš„ä»»åŠ¡
    - åœ¨æ–‡æ¡£ä¸­çš„ä¸èƒ½ä¿®æ”¹checkboxï¼Œæ‰“å¼€å¼¹çª—æ‰èƒ½ä¿®æ”¹
    - å­ä»»åŠ¡è½¬æ¢æˆä»»åŠ¡å¡ç‰‡

- å¤šç»´è¡¨æ ¼å®ç°è®¡åˆ’
  - [x] å·¥å…·æ¡ + è¡¨æ ¼
  - [x] åˆ‡æ¢æ™®é€šè¡¨æ ¼è§†å›¾ã€åˆ†ç»„è¡¨æ ¼è§†å›¾
  - [ ] å°†åˆ†ç»„è¡¨æ ¼çš„æµ‹è¯•æ•°æ®è½¬æ¢æˆtrelloæ ¼å¼ï¼Œä¹Ÿä¼šä½œä¸ºçœ‹æ¿æ•°æ®æº
  - åˆ‡æ¢è¡¨æ ¼è§†å›¾ã€çœ‹æ¿è§†å›¾
    - è§†å›¾çš„åˆ‡æ¢é€»è¾‘
    - æ ·å¼è°ƒæ•´
  - ç¼–è¾‘å•å…ƒæ ¼
  - æ ·å¼è°ƒæ•´
    - è¡¨æ ¼æ•´ä½“å·¦è¾¹æ¡†å’Œä¸Šè¾¹æ¡†ç¼ºå¤±
  - å»æ‰ä¾èµ–
  - å¤åˆ¶è¡¨æ ¼è‡ªèº«åˆ°ä¸‹æ–¹çš„åŠ¨ç”»
- å¤šç»´è¡¨æ ¼å®ç°é—®é¢˜
  - è¦ä¸è¦åŒºåˆ†æ™®é€šè¡¨æ ¼å’Œåˆ†ç»„è¡¨æ ¼
    - åˆ†ç»„è¡¨æ ¼ä¸é€‚åˆ åˆå¹¶å•å…ƒæ ¼
- å¤šç»´è¡¨æ ¼å®ç°è¯´æ˜
  - åˆ†ç»„
    - æš‚æ—¶åªæ”¯æŒç¦»æ•£å˜é‡ï¼Œä¸æ”¯æŒè¿ç»­å‹æ•°å€¼
    - ç ´åäº†useExpandAllçš„sticky header
  - ç«å“å‚è€ƒ
    - é£ä¹¦å’Œnotionçš„å¤šä¸ºè¡¨æ ¼éƒ½æ˜¯ç°åœ¨åœ¨ç¼–è¾‘å™¨é¡µé¢ä¸­ï¼Œæœªè€ƒè™‘åˆ†é¡µçš„æƒ…å†µ

## 1215

- react-tableç¤ºä¾‹ä¸­Groupingå’ŒGroupingColumnçš„åŒºåˆ«
  - Groupingçš„æ¯ä¸ªåˆ†ç»„åˆ—éƒ½åœ¨æœ€å·¦è¾¹æ˜¾ç¤ºæˆå•ç‹¬åˆ—ï¼Œå½“æœ‰å¤šä¸ªåˆ†ç»„å­—æ®µæ—¶ä¼šæ˜¾ç¤ºæˆå¤šä¸ªåˆ—
  - GroupingColumnçš„æ‰€æœ‰åˆ†ç»„åˆ—éƒ½åœ¨æœ€å·¦è¾¹æ˜¾ç¤ºåœ¨ä¸€ä¸ªåˆ—ä¹‹ä¸­ï¼Œè¿™ä¸€åˆ—æ˜¯æ ‘å½¢ç»“æ„

## 1214

- react-tableçš„expandingå’ŒsubComponentçš„åŒºåˆ«
  - expandingçš„è¡Œå±•å¼€åï¼ŒtableInstanceçš„rowsæ€»è¡Œæ•°ä¼šå¢åŠ ï¼ŒæŠ˜å årowsæ•°é‡ä¼šå‡å°‘
  - subComponentå±•å¼€åï¼ŒtableInstanceçš„rowsä¸å˜

## 1213

- å¦‚ä½•æ›´æ–°çœ‹æ¿çš„æ•°æ®å’Œui
  - âœ” çœ‹æ¿çš„æ•°æ®æºä½œä¸ºpropsä»å¤–éƒ¨ä¼ å…¥
  - âœ” çœ‹æ¿æ›´æ–°çš„æ–¹æ³•ä¹Ÿä½œä¸ºpropsä¼ å…¥

- ğŸ¤” çœ‹æ¿é€‚ä¸é€‚åˆåšæˆç¦»çº¿å¯ç”¨ã€æœ¬åœ°æ•°æ®åº“çš„å½¢å¼?  ç‹¬ç«‹çœ‹æ¿ã€æ–‡æ¡£ä¸­çš„çœ‹æ¿
  - å¢åŠ äº†çœ‹æ¿ä»»åŠ¡/ç”¨æˆ·å…¨å±€ä»»åŠ¡crudçš„å¤æ‚åº¦ï¼›çœ‹æ¿ä¸€å®šå±äºworkspace
    - æ–‡æ¡£ä¾§è¾¹æ çš„ä»»åŠ¡ä»å“ªé‡Œè¯»å–
    - æ–‡æ¡£ä¾§è¾¹æ æ·»åŠ çš„ä»»åŠ¡æ•°æ®ä¿å­˜åˆ°å“ªé‡Œ
    - å¦‚ä½•ä»å…¶ä»–ç»„ä»¶ æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ å­ä»»åŠ¡
  - åŠ¨æ€çœ‹æ¿å¢åŠ äº†ç¼–è¾‘å™¨æœ¬åœ°å­˜å‚¨çš„å¤æ‚åº¦
    - åœ¨ç¼–è¾‘å™¨ä¸­æ˜¾ç¤ºä»»åŠ¡å¡ç‰‡å¢åŠ äº†æ–‡æ¡£çš„å¤–éƒ¨ä¾èµ–å’Œè¯·æ±‚æ•°æ®é‡ï¼Œå°±ç®—åªå­˜å‚¨ä¸€ä¸ªå¡ç‰‡idï¼Œä¹Ÿä¼šæœ‰å•ä¸ªå¡ç‰‡ç”šè‡³æ•´ä¸ªçœ‹æ¿æ•°æ®çš„è¯·æ±‚
    - åœ¨ç¦»çº¿çŠ¶æ€ä¸‹ï¼Œä»»åŠ¡å¡ç‰‡åœ¨ç¼–è¾‘å™¨ä¸­çš„æ˜¾ç¤ºå½¢å¼å’Œäº¤äº’å½¢å¼
  - åŠ¨æ€çœ‹æ¿æ˜¯åœ¨å¢åŠ äº†åä½œçš„å¤æ‚åº¦ï¼Œåº”è¯¥é¿å…è¿™ç§è®¾è®¡
    - ç¦»çº¿åä½œæ—¶ï¼Œåº”è¯¥å°†æ¶‰åŠåœ¨çº¿èµ„æºå’Œç¬¬3æ–¹èµ„æºçš„blockå…ƒç´ ç¦ç”¨æ‰
    - çœ‹æ¿çš„åä½œï¼Œä¸é€‚åˆç”¨æœ¬åœ°æ•°æ®åº“çš„æ–¹å¼æ¥å®ç°ï¼Œå½“ç„¶ç”¨æœ¬åœ°æ•°æ®åº“æ¥å®ç°æ˜¯å¯è¡Œçš„
  - æˆ‘çš„æƒ³æ³•
    - åŒºåˆ†ç‹¬ç«‹çœ‹æ¿å’Œæ–‡æ¡£ä¸­çš„çœ‹æ¿ï¼Œç‹¬ç«‹çœ‹æ¿ä¸å¯ç¦»çº¿ä½†å¯å…¨å±€ç»Ÿè®¡ï¼Œæ–‡æ¡£ä¸­çš„çœ‹æ¿å¯ç¦»çº¿ä½†ä¸å¯å…¨å±€ç»Ÿè®¡
    - ç¼–è¾‘å™¨å†…åªèƒ½æŸ¥çœ‹å’Œè¯»å–ä»»åŠ¡é¡¹ï¼Œä¸èƒ½ä¿®æ”¹ï¼Œä½†å¯è·³è½¬åˆ°çœ‹æ¿è¿›è¡Œä¿®æ”¹
    - ç¦»çº¿çŠ¶æ€ä¸‹ï¼Œæ–‡æ¡£ä¾§è¾¹æ çš„ä»»åŠ¡åº”è¯¥æç¤ºåªè¯»ä¿¡æ¯ï¼Œä¸èƒ½è®¿é—®å…¨å±€çœ‹æ¿

- å¡ç‰‡çš„å­˜å‚¨ç»“æ„
  - æœ€å¥½æ˜¯æ‰å¹³çš„ç»“æ„ï¼Œæ¯ä¸ªå¡ç‰‡å­˜å‚¨æ‰€å±çš„åˆ†ç»„åˆ—idå’Œçœ‹æ¿id

## 1210

- çœ‹æ¿é¢„å®šä¹‰çš„å­—æ®µåç§°ä¸èƒ½å¤ªéšæ„
  - å¯å‚è€ƒæˆç†Ÿçš„äº§å“ï¼Œå¦‚trelloï¼Œè¿™æ ·å°±ç›´æ¥æ”¯æŒå¯¼å…¥trelloæ•°æ®

## 1209

- âœ” å¾…è®¨è®ºï¼šè¡¨æ ¼çš„å®ç°å½¢å¼
  - å¤šä¸ªè¡¨æ ¼çš„è§†è§‰å½¢å¼é€šè¿‡åˆ†ç»„å®ç°
  - è§†è§‰ä¸Š å•ä¸ªè¡¨æ ¼
    - https://v89sa2wwaq.feishu.cn/base/bascnDfGDUAC9uZmG8WAIm68pDf?table=tblLEEoU9EpeZpaF&view=vewG1l8FO1
    - https://fupi20211128172727640.worktile.com/mission/projects/61a3bc018c35ea4484cf9468
  - è§†è§‰ä¸Š å¤šä¸ªè¡¨æ ¼
    - https://v89sa2wwaq.feishu.cn/base/bascnkYxZcXLhaTfIDpw6MIpvkd?table=tblAmjmotNVInT2p&view=vewxycGIAm
    - https://tower.im/projects/fc0d13409e357c612254c3707d9150e3/list/todos/

## 1207

- å·¥ä½œä»»åŠ¡ç¡®å®š
  - å…ˆåšå…·ä½“åœºæ™¯çš„çœ‹æ¿å’Œè¡¨æ ¼ï¼Œå†é€æ¸è¿ç§»åˆ°é€šç”¨çš„å¤šç»´è¡¨æ ¼

## 1205

- CRUDListçš„è®¾è®¡
  - é’ˆå¯¹è¾ƒçŸ­ã€æ˜“ç¼–è¾‘çš„åˆ—è¡¨
  - å¯crudåˆ—è¡¨é¡¹
- CRUDListçš„ä½¿ç”¨åœºæ™¯
  - å¾…åŠäº‹é¡¹ã€æ¸…å•
  - æ–‡æ¡£åˆ—è¡¨

- SearchListçš„è®¾è®¡
  - é’ˆå¯¹åˆ—è¡¨æ•°æ®çš„æœç´¢
- SearchListçš„ä½¿ç”¨åœºæ™¯
  - é€‰æ‹©ç”¨æˆ·
  - æœç´¢æ ‡ç­¾ã€æ·»åŠ æ ‡ç­¾

## 1203

- @material-ui/pickersæ—¥å†çš„å±€é™
  - å·²åºŸå¼ƒ
  - æ—¥å†æ–‡æœ¬å¿…é¡»å…ˆæ˜¾ç¤ºï¼Œæ—¥å†å¡ç‰‡æ‰èƒ½å¼¹å‡ºåœ¨æ­£ç¡®ä½ç½®ï¼›
  - è‹¥æ—¥å†æ–‡æœ¬æœªæå‰æ¸²æŸ“åˆ°domï¼Œæ–‡æœ¬å’Œå¡ç‰‡åŒæ—¶æ¸²æŸ“å‡ºæ¥æ—¶ï¼Œç”±äºå¡ç‰‡çš„ä½ç½®ä¾èµ–äºæ–‡æœ¬ä½ç½®ï¼Œæ‰€ä»¥ä¼šå‡ºç°åˆ†ç¦»å’Œæ¼‚ç§»
  - ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼šæå‰å°†æ—¥å†æ–‡æœ¬æ¸²æŸ“åˆ°domï¼Œä½†`visibilityï¼šhidden`ï¼Œä¼šå æ®ç©ºé—´ï¼Œä¸è§¦å‘äº‹ä»¶

- onClickäº‹ä»¶è§¦å‘å¤šä¸ªä»»åŠ¡çš„å®ç°æ€è·¯
  - è¦è€ƒè™‘å¦‚ä½•åœ¨å…¶ä»–åœ°æ–¹è§¦å‘ç›¸åŒçš„æ“ä½œï¼Œå°†è®¡ç®—é€»è¾‘æŠ½ç¦»å‡ºå»æ–¹ä¾¿å…¶ä»–åœ°æ–¹å¤ç”¨

- inputè®¾ç½®`border: none; `åï¼Œä»ç„¶æ˜¾ç¤ºè¾¹æ¡†çš„é—®é¢˜
  - æ’æŸ¥å¤±è´¥
  - MuiPickersUtilsProvider   DatePicker
  - . MuiInputBase-input{ border: 0; }
  - https://codesandbox.io/s/material-demo-forked-fg5xk?file=/demo.js

## 1202

- **reactå­ç»„ä»¶è·å–ä¸åˆ°çˆ¶ç»„ä»¶ä¼ é€’çš„propsï¼Œå§‹ç»ˆæ˜¯undefined**
  - åŸå› æ’æŸ¥
    - ä»react devtoolså·¥å…·ä¸­åˆ†æé—®é¢˜ç»„ä»¶æ¥æ”¶çš„propsçš„å…·ä½“å€¼ï¼Œå‘ç°Boardç»„ä»¶çš„ç›´æ¥å­ç»„ä»¶æ˜¯KanbanColumnï¼Œè€Œä¸æ˜¯Column
    - ä»Boardåˆ°Columnï¼Œä¸­é—´è¿˜æœ‰KanbanColumnã€Draggableã€ContextProviderç­‰ç»„ä»¶
    - è¿æºç éƒ½æ²¡æœ‰çœ‹æ¸…æ¥šå°±æƒ³å½“ç„¶æµ‹è¯•äº†ï¼Œæµªè´¹äº†å¾ˆå¤šæ—¶é—´
  - é”™è¯¯æ€è·¯
    - å› ä¸ºå¯¹reactçš„forceUpdateç†è§£ä¸å¤Ÿæ·±å…¥
    - const [ignored, forceUpdate] = useReducer(x => x + 1, 0); 
    - function handleClick() { forceUpdate(); }
    - `<button onClick={forceUpdate}>Force update</button>`

- æ›´æ–°å¯¹è±¡æ•°ç»„ä¸­ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•
  - setState(prevState => ( { data: prevState.data.map(el => (el.id === id ? { ...el, text } : el)) }) )

## 1201

- https://github.com/nishantpainter/personal-kanban
  - wipLimitå¯ä»¥é™åˆ¶ä¸€ä¸ªé¢æ¿å†…çš„ä»»åŠ¡å¡ç‰‡æ•°é‡ï¼Œå½“è¾¾åˆ°æŒ‡å®šæ•°é‡æ—¶ï¼Œä¸èƒ½å†æ·»åŠ æ–°å¡ç‰‡

## 1129

- ä¹‹å‰çš„editoeç»„ä»¶ä¸ºä»€ä¹ˆä¼šæŠ¥é‚£ä¸ªchunké”™è¯¯ï¼Ÿ

- codebase-https://github.com/nishantpainter/personal-kanban
  - Column çœ‹æ¿çš„ä¸€åˆ—ï¼Œæ˜¯ä¸€ä¸ªé¢æ¿ï¼Œä¸Šé¢å¯ä»¥æ”¾ç½®å°å¡ç‰‡

## 1127

- affine
  - /e'fain/
  - adjective mathematics
  - Allowing for or preserving parallel relationships
  - The Notion-like docs solution for enterprises.

- affineé¦–é¡µçš„æ‰“å­—æ•ˆæœ
  - https://www.theorange.digital/
  - "typed.js":"^2.0.12"

## 1126

- æ–‡ç« é¡µ ä¸Šä¸‹ç»“æ„
  - å³ä¾§èµ„æºé¢æ¿å¯åˆ‡æ¢éšè—

## 1125

- åˆ›å»ºworkspaceIdä»¥æ•°å­—å¼€å¤´
  - ä½†rxdbçš„æ•°æ®åº“ä¸èƒ½ä»¥æ•°å­—å¼€å¤´
  - å˜é€šæ–¹æ¡ˆï¼šä¿å­˜å‰ç»Ÿä¸€åŠ å‰ç¼€

## 1124

- affineäº§å“æ“ä½œæµç¨‹
  1. ç”¨æˆ·ç™»å½•  >  landingæœªç™»å½•é¡µã€æ³¨å†Œé¡µã€ç™»å½•é¡µ
     - /usernameId

  2. è¯·æ±‚workspaceåˆ—è¡¨  >  ç”¨æˆ·ä¸ªäººä¸»é¡µ
     - /usernameId 

  3. æ‰“å¼€å•ä¸ªworkspace  >  workspaceé¡µé¢
     - /usernameId/workspaceId 

  4. æ‰“å¼€å•ä¸ªæ–‡æ¡£  >  ç¼–è¾‘å™¨é¡µé¢
     - /usernameId/docId

- nextjs router.push()è¦æ”¾åˆ°useEffectæˆ–onClické‡Œé¢

- æƒé™çŠ¶æ€ç 
  - 401 Unauthorizedï¼ˆæœªç»æˆæƒï¼‰ï¼Œéœ€è¦ç™»é™†
  - 403 Forbiddenï¼ˆè¢«ç¦æ­¢ï¼‰ï¼Œéœ€è¦å¯¹åº”æƒé™
  - 404 Not Foundï¼ˆæ‰¾ä¸åˆ°ï¼‰ï¼Œå¯èƒ½çš„åŸå› æ˜¯æœåŠ¡å™¨ç«¯æ²¡æœ‰è¿™ä¸ªé¡µé¢

- å¤„ç†å¤åˆ¶ç²˜è´´urlçš„æµç¨‹
  - å…ˆè®¿é—®/user/meæ£€æŸ¥ç™»å½•
  - åœ¨è·å–workspaceåˆ—è¡¨ç­‰åŸºæœ¬ä¿¡æ¯
  - ç„¶åæ£€æŸ¥ç›®æ ‡urlæ˜¯å¦ç¬¦åˆæƒé™è¦æ±‚
  - æœ€åæ˜¾ç¤ºç›®æ ‡urlçš„é¡µé¢

- è·¯ç”±æƒé™å’Œhttpå–æ•°æƒé™çš„éªŒè¯è¿”å›å€¼ç»“æ„
  - è·¯ç”±æƒé™è¦æ£€æŸ¥è¿”å›çš„ç”¨æˆ·å¯¹è±¡æ˜¯å¦åŒ…å«`role/canAccess`å±æ€§ï¼Œé€šè¿‡åæ‰è·³è½¬è·¯ç”±ï¼›
    - éœ€è¦æ–°çš„æŸ¥è¯¢æ¥å£ï¼Œæˆ–è€…ç›´æ¥åœ¨å‰ç«¯é…ç½®è§„åˆ™
    - {errorCode: 401, canAccessRes: false}
  - httpè¯·æ±‚æƒé™è¦åœ¨è¯·æ±‚å¤´ä¸­å¸¦ä¸Š authorizationï¼Œæ£€æŸ¥è¿”å›å€¼æ˜¯å¦åŒ…å«æˆåŠŸæ ‡å¿—ï¼Œè¿”å›å€¼åŒ…å«æˆåŠŸæ ‡å¿—æ‰ç›´æ¥ä½¿ç”¨ï¼Œå¦åˆ™é‰´æƒå¤±è´¥
    - {errorCode: 401, canAccessRes: false}

- nextjsç”¨æˆ·ç™»å½•çš„å®ç°
  - rbacè·¯ç”±
  - [Role-Based Routing](https://github.com/vercel/next.js/discussions/23041)
    - æ€è·¯æ˜¯åŸºäº import { useRouter } from "next/router" å®ç°
    - ä¸è¦å°†router.push()å†™åˆ°renderæ–¹æ³•é‡Œé¢ï¼Œè¦å†™åˆ°onClickæ–¹æ³•æˆ–useEffecté‡Œé¢
  - [Role-Based Routing with Next.js](https://spin.atomicobject.com/2019/12/11/role-based-routing-with-next-js/)
    - æ¯æ¬¡è·³è½¬pageæ—¶æ£€æŸ¥ router.pathname.startsWith("/employee") && role !== "employee"
  - [Next.js - Redirect to Login Page if Unauthenticated](https://jasonwatmore.com/post/2021/08/30/next-js-redirect-to-login-page-if-unauthenticated)
  - [[RFC] - Route guards](https://github.com/vercel/next.js/discussions/11822)
  - [Implement Protected Routes in NextJSï¼š verify & no-verify token](https://dev.to/shubhamverma/implement-protected-routes-in-nextjs-37ml)

- è§£å†³ç”¨æˆ·æƒé™çš„2ä¸ªç»´åº¦
  - è·¯ç”±çº§æƒé™æ§åˆ¶ï¼Œå®šä¹‰è·¯ç”±é…ç½®å¯¹è±¡æ—¶ï¼Œå£°æ˜è®¿é—®è¯¥è·¯ç”±éœ€è¦çš„role
  - httpè¯·æ±‚çº§æƒé™æ§åˆ¶ï¼Œè®¿é—®æ•æ„Ÿæ•°æ®æˆ–æ‰§è¡Œæ•æ„Ÿæ“ä½œæ—¶éœ€è¦æ£€æŸ¥role
  - å…¶ä»–å‚è€ƒ
    - åŠ¨æ€æ·»åŠ è·¯ç”±
    - èœå•ä¸è·¯ç”±åˆ†ç¦»ï¼Œèœå•ç”±åç«¯è¿”å›èœå•
    - æˆ–è€… èœå•ä¸è·¯ç”±å®Œå…¨ç”±åç«¯è¿”å›

- useEffectçš„è¿”å›å€¼å‡½æ•°æœªæ‰§è¡Œçš„åŸå› 
  - å¯èƒ½ç»„ä»¶å·²ç»å¸è½½ï¼Œå°±ä¸ä¼šæ‰§è¡Œäº†

## 1123

- material-ui æš‚æ—¶æ²¡æœ‰dropdownç»„ä»¶
  - selectç»„ä»¶æ ·å¼å¤ªç®€é™‹

- nextjsåŠ¨æ€è·¯ç”±
  - å°†åŒ¹é…è·¯ç”±çš„è¿‡ç¨‹åœ¨æ„å»ºæ—¶æˆ–è¯·æ±‚æ—¶è‡ªåŠ¨è®¡ç®—åŒ¹é…
  - ä¸react-routerçš„æ‰‹åŠ¨è®¡ç®—ç±»ä¼¼

- ä¸ç™»å½•çš„æ—¶å€™ï¼Œèƒ½å¤ŸæŸ¥çœ‹å“ªäº›å†…å®¹
  - æœ¬åœ°ç¼“å­˜
  - å…¬å…±æ¨¡ç‰ˆ
  - ç”¨æˆ·åˆ†äº«

- workspaceçš„è·¯ç”±urlè®¾è®¡
  - ç±»ä¼¼githubçš„urlï¼š username/workspace
  - ç”¨æˆ·åå¿…é¡»6ä½åŠä»¥ä¸Šï¼Œå°äº6ä½ç”±ç³»ç»Ÿä¿ç•™ä½¿ç”¨

- nextjsçš„å…¨å±€çŠ¶æ€ç®¡ç†
  - pages/_app.js ä¸­å¯ä»¥å®šä¹‰å…¨å±€ä½¿ç”¨çš„contextï¼Œè¿™æ ·å­ç»„ä»¶å°±èƒ½é€šè¿‡useContextè·å–åˆ°
  - å¯è€ƒè™‘å°†ç»å¸¸å˜åŠ¨çš„stateå€¼æ”¾åœ¨å•ç‹¬çš„contextï¼Œç„¶åå°†ä¸å˜çš„dispatchæ–¹æ³•æ”¾åœ¨å¦ä¸€ä¸ªå•ç‹¬çš„context

## 1122

- åªåœ¨é¼ æ ‡æ‚¬æµ®æ—¶æ‰æ˜¾ç¤ºå…ƒç´ çš„æ–¹æ³•
  - [Using only CSS, show div on hover over another element](https://stackoverflow.com/questions/5210033)

```CSS
.showme {
  display: none;
}

.showhim:hover .showme {
  display: block;
}
```

```html 
<div class="showhim">
  HOVER ME
  <div class="showme">hai</div>
</div>

```

- è¡¨æ ¼çš„æœ€å¤§å®½åº¦æ— æ³•å æ»¡å³è¾¹
  - é—®é¢˜åœ¨äºè¡¨æ ¼æ˜¯inline-blockï¼Œåˆ—å®½é»˜è®¤150ï¼Œæ€»å®½æ˜¯å¤šå°‘å°±æ˜¾ç¤ºå¤šå°‘
  - å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹åˆ—å®½

- è¡¨æ ¼ä¸€åˆ—çš„å®½åº¦æ— æ³•è®¾ç½®
  - è€ƒè™‘ä½¿ç”¨useBlockLayout
  - [Width is not working Material-UI Enhanced Table](https://github.com/tannerlinsley/react-table/discussions/2332)

- workspaceçš„æ–‡æ¡£åˆ—è¡¨åŠŸèƒ½å®ç°é¡ºåº
  - [x] æ›¿æ¢mockæ•°æ®
  - [x] å›¾æ ‡
  - [x] æŠ˜å 
  - [x] æ’åº
  - [ ] å·¥å…·æ¡
  - [ ] sticky header

- react-tableé€‰ç”¨å“ªç§å¸ƒå±€
  - å‚è€ƒç›¸å…³ç¤ºä¾‹å’Œæˆç†Ÿçš„äº§å“ï¼Œå¯é€‰æ‹©tableæˆ–ç»å¯¹å®šä½

## 1119

- material-ui v4 ç»„ä»¶
  - `Modal` component provides a solid foundation for creating dialogs, popovers, lightboxes, or whatever else.
  - `Popper` can be used to display some content on top of another. 
    - It's an alternative to react-popper.
  - `Popover` can be used to display some content on top of another.
    - The component is built on top of the `Modal` component.
    - The scroll and click away are blocked unlike with the `Popper` component.
  - `Dialog` informs users about a task and can contain critical information, require decisions, or involve multiple tasks.

## 1118

- æ—¥å†çƒ­åŠ›å›¾æ ·å¼
  - githubæ–¹å— 10x10
  - giteeæ–¹å— 13x15
  - affineæ–¹å— 14x14
  - æ–¹å—æ ·å¼å‚è€ƒgithub

- ç‚¹å‡»æ·»åŠ æ–‡æ¡£æŒ‰é’®ï¼Œåœ¨æ—¥å†çƒ­åŠ›å›¾ä¸Šä¼šåæ˜ å‡ºæ“ä½œè®°å½•

## 1117

- useStyles()çš„åœ°æ–¹ä¼šè§¦å‘warning
  - Each child in a list should have a unique "key" prop.
  - åŸå› å®šä½ï¼Œè¿”å›react fragmentæ—¶ï¼Œå¦‚æœä½¿ç”¨`<>`åˆ™æ— æ³•æ·»åŠ keyï¼Œå¿…é¡»ä½¿ç”¨å®Œæ•´çš„reactå…ƒç´  `<React. Fragment key='yourKey' >`

- åˆ©ç”¨muiçš„breakpointsï¼Œå®ç°ä¸åŒå®½åº¦æ—¶ï¼ŒåŒä¸€ä½ç½®æ˜¾ç¤ºä¸åŒå…ƒç´ 
  - åªåœ¨å®½å±æ—¶æ˜¾ç¤º
    - hiddenSmDown:{ [theme.breakpoints.down('xs')]: { display: 'none' } }
  - åªåœ¨å°å±æ—¶æ˜¾ç¤º
    - hiddenSmUp:{ [theme.breakpoints.up('sm')]: { display: 'none' } }
  - [Using Breakpoints in MaterialUI](https://dev.to/christensenjoe/using-breakpoints-in-materialui-5gj0)

- csså•ä½
  - `ch` Represents the width, or more precisely the advance measure, of the glyph "0" (zero, the Unicode character U+0030) in the element's font.

## 1116

- æ’æŸ¥æ°´å¹³æ»šåŠ¨æ¡å‡ºç°çš„åŸå› 
  - [Finding/Fixing Unintended Body Overflow](https://css-tricks.com/findingfixing-unintended-body-overflow/)
    - æ‰“å°å‡ºè¿‡å®½å…ƒç´ çš„dom

## 1115

- é¦–æ¬¡æ‰§è¡Œeditor.setDataæ—¶ï¼Œè§£å†³æœ¬åœ°ä¸Šä¼ å›¾ç‰‡blobUrlå¤±æ•ˆçš„é—®é¢˜
  - å€ŸåŠ©æ­£åˆ™è¡¨è¾¾å¼
  - URL.createObjectURLè¿”å›çš„urlä¸€ç›´æ˜¯63ä½

- å›¾ç‰‡æœ¬åœ°åŒ–åï¼Œåˆ·æ–°é¡µé¢ä»ç„¶ä¼šå¯¼è‡´å›¾ç‰‡æ— æ³•æ˜¾ç¤ºçš„é—®é¢˜
  - å› ä¸ºmodelWriter.setAttributeåï¼Œckeditorçš„modelå˜åŒ–ä¸ä¼šè‡ªåŠ¨è§¦å‘reactçš„setContentæ›´æ–°
  - è§£å†³æ–¹æ³•æ˜¯æ‰‹åŠ¨è§¦å‘æ›´æ–°contentæ•°æ®ï¼Œæ¥ç€è‡ªåŠ¨ä¿å­˜æ›´æ–°å†…å®¹

- ä¿å­˜å›¾ç‰‡æ•°æ®åï¼Œå¦‚ä½•æ¢å¤
  - é€šè¿‡ä»rxdbä¸­è¯»å–å›¾ç‰‡æ•°æ®ï¼Œå†å¯¹blobå¯¹è±¡åˆ›å»ºurl

- ç¼–è¾‘å™¨åˆå§‹æµ‹è¯•æ•°æ®

```html
<h1>title</h1>
<figure class="image image-style-align-right">
  <img src="blob:http://127.0.0.1:4001/f24939fd-49c8-4fb2-b90c-86917bec4b88">
  <figcaption>&nbsp;</figcaption>
</figure>
<figure class="image"><img src="blob:http://127.0.0.1:4001/f4fe8af7-300e-4c89-b713-94abd837f8d4">
</figure>
<pre class="mermaid" style="width:80vw;"><figure class="image"><img src="https://api.editoe.com/api/mermaid/generate?data=graph%20TD%0A%20%20%20%20A%20--%3E%20B%0A%20%20%20%20A%20--%3E%20C%0A%20%20%20%20B%20--%3E%20D%0A%20%20%20%20C%20--%3E%20D%0A"></figure>graph TD
    A --&gt; B
    A --&gt; C
    B --&gt; D
    C --&gt; D
</pre>
<p>&nbsp;</p>
```

## 1114

- å¯¹ä¸Šä¼ åä¿å­˜å›¾ç‰‡å’Œå–å‡ºå›¾ç‰‡æ•°æ®çš„apiç†è§£ä¸æ¸…æ™°
  - ä¸Šä¼ å›¾ç‰‡æ—¶ï¼Œimg-file  ->  blobUrl  ->  rxdb-doc-id
  - åˆ·æ–°é¡µé¢æ—¶ï¼Œmodelä¸å˜ï¼Œå¦‚ä½•æ ¹æ®blobUrlæŸ¥æ‰¾å›¾ç‰‡æ•°æ®

- DocumentImpl.addVersion(blob, type)çš„ç›®çš„æ˜¯ä¸ºäº†ä»€ä¹ˆ
  - æ“ä½œ DocumentImpl.#versionsï¼Œä¿å­˜æ–°æ•°æ®çš„ç‰ˆæœ¬
  - this.#versions.add(blob, type)

- DocumentClient.set(document)çš„ç›®çš„æ˜¯ä¸ºäº†ä»€ä¹ˆ
  - é€šè¿‡DocumentClientæ“ä½œrxdbæ•°æ®åº“
  - this.#documents.atomicUpsert({ ...value, id })
  - this.#blobs.insert({ id, type: v.type, created: v.created })
  - é—®é¢˜ï¼šä¸ºä»€ä¹ˆè¿”å›document.idï¼Œè¿™ä¸ªidæœ¬æ¥å°±å¯ä»¥ä»å‚æ•°ä¸­å–åˆ°ï¼Œä¸­é—´æœ‰è¢«æ›´æ–°å—
    - è™½ç„¶å†æ¬¡è°ƒç”¨äº†setArticleIdï¼Œä½†å› ä¸ºçŠ¶æ€æ²¡å˜ï¼Œreactä¹Ÿä¸ä¼šrerender

## 1112

- åœ¨imageBlockæ’ä»¶é‡Œé¢å®ç°src urlè½¬æ¢ï¼Œè¿˜æ˜¯åœ¨reactå±‚
  - åœ¨reactå±‚ï¼Œæ¯æ¬¡é‡è½½æ–‡æ¡£éƒ½ä¼šåˆ›å»ºä¸€æ¬¡blobUrl

- æ¯æ¬¡åˆ·æ–°é¡µé¢ï¼Œå›¾ç‰‡æ— æ³•æ˜¾ç¤ºçš„é—®é¢˜
  - URL.createObjectURLæ˜¯ä¸´æ—¶çš„ï¼Œæ¯æ¬¡åˆ·æ–°éƒ½ä¼šé‡æ–°åˆ›å»º
  - modelå±‚å­˜refï¼Œè€Œä¸æ˜¯blobUrl

- å¦‚ä½•å¤„ç†åŒä¸€å¼ å›¾ç‰‡çš„é—®é¢˜
  - ä¸Šä¼ å·²ç»ä»¥å‰å·²ç»ä¸Šä¼ è¿‡çš„å›¾ç‰‡æ—¶
    - æ¯æ¬¡åœ¨ä¿å­˜å›¾ç‰‡æ•°æ®å‰ï¼Œèƒ½æ‹¿åˆ°ArrayBuffer
  - å¤åˆ¶ç²˜è´´srcä¸ºblobUrlå½¢å¼çš„å›¾ç‰‡æ—¶
    - æ¯æ¬¡å›¾ç‰‡çš„srcä¼šè‡ªåŠ¨å˜åŒ–

- not-yet
  - URL.createObjectURL(file)æ¯æ¬¡è¿”å›çš„urléƒ½ä¸ç›¸åŒï¼Œå³ä½¿å¯¹äºåŒä¸€ä¸ªæ–‡ä»¶
    - æ¯æ¬¡ç²˜è´´æ™®é€šå›¾ç‰‡åï¼Œç²˜è´´å¾—åˆ°çš„æ–°å›¾ç‰‡urlä¹Ÿä¸ç›¸åŒ
  - æ–‡æ¡£rxdbä¿å­˜å›¾ç‰‡çš„ArrayBufferæ—¶ï¼Œå»é‡æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿå¾ˆéš¾

- ä¸åŒæ–¹å¼è¯»å–å›¾ç‰‡æ–‡ä»¶çš„ArrayBufferå¾—åˆ°çš„æ•°æ®æ˜¯å¦ç›¸ç­‰
  - éš¾ä»¥æ¯”è¾ƒ2ä¸ªArrayBufferå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œå› ä¸ºæ˜¯jså¯¹è±¡
  - imgFileReaderRetArrayBuffer === fileArrayBuffer 
  - é€šè¿‡ä¸‹é¢çš„å·¥å…·æ–¹æ³•ï¼Œå¯ä»¥æ¯”è¾ƒå¾—å‡ºä¸Šé¢ä¸¤ç§æ–¹å¼è¯»å‡ºçš„æ–‡ä»¶æ•°æ®ç›¸ç­‰

## 1111

- å›¾ç‰‡ä¸Šä¼ é—®é¢˜
  - å›¾ç‰‡ä¿å­˜æ—¶ï¼Œidå¦‚ä½•è®¾è®¡ï¼›ç”±æœåŠ¡ç«¯å®ç°
    - å– uuidã€æ–‡ä»¶å+éšæœºå€¼ ã€ md5-hashå€¼ ã€ æ–‡ä»¶url
  - å›¾ç‰‡æ›´æ–°å¦‚ä½•å®ç°
    - ç›®å‰åªèƒ½å…ˆåˆ é™¤ï¼Œå†ä¸Šä¼ 
  - å›¾ç‰‡blobå¯¹è±¡åªä¿å­˜åˆ°äº†rxdbï¼Œæš‚æ—¶æ²¡æœ‰è¯»å–å’Œä½¿ç”¨ï¼Œå¯ä»¥ç”¨æ¥å®ç°å›¾ç‰‡ç¼–å·
    - å›¾ç‰‡æ•°æ®å•ç‹¬å­˜å‚¨çš„ç›®çš„
  - uploadedImgè¿™ä¸ªæ–°apiçš„è®¾è®¡
  - åªå®ç°äº†å›¾ç‰‡å­˜å‚¨ï¼Œæš‚æœªå®ç°editor.getData()è·å–æ–‡ä»¶çš„æ— å…³æ•°æ®ç§»å‡º

- ä½“éªŒ
  - æœ¬åœ°æ–‡æ¡£ä¸æ–¹ä¾¿è°ƒè¯•å›¾ç‰‡

- å®ç°å›¾ç‰‡æœ¬åœ°åŒ–çš„æ€è·¯
  - 1. ä¸Šä¼ å›¾ç‰‡æ—¶ï¼Œå›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ°æ•°æ®åº“
  - 2. å›¾ç‰‡ä¿å­˜çš„æ ¼å¼ä¸ºblobæ ¼å¼çš„url

- Fileæ˜¯Blobçš„å­ç±»
  - new File([], 'foo.txt') instanceof File // true
  - new File([], 'foo.txt') instanceof Blob // true

- [FileReader vs. URL.createObjectURL](https://stackoverflow.com/questions/31742072)
- createObjectURL åŒæ­¥æ‰§è¡Œ
- FileReader.readAsDataURL å¼‚æ­¥
- createObjectURL
  - returns url with hash, and store object in memory until document triggers unload event (e.g. document close) or execute revokeObjectURL
  - éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜
  - ï¼Ÿ æ³¨æ„æ¯æ¬¡ä¸Šä¼ ç›¸åŒçš„å›¾ç‰‡ä¼šè¿”å›ä¸åŒçš„urlï¼Œæ˜¯å¦å­˜åœ¨è¿‡å¤šçš„å†—ä½™æ•°æ®
- FileReader.readAsDataURL 
  - returns base64 that contains many characters, and use more memory than blob url, but removes from memory when you don't use it (by garbage collector)
  - å ç”¨æ›´å¤šå†…å­˜ï¼Œä½†ä¼šè‡ªåŠ¨gcå›æ”¶å†…å­˜
  - æ–¹ä¾¿è¯»å–å’Œä¿å­˜é¢å¤–çš„å…ƒæ•°æ®

## 1110

- å›¾ç‰‡æœ¬åœ°åŒ–
  - å›¾ç‰‡ä¿å­˜ä¸ºdocçš„ç»“æ„è®¾è®¡ï¼Ÿå›¾ç‰‡å­˜å‚¨ id/url, displayNameç¼–å·æˆ–æ˜¾ç¤ºå, data
    - dataä¿å­˜åœ¨å“ªé‡Œï¼Œå¦‚ä½•å‘docé‡Œé¢æ·»åŠ å›¾ç‰‡base64æ•°æ®
    - æœ€åå›¾ç‰‡imgçš„srcåº”è¯¥æ˜¾ç¤ºçš„æ˜¯ä»€ä¹ˆ
  - æµç¨‹å›¾çš„å›¾ç‰‡srcæœ¬èº«å°±æ˜¯ç¬¦åˆè¦æ±‚çš„urlï¼Œåªéœ€è¦æ›¿æ¢é€šè¿‡å·¥å…·æ ä¸Šä¼ çš„å›¾ç‰‡
    - ä½†æ³¨æ„æµç¨‹å›¾è¦å»æ‰æ— å¿…è¦çš„å…ƒç´ æ ‡ç­¾

- å®¡é˜…balloonToolbaræ‚¬æµ®å·¥å…·æ¡çš„æ–¹æ³•
  - editor.plugins.get('BalloonToolbar').show()

```CSS
.ck.ck-balloon-panel.ck-balloon-panel_visible {
  & .ck.ck-dropdown {
    & .ck.ck-splitbutton {
      display: inline-flex;
      flex-flow: row nowrap;
    }
  }
}

.ck.ck-balloon-panel.ck-balloon-panel_visible .ck.ck-dropdown .ck.ck-splitbutton {
  display: inline-flex;
  flex-flow: row nowrap;
}
```

- [x] ç¼–è¾‘å™¨editor.getData()å†editor.setData()æ—¶ï¼Œmermaidçš„modelä¼šå¤šå‡ºä¸€ä¸ªç©ºçš„imageBlockçš„é—®é¢˜
  - åŸå› å®šä½
    - preå…ƒç´ çš„upcastè¿‡ç¨‹ä¸­ï¼ŒimageBlockåªæœ‰åœ¨ä¸å­˜åœ¨æ—¶æ‰éœ€è¦åˆ›å»ºï¼Œæ²¡å¿…è¦æ¯æ¬¡éƒ½åˆ›å»º
    - ~~è§‚å¯Ÿmodelçš„å˜åŒ–ï¼Œmodelå˜åŒ–äº†ï¼Œè¯´æ˜commandçš„æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰§è¡Œäº†é¢å¤–çš„æ“ä½œ, åº”è¯¥åœ¨commandä¸­æ’æŸ¥ï¼Œè€Œä¸æ˜¯åœ¨upcastæˆ–downcastçš„åœ°æ–¹æ’æŸ¥~~
      - editor.setData(editor.getData())çš„è¿‡ç¨‹ï¼Œå®æµ‹ä¸ä¼šè§¦å‘command
  - æ¯”è¾ƒç†æƒ³çš„æ–¹å¼ï¼Œæ˜¯getDataæ—¶åªè¾“å‡ºmermaidCodeï¼Œä¸è¾“å‡ºimageï¼Œä½†æ²¡æœ‰æ‰¾åˆ°å…·ä½“å®ç°æ–¹æ³•ï¼Œå› ä¸ºdataDowncastæ— æ³•å®Œå…¨æ§åˆ¶getDataçš„è¾“å‡ºè¿‡ç¨‹
  - å˜é€šçš„æ–¹å¼ï¼Œæ˜¯getDataæ—¶è¾“å‡ºmermaidå’ŒimageBlockï¼ŒsetDataæ—¶ä¿®æ”¹upcastè¿‡ç¨‹ï¼Œé¿å…åˆ›å»ºæ–°çš„imageBlock

- æµ‹è¯•ç¼–è¾‘å™¨å†…å®¹çš„ä¿å­˜
  - editor.setData(editor.getData())

- editor.getData()çš„å®ç°åŸç†
  - ä¼šè°ƒç”¨DataApiMixin.getData( options ) { return this.data.get( options ); }
  - core/editorä¸­, this.data = new DataController( this.model, stylesProcessor ); 
  - DataController.constructorä¸­ï¼Œä¼šåˆ›å»º this.viewDocument
  - DataController.get(options)æ–¹æ³•ï¼Œreturn this.stringify( root, options )
  - ä¼šæ‰§è¡Œ DataController.stringify( modelElementOrFragment, options)ï¼Œåªåš2ä»¶äº‹
    - model -> view: const viewDocumentFragment = this.toView( modelElementOrFragment, options );
    - view -> data: return this.processor.toData( viewDocumentFragment );

- editor.setData(data)çš„å®ç°åŸç†
  - DataController.set( data, options = {} ) ä¼šæŠŠå°†æ–°æ•°æ®è®¾ç½®åˆ°editorçš„ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—
  - ä¼šæ‰§è¡Œ DataController.parse(data, context)ï¼Œåªåš2ä»¶äº‹
    - data -> view: const viewDocumentFragment = this.processor.toView( data );
    - view -> model: return this.toModel( viewDocumentFragment, context );

- mermaid dataDowncastçš„è¾“å‡ºæ˜¯æ­£å¸¸çš„
  - mermaidView = writer.createContainerElement

- æ£€æŸ¥editor.getDataçš„è¿‡ç¨‹å’ŒdataDowncastçš„å…³ç³»

## 1109

- [ ] æµç¨‹å›¾è·å–ç„¦ç‚¹æ—¶æ˜¯å¦è¦ç§»é™¤å¤–éƒ¨è“è‰²è¾¹æ¡†
- [ ] æµç¨‹å›¾åŒå‡»æ—¶å‡ºç°ç¼–è¾‘æ–‡æœ¬ä»£ç å¼¹çª—ï¼Œä½†ä¿®æ”¹è¿‡çš„æ–‡æœ¬ä»£ç æ— æ³•ä¿å­˜

- CKEditorError: model-position-before-root
  - Cannot read properties of undefined (reading 'length')
  - æ£€æŸ¥ä¿®æ”¹modelæ—¶æ’å…¥å…ƒç´ çš„ä½ç½®

- åª’ä½“æŸ¥è¯¢@mediaæŠ€å·§
  - å¦‚æœåˆ¤æ–­æœ€å°å€¼ï¼Œå³ä½¿ç”¨(min-width)ï¼Œåº”è¯¥ä»å°åˆ°å¤§å†™ï¼›ä¹Ÿæ˜¯æ¨èçš„å†™æ³•ï¼Œå› ä¸ºä¸€äº›å‰ç«¯æ¡†æ¶ï¼ˆå¦‚ï¼šbootstrapï¼‰å°±æ˜¯åˆ¤æ–­æœ€å°å€¼ï¼Œä»å°å¾€å¤§å†™çš„ï¼›
  - å¦‚æœåˆ¤æ–­æœ€å¤§å€¼ï¼Œå³ä½¿ç”¨(max-width)ï¼Œåº”è¯¥ä»å¤§åˆ°å°å†™

- ç»™æ–‡æ¡£æ·»åŠ marginçš„è®¾è®¡
  - é£ä¹¦æ–‡æ¡£ç½‘é¡µç‰ˆæœªé€‚é…æ‰‹æœºæµè§ˆå™¨
  - æ–‡æ¡£å†…å®¹çš„å®½åº¦éœ€è¦è®¾ç½® min-widthï¼Œ max-width
  - å½“å®½åº¦ç¼©å°åˆ°æœ€å°å®½åº¦ä»¥ä¸‹ï¼Œæ–‡æ¡£å®½åº¦å°±ä¸ä¼šç»§ç»­å˜å°äº†ï¼Œæ­¤æ—¶ä¹Ÿæ²¡æœ‰æ°´å¹³æ»šåŠ¨æ¡ï¼Œæ°´å¹³é€‰æ‹©å’Œæµè§ˆä¸æ–¹ä¾¿

- é£ä¹¦æ–‡æ¡£å®¹å™¨å®½åº¦æ ·å¼css
  - æ–‡æ¡£åœ¨å®½å±ä¸Šï¼Œæœ€å¤§å®½åº¦ä¸º790

- muiçš„é»˜è®¤æ–­ç‚¹
  - xs 0
  - sm 600
  - md 960
  - lg 1280
  - xl 1920
  - [@media æŸ¥è¯¢æ¡ä»¶åˆ¤æ–­çš„é¡ºåº](https://www.jianshu.com/p/c9901d17a5d6)

```CSS
.etherpad-container {
  min-width: 470px;
  max-width: 790px;
  min-height: 100%;
  margin: 0 auto;
  justify-content: center;
  transition: margin .4s ease-out;
}

/* @media screen and (max-width: 900px) */
.etherpad-container {
  width: calc(100% - 40px);
  margin-left: 32px;
  min-width: 344px;
}

/* @media screen and (max-width: 1279px) */
.etherpad-container {
  width: 70%;
  margin-left: 15%;
}

/* @media screen and (max-width: 1400px) */
.etherpad-container {
  width: 80%;
  margin-left: 20%;
}
```

## 1108

- ä¿®å¤äº†æ’å…¥æµç¨‹å›¾æ—¶å¤ç”¨å®˜æ–¹å›¾ç‰‡æ’ä»¶çš„é—®é¢˜ï¼Œä½†å¼•å…¥äº†æ–°çš„é—®é¢˜
  - ç²˜è´´mermaidæµç¨‹å›¾æ–‡æœ¬ä»£ç æ—¶ï¼Œæ— æ³•æ­£å¸¸æ˜¾ç¤º
  - åŒå‡»æµç¨‹å›¾å›¾ç‰‡æ—¶ï¼Œæ— æ³•å‡ºç°ç¼–è¾‘mermaidä»£ç çš„å¼¹çª—
  - ~~æµç¨‹å›¾çš„ç¼©æ”¾ä»æœªå®ç°~~

- [x] å›¾ç‰‡æ ‡é¢˜åˆ‡æ¢æ˜¾ç¤ºè¦æ”¹æˆä¸­æ–‡æç¤º

- ä¿®æ”¹å›¾ç‰‡æ‚¬æµ®å·¥å…·æ¡çš„æ–‡å­—æç¤ºä¸ºä¸­æ–‡
  - æ€è·¯0ï¼šåˆ©ç”¨å®˜æ–¹æä¾›çš„æ„å»ºå¤šè¯­è¨€çš„æ–¹æ³•ï¼Œadd/t(), webpacké…ç½®
    - addéœ€è¦æ‰‹åŠ¨åœ¨åˆ›å»ºeditorå®ä¾‹å‰ï¼Œä¿®æ”¹`window.CKEDITOR_TRANSLATIONS`å±æ€§å¯¹è±¡ï¼Œæ·»åŠ é”®å€¼å¯¹
    - webpackèƒ½æå–å‡º.poæ–‡ä»¶ä¸­é…ç½®çš„å¤šè¯­è¨€ç¿»è¯‘ï¼Œä½†è¿™äº›å¤šè¯­è¨€ç¿»è¯‘æ–‡ä»¶èµ„æºå¿…é¡»ä½œä¸ºç¬¬3æ–¹åŒ…å¼•å…¥
  - æ€è·¯1ï¼šé€šè¿‡ç§æœ‰apiè·å–åˆ°å›¾æ ‡å·¥å…·æ¡çš„toolbarèœå•é¡¹ï¼Œç›´æ¥ä¿®æ”¹jså¯¹è±¡çš„å±æ€§
    - editor.plugins.get('WidgetToolbarRepository')._toolbarDefinitions
  - æ€è·¯2ï¼šä¿®æ”¹ç¼ºå¤±å¤šè¯­è¨€ç¿»è¯‘æ‰€åœ¨æ’ä»¶çš„æºç ï¼Œæ·»åŠ å¯¹åº”çš„æ–‡å­—ç¿»è¯‘ï¼›ä½†éœ€è¦æŒç»­ä¿®æ”¹æ›´æ–°
    - \ckeditor5-image\src\imagecaption\imagecaptionui.js

## 1107

- åŒå‡»å›¾ç‰‡æ—¶ï¼Œæ˜¯å¦‚ä½•å‡ºç°ç¼–è¾‘å¼¹çª—çš„ï¼Œå¼¹çª—ä¸­æä¾›äº†æµç¨‹å›¾æ¨¡ç‰ˆ
  - MermaidUI.init()æ–¹æ³•ä¸­ï¼Œé€šè¿‡_enableUserBalloonInteractions()æ³¨å†ŒåŒå‡»äº‹ä»¶ï¼Œæ¯æ¬¡åŒå‡»mermaidå›¾ç‰‡èŠ‚ç‚¹ï¼Œéƒ½ä¼šæ‰§è¡ŒshowUI()ï¼Œè§¦å‘æ‰§è¡Œ `ReactDOM.render(<MermaidPanel />, this.element)`ï¼Œä¼šæ˜¾ç¤ºåŒ…å«æµç¨‹å›¾æ¨¡ç‰ˆçš„å¼¹çª—
  - `<MermaidPanel />`ä¼šä¼ å…¥åˆå§‹æ–‡æœ¬ä»£ç ï¼Œä»¥åŠæ›´æ–°æ–‡æœ¬ä»£ç çš„æ–¹æ³•
  - åœ¨MaterialUIä¸­ç›‘å¬`'change:code'`äº‹ä»¶ï¼Œæ¯æ¬¡æ–‡æœ¬ä»£ç codeæ›´æ–°ï¼Œéƒ½ä¼šæ‰§è¡ŒinsertMermaidå‘½ä»¤(è¯¥å‘½ä»¤ä¼šåˆ›å»ºæˆ–æ›´æ–°å½“å‰çš„modelå¯¹è±¡)ï¼Œç„¶åè§¦å‘viewæ›´æ–°

- [x] æ’å…¥mermaidæ—¶ï¼Œå¦‚ä½•å’Œimageè”ç³»èµ·æ¥
  - è·å–åˆ°mermaidæˆ–ç¬¬ä¸‰æ–¹çš„å›¾ç‰‡urlåœ°å€åï¼Œä¸è¦æ‰‹åŠ¨åˆ›å»ºimgï¼Œè€Œæ˜¯ä¿®æ”¹image-pluginå¯¹åº”çš„çš„modelæ•°æ®

- [x] è‡ªå®šä¹‰å›¾ç‰‡æ›´æ–°æ—¶ï¼Œä¿®æ”¹modelè¿˜æ˜¯ä¿®æ”¹view
  - æ¯”è¾ƒç†æƒ³çš„æ–¹å¼æ˜¯modelåªå®šä¹‰æœ€å¤–å±‚ç»“æ„ï¼Œä¸å®šä¹‰imageBlockçš„å®ç°ç»†èŠ‚
  - å¯è€ƒè™‘åœ¨downcastè¿‡ç¨‹ä¸­åŠ¨æ€åˆ›å»ºimageBlockçš„model
  - æ¬¡ä¼˜çš„æ–¹æ¡ˆæ˜¯ä¿®æ”¹schemaï¼Œå°†å®ç°ç»†èŠ‚ä¹Ÿå®šä¹‰å‡ºæ¥
  - å› ä¸ºmodelWriterä¸æ£€æŸ¥schemaï¼Œæ‰€ä»¥å¯ä»¥åœ¨ä¸ä¿®æ”¹schemaå®šä¹‰çš„å‰æä¸‹ï¼ŒåŠ¨æ€æ’å…¥å†…å®¹

- image-plugins
  - ImageToolbar
    - Instances of toolbar components (e.g. buttons) are created using the editor's component factory based on the image.toolbar configuration option.
  - ImageCaption
  - ImageStyle
    - glue for ImageStyleEditing, ImageStyleUI
    - It provides a default configuration, which can be extended or overwritten.
  - ImageResize
    - It adds a possibility to resize each image using handles.
  - ImageUpload
    - glue for ImageUploadEditing,ImageUploadUI,ImageUploadProgress
  - ImageInsert
    - Insert images via source URL
    - glue for ImageUploadImageInsertUI
  - AutoImage
    - It recognizes image links in the pasted content and embeds them shortly after they are injected into the document.
  - ImageTextAlternative
  - LinkImage

- editor.configä¸­çš„é…ç½®å˜åŒ–æ—¶ï¼Œå¦‚ä½•rerender editor
  - æ€è·¯1: å…ˆdestroy editorå®ä¾‹ï¼Œå†åˆ›å»ºæ–°çš„editorå®ä¾‹
  - æ€è·¯2: ä¿®æ”¹CKEditorçš„idå±æ€§ï¼Œäº¤ç»™ckeditor5-reactæ›´æ–°

## 1106

- æ›´æ–°plugin configçš„æ–¹æ³•
  - æå‰è®¾è®¡æˆå¯å¼€å¯å…³é—­çš„é…ç½®é¡¹ï¼Œç„¶åæ·»åŠ åˆ°é…ç½®å¯¹è±¡

- All changes in the document structure, of the documentâ€™s selection and even the creation of elements, can only be done by using the model writer.

- Currently, there is no straightforward way to override the schema preconfigured by features. 
  - If you want to override the default settings when initializing the editor, the best solution is to replace `editor.model.schema` with a new instance of it. 
  - This, however, requires rebuilding the editor.

- The role of the model layer is to create an abstraction over the data. 
  - Its format was designed to allow storing and modifying the data in the most convenient way
  - Most features operate on the model (read from it and change it).

- The view may need to be changed manually if the cause of such change is not represented in the model. 

- Technically, the data pipeline does not have a document and a view controller. 

- there is no editing upcasting 
  - because all user actions are handled by editor features by listening to view events, analyzing what happened and applying necessary changes to the model.

## 1105

- å›¾ç‰‡ç›®æ ‡
  - å¯¼å‡ºdata viewæ—¶ï¼Œå»æ‰imageéƒ¨åˆ†
  - ç¼–è¾‘æ˜¾ç¤ºæ—¶ï¼Œæ·»åŠ imageBlockçš„éƒ¨åˆ†
  - æ‰“å¼€å¸¦æ•°æ®çš„æ–‡æ¡£åˆå§‹åŒ–æ—¶ï¼Œæ·»åŠ imageBlockçš„éƒ¨åˆ†

- å¦‚æœè¦ç”¨å®˜æ–¹çš„imageæ’ä»¶çš„åŠŸèƒ½ï¼ŒmodelåŒ…å«imageBlockæ˜¯æœ€ç®€å•çš„æ–¹å¼
  - å¦åˆ™ï¼Œè¦åœ¨downcastä¹‹ä¸­æ‰‹åŠ¨åˆ›å»ºå…ƒç´ 

- æ’å…¥å›¾ç‰‡å’Œæ ‡é¢˜çš„å‚è€ƒ
  - [How to insert an image with a caption into a custom element in CKEditor 5?](https://stackoverflow.com/questions/53208435)
  - [Refreshing a CKEditor5 widget upon model changes](https://stackoverflow.com/questions/51319311)

- æµç¨‹å›¾æ’å…¥æ ‡é¢˜çš„è‡ªå®šä¹‰å®ç°

```JS
const mermaidView = writer.createEmptyElement('img', {
  src: `https://api.editoe.com/api/mermaid/generate?data=${encodeURI(mermaidCode)}`,
});

const figcaptionElem = writer.createEditableElement('figcaption', {
  class: 'ck-editor__editable ck-editor__nested-editable ck-placeholder image__caption_highlighted',
});

writer.insert(writer.createPositionAt(container, 0), mermaidView);
writer.insert(writer.createPositionAt(container, 1), figcaptionElem);
writer.insert(writer.createPositionAt(figcaptionElem, 0), writer.createText('è¯·è¾“å…¥æ ‡é¢˜æˆ–æè¿°'));

return toWidget(container, writer, 'figure');
```

## 1104

- å¦‚ä½•å…è®¸æ–°çš„schema
  - ä½œä¸ºparentï¼ŒåŒ…å«å·²æœ‰schemaï¼ŒallowContent
  - ä½œä¸ºå­å…ƒç´ ï¼ŒåŒ…å«åœ¨å·²æœ‰çˆ¶å…ƒç´ schemaä¸­ï¼ŒallowedIn

- ä¿®æ”¹modelçš„writerå‚æ•°å¯¹è±¡ å’Œ conversionaApiçš„writerå±æ€§(DowncastWriter) ä¸åŒ
  - `editor.model.change((writer) => {` åœ¨æºç  @ckeditor/ckeditor5-engine/src/model/writer
    - The model can only be modified by using the writer. 
    - It should be used whenever you want to create a node, modify child nodes, attributes or text, set the selection's position and its attributes.
    - The instance of the writer is only available in the change() or enqueueChange().
    - Note that the writer should never be stored and used outside of the change() and enqueueChange() blocks.
    - Note that writer's methods do not check the Schema. It is possible to create incorrect model structures by using the writer.
  - `conversion.for( 'One-way converter' ) â†’ DowncastHelpers` | UpcastHelpers
    - elementToElement( config = { config.model, config.view, [config.triggerBy], config.triggerBy.attributes, config.triggerBy.children } )
    - This conversion results in creating a view element.

- **UI elements are ignored by the editor selection system**.
  - the selection cannot be placed in it, it is skipped (invisible) when the user modifies the selection by using arrow keys 
  - and the editor does not listen to any mutations which happen inside your UI elements.
  - The limitation is that you cannot convert a model element to a UI element. 
  - UI elements need to be created for markers or as additional elements inside normal container elements.

- The **raw elements** work as data containers ("wrappers", "sandboxes") but their **children are not managed or even recognized by the editor**. 
  - This encapsulation allows integrations to maintain custom DOM structures in the editor content without, for instance, worrying about compatibility with other editor features. 
  - Raw elements are a perfect tool for integration with external frameworks and data sources.
  - they are considered by the editor selection and they can work as widgets.

## 1103

- è¯»imageéƒ¨åˆ†çš„æºç 
  - åˆ†ææè¿°æ€§æ ‡é¢˜çš„å®ç°
  - åˆ†æå¤šè¯­è¨€çš„å®ç°

- å›¾ç‰‡å½¢å¼çš„å†…å®¹å¦‚æµç¨‹å›¾æ˜¯å¦è¦åšä¸ªå°é‡æ„
  - æ˜¯å¦è¦æ˜¾ç¤ºå·¦å³å±…ä¸­å¯¹é½ã€æ·»åŠ å­—å¹•

## 1102

- [x] è¦æ·»åŠ å…¨å±€æ ·å¼å»æ‰æ‰€æœ‰å›¾ç‰‡çš„å·¦ä¸Šå³ä¸‹æ“ä½œæŒ‰é’®

- [x] nightlyç½‘ç«™ä¸Šæœ€æ–°commitæœªç”Ÿæ•ˆï¼Œå³é”®èœå•æœªå»é™¤æ’å…¥ç›¸å…³èœå•é¡¹ï¼Œä½†æœ¬åœ°è¿è¡Œæ—¶å³é”®èœå•å·²ç²¾ç®€è¿‡äº†
  - åŸå› æ˜¯pråˆå¹¶åˆ°äº†é”™è¯¯çš„canaryåˆ†æ”¯ï¼Œåº”è¯¥åˆå¹¶åˆ°nightlyåˆ†æ”¯
  - package-lock.jsonéœ€è¦æ¯æ¬¡æ›´æ–°toe-editorçš„ç‰ˆæœ¬

- æ’å…¥å›¾ç‰‡æ—¶ï¼Œå›¾ç‰‡æ ‡é¢˜æ·»åŠ çš„ä»£ç ä½ç½® captionElementCreator()
  - editoe\plugins\ckeditor5-image\src\imagecaption\utils.js 

## 1101

- æ–°ç¼–è¾‘å™¨ç¼ºå°‘çš„props
  - autoSave, updateTitle

- npmå‘ç‰ˆæµç¨‹
  - npm run patch ä¿®æ”¹ç‰ˆæœ¬å·
  - npm run release
  - npm run pub è‡ªåŠ¨åˆ›å»ºæ–°åˆ†æ”¯ï¼Œè‡ªåŠ¨pushï¼Œéœ€è¦æ‰‹åŠ¨ææ·»åŠ æ–°åˆ†æ”¯çš„pr
  - npmè‡ªåŠ¨ä¼šè‡ªåŠ¨å‘åŒ…

## 1029-31

- ä¸Šä¼ å›¾ç‰‡çš„é—®é¢˜
  - ä½¿ç”¨çš„æ˜¯æºç å®šåˆ¶çš„ç¼–è¾‘å™¨ckeditor5-editor-classicï¼Œè€Œä¸æ˜¯é¢„å®šä¹‰ç¼–è¾‘å™¨ckeditor5-build-classic
    - å¯¹é¢„å®šä¹‰ç¼–è¾‘å™¨ï¼Œæ·»åŠ è‡ªå®šä¹‰æ’ä»¶è¦ä½¿ç”¨extraPluginså±æ€§
    - å¯¹äºæºç å®šåˆ¶çš„ç¼–è¾‘å™¨ï¼Œç›´æ¥æ·»åŠ åœ¨ä¾èµ–é¡¹ä¹‹å
  - æ’å…¥å›¾ç‰‡çš„commandé€‰æ‹©é”™è¯¯
    - insertImage -> uploadImage
  - æœªå®ç°å°†å›¾ç‰‡ä¸Šä¼ å¹¶ä¿å­˜åˆ°æœåŠ¡å™¨

- data view å’Œ editing viewçš„åŒºåˆ«

- semantic views for rendering and data retrieval purposes and non-semantic views for data input.
- The view may need to be changed manually if the cause of such change is not represented in the model.
- Because the UI is organized according to the view-per-tree rule, it is clear which view is responsible for which part of the UI 

## å›¾ç‰‡ä¸Šä¼ é—®é¢˜

- ä¸Šä¼ å›¾ç‰‡åˆ°é˜¿é‡Œäº‘ossçš„é€»è¾‘ä¸æ¸…æ™°

- ä¸´æ—¶å˜é€šçš„æ€è·¯ï¼š
  - ä¸Šä¼ æ—¶å°†å›¾ç‰‡è½¬æ¢æˆbase64ï¼Œä¿å­˜åˆ°localStorage
  - æ˜¾ç¤ºæ—¶ä½¿ç”¨ data: url å‰ç¼€çš„å½¢å¼

- é™åˆ¶è¯´æ˜
  - å•ä¸ªåŸŸåä¸‹ï¼ŒlocalStorage/sessionStorageçš„æ€»å¤§å°ä¸èƒ½è¶…è¿‡5mbï¼Œè‹¥è¶…å‡ºåˆ™ä¸¢å¼ƒè€Œä¸ä¼šè¦†ç›–

## 1028

- å›¾ç‰‡æ’ä»¶features
  - æ”¯æŒæ‹–æ‹½ä¸Šä¼ ã€ç²˜è´´ä¸Šä¼ ã€ä»toolbarçš„å›¾ç‰‡æŒ‰é’®æ‰“å¼€æ–‡ä»¶é€‰æ‹©å™¨ä¸Šä¼ é€‰å®šå›¾ç‰‡
  - å®ç°æœ¬åœ°é¢„è§ˆé¢„è§ˆå›¾ç‰‡ï¼Œå¯é€‰ä¸Šä¼ 
  - æ”¯æŒæ’å…¥å¤–éƒ¨å›¾ç‰‡url
- å®ç°è¯´æ˜
  - ä¸€æ¬¡åªèƒ½ä¸Šä¼ ä¸€å¼ å›¾ç‰‡ï¼Œæš‚ä¸æ”¯æŒä¸Šä¼ å¤šå¼ 

- å®ç°å›¾ç‰‡ä¸Šä¼ çš„åŸºæœ¬æ­¥éª¤
  - The images are intercepted by the image upload plugin
  - For every image, the image upload plugin creates an instance of a file loader.
  - While the images are being uploaded, the image upload plugin å±•ç¤ºå ä½ç¬¦æˆ–è¿›åº¦
  - Once uploaded, the upload adapter notifies the editor
  - ref
    - [How To Use React Ckeditor Upload File Image With Demo and Example Codes](https://www.techgalery.com/2021/05/how-to-use-react-ckeditor-upload-file.html)
    - [CKEditor5 With Custom Image Uploader in React](https://www.alvinrapada.com/stories/ckeditor5-with-custom-image-uploader-in-react)
    - [CKEditor Image upload with Firebase and React](https://dev.to/suraj975/ckeditor-image-upload-with-firebase-and-react-1pe8)
    - [How to enable image upload support in CKEditor 5?](https://newbedev.com/how-to-enable-image-upload-support-in-ckeditor-5)

- å›¾ç‰‡æ’ä»¶çš„é—®é¢˜
  - è¦ä¸è¦ä¸Šä¼ åˆ°åç«¯? yes
  - è¦ä¸è¦æ”¯æŒç”¨æˆ·è¾“å…¥ä»»æ„å›¾ç‰‡url? no

- æµç¨‹å›¾

```markdown

graph TD
    A-->B;
    A-->C;
    B-->D;
    C-->D;

graph TD
    A[Christmas] -->|Get money| B(Go shopping)
    B --> C{Let me think}
    C -->|One| D[Laptop]
    C -->|Two| E[iPhone]
    C -->|Three| F[fa:fa-car Car]

- User Journey Diagram

journey
    title My working day
    section Go to work
      Make tea: 5: Me
      Go upstairs: 3: Me
      Do work: 1: Me, Cat
    section Go home
      Go downstairs: 5: Me
      Sit down: 5: Me
```

## 1027

- conversionæä¾›çš„3ç§è½¬æ¢æ–¹å¼çš„æ—¶æœºç¡®è®¤
  - upcast
  - dataDowncast
  - editingDowncast

- åˆ›å»ºblock widgetçš„åŸºæœ¬æµç¨‹
  - è®¾è®¡æ’ä»¶å’Œwidgetçš„å±‚æ¬¡ç»“æ„ï¼šentryã€editingã€uiã€cmd
  - åœ¨editingä¸­å®šä¹‰schema
  - åœ¨editingä¸­å®šä¹‰converter
  - å°†converterç»†ç²’åº¦å®šä¹‰ï¼ŒeditingDowncastçš„viewæ–¹æ³•çš„è¿”å›å€¼ä½¿ç”¨toWidget/toWidgetEditable
  - ç»§æ‰¿Commandï¼Œå®ç°execute/refresh
  - åœ¨editingä¸­æ³¨å†Œcommands
  - åœ¨uiä¸­åˆ›å»ºå›¾æ ‡ï¼Œå¹¶æ·»åŠ åˆ°toolbar

- åˆ›å»ºinline widgetçš„åŸºæœ¬æµç¨‹
  - è®¾è®¡æ’ä»¶å’Œwidgetçš„å±‚æ¬¡ç»“æ„
  - _defineSchema
  - _defineConverters
  - ç»§æ‰¿Commandï¼Œå®ç°execute/refresh
  - åœ¨editingä¸­æ³¨å†Œcommands
  - fix position mapping è§£å†³ç‚¹å‡»inlineæ–‡å­—ä¸­é—´ä¼šæŠ›å‡ºå¼‚å¸¸çš„é—®é¢˜
  - åˆ›å»ºdropdown uiï¼Œå¹¶æ·»åŠ åˆ°toolbar
  - å°†placeholderçš„é¢„å®šä¹‰ç±»å‹åœ¨editingä¸­å®šä¹‰ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç 

## 1026

- åˆ›å»ºç®€å•pluginçš„åŸºæœ¬æµç¨‹
  - ç¡®å®šæ’ä»¶åŠŸèƒ½ç›®æ ‡ã€ä¾èµ–å…³ç³»ã€æ•°æ®æµæˆ–æ¶æ„
  - ç»§æ‰¿Plugin class
  - åœ¨initæ–¹æ³•ä¸­åˆ›å»ºui
  - åœ¨uiç»„ä»¶ä¸­æ³¨å†Œexecuteäº‹ä»¶å¤„ç†å‡½æ•°
  - é€šè¿‡editor.model.insertContentæ’å…¥å†…å®¹åˆ°ç›®æ ‡ä½ç½®

- çŠ¶æ€æ”¾åœ¨pluginï¼Œè¿˜æ˜¯æ”¾åœ¨command
  - æ”¾åœ¨pluginï¼Œå¯æ–¹ä¾¿è·å–
  - æ”¾åœ¨commandï¼Œå¯æ–¹ä¾¿ä¿®æ”¹ refresh() --> this.value
  - answer
    - ä¸€èˆ¬æ”¾åœ¨commandï¼Œæ–¹ä¾¿ä»å¤–éƒ¨è§¦å‘ä¿®æ”¹
    - uiç›¸å…³çŠ¶æ€ä¸€èˆ¬ç”¨reactç®¡ç†ï¼Œè€Œä¸æ˜¯ckeditor
    - ç¼–è¾‘å™¨å†…å®¹ç›¸å…³çŠ¶æ€ï¼Œè¿˜å¯ä»¥è€ƒè™‘æ”¾åœ¨attributes

- EmitterMixinã€ObservableMixin çš„åŒºåˆ«
  - ç”¨çš„å¾ˆå°‘

- æ€ä¹ˆçŸ¥é“è¦å°†viewæ”¾åœ¨pluginçš„ä½ç½®
  - editor.model.insertContentçš„ç¬¬2ä¸ªå‚æ•°æŒ‡å®šæ’å…¥ä½ç½®

- å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰reactç»„ä»¶å®šåˆ¶ui
  - å‚è€ƒæ–‡æ¡£ç¤ºä¾‹ï¼Œæ€è·¯å®ç°æ˜¯uiæ’ä»¶æ—¶uiæ¸²æŸ“éƒ¨åˆ†ä½¿ç”¨reactç»„ä»¶
