---
title: showmebug-yaoo-work-plan
tags: [showmebug, work]
created: 2024-05-06T02:54:24.884Z
modified: 2024-05-06T02:54:40.374Z
---

# showmebug-yaoo-work-plan

# guide

# personal
- å·¥ä½œOKR
  - ä¸šåŠ¡ç±»: aiç¼–ç¨‹/pr/è‡ªåŠ¨æµ‹è¯•
  - åŸºå»ºç±»: åŸºåº§å·¥ç¨‹ã€ä»£ç ç¼–è¾‘å™¨
  - å›¢é˜Ÿç±»: æµ‹è¯•ã€è¿è¥

- work-xp-pros
  - äº§ç ”å›¢é˜Ÿçš„å¯¹é½éå¸¸å……åˆ†
- work-xp-cons
  - å•äººé¡¹ç›®å¤ªå¤šäº†ï¼Œç»´æŠ¤å›°éš¾ï¼Œæ¯”å¦‚paaså’Œ1024codeï¼Œæµªè´¹äº†å¾ˆå¤šç ”å‘èµ„æº

- ç ”å‘æµç¨‹
  - backlog > todo > doing(devåˆ†æ”¯) > readyForTest(stagingåˆ†æ”¯) > done
  - ç ”å‘è´Ÿè´£æ·»åŠ ä»»åŠ¡ï¼Œæµ‹è¯•è´Ÿè´£å‡å°‘ï¼› reviewå±äºdoingçš„å¼€å‘æˆ–è”è°ƒçŠ¶æ€
  - æ—©ä¼š: ç”¨æˆ·ç•™å­˜/ç ”å‘æ’æœŸ, ç ”å‘è´¨é‡, æŠ€æœ¯ä¸“é¡¹
# projects

## proj-coding-ai

- developç¯å¢ƒï¼š
  - paas url: https://develop.clackypaas.com
  - agent: https://develop.agent.clackyai.com/demo
  - backend: https://develop.api.clackyai.com
  - app: https://develop.app.clackyai.com
  - website: https://develop.clackyai.com
- staging:
  - paas url: https://staging.clackypaas.com
  - agent: https://staging.agent.clackyai.com/demo
  - backend: https://staging.api.clackyai.com
  - app: https://staging.app.clackyai.com
  - website: https://staging.clackyai.com

- ä»£ç ä¿®æ”¹æˆ–å˜æ›´çš„åœºæ™¯, ğŸ‘€ ä¸èƒ½ä»¥webç³»ç»Ÿçš„æ•°æ®ä½œä¸ºä»£ç æ•°æ®æºï¼Œå› ä¸ºå¤–éƒ¨gitç³»ç»Ÿã€sshã€ç›´æ¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œå‘½ä»¤ ä¹Ÿä¼šä¿®æ”¹æ–‡ä»¶å†…å®¹
  - clacky-webappæ“ä½œä»£ç ä»“åº“æ—¶åªä¼šè®°å½•å½“å‰ç³»ç»Ÿçš„op
  - vscode-sshè¿æ¥ä»£ç ä»“åº“ï¼Œæ“ä½œopæœªè®°å½•
  - git clone + push ç›´æ¥é€šè¿‡gitåè®®æ“ä½œä»£ç ä»“åº“ï¼Œæ“ä½œopæœªè®°å½•
- åœ¨code reviewæˆ–æäº¤prçš„åœºæ™¯ï¼Œ ç»å¸¸éœ€è¦git pull/rebaseè¿œç¨‹ä»£ç 
  - æ­¤æ—¶è¿œç¨‹ä¿®æ”¹ä»£ç çš„opåœ¨æœ¬åœ°æ— æ³•è·å–
  - ğŸ¤” å˜æ›´æ–‡ä»¶åˆ—è¡¨å¿…é¡»ä»¥gitä»“åº“æ•°æ®ä¸ºå”¯ä¸€æ•°æ®æºï¼Œä¸šåŠ¡å‰ç«¯å˜æˆgitçš„webå®¢æˆ·ç«¯ï¼Ÿ

- agentåˆå§‹åŒ–å¤±è´¥æ—¶ï¼Œä¸å½±å“é¡µé¢ä¸Šå…¶ä»–ä¸šåŠ¡çš„æ­£å¸¸ä½¿ç”¨

- åç«¯å°è£…apiçš„åŸå› 
  - å‡å°‘å‰ç«¯çš„éœ€è¦ä¼ é€’çš„å‚æ•°
  - å‡å°‘å‰ç«¯çš„è¯·æ±‚æ•°é‡
  - disableå…¶ä»–ç³»ç»Ÿçš„é‰´æƒ

- ç³»ç»Ÿæ…¢çš„åŸå› 
  - clerkè®¤è¯çš„tokenæ˜¯å…¶ä»–apiçš„å‰ç½®è¯·æ±‚
  - paas è·å–ide-server urlçš„apiä¹Ÿæ…¢
  - ~~paasæ—§çŠ¶æ€å¯¼è‡´æ¸²æŸ“å¼‚å¸¸~~

- 
- 

- resources
  - https://staging.agent.clacky.ai/demo

### draft

- ä¸æ”¯æŒè‡ªåŠ¨é‡å‘½å

- ç«¯ä¾§å¤§æ¨¡å‹è¾…åŠ©codingï¼Œå¦‚æµè§ˆå™¨å†…ç½®çš„ai-api

- docker in docker çš„æƒé™é—®é¢˜

- sdkæœ‰äº›æ–‡ä»¶ä»£ç æœ‰3000è¡Œï¼Œæ‰“å¼€æœ‰ç‚¹æ…¢ï¼Œä½†èƒ½å¿å—

### dev-log

- root-threadé¡¹ç›®åˆå§‹åŒ–æ—¶ï¼Œcdeç¯å¢ƒä¼šç”Ÿæˆ.1024start/.1024nixæ–‡ä»¶
  - ç¬¬2ä¸ªthreadåˆ›å»ºæ—¶ï¼Œè‹¥git fetchå¤±è´¥åˆ™fetchä¸‹æ¥çš„ä»£ç å°±æ²¡æœ‰.1024nixæ–‡ä»¶ï¼Œç¬¬2ä¸ªthreadçš„terminalå°±æ— æ³•ä½¿ç”¨

- åº•éƒ¨é¢æ¿çš„æ—¶å…‰æœºæ˜¾ç¤ºéšè—åŠ¨ç”»
  - æ€è·¯1: ä½¿ç”¨css transitionä¿®æ”¹transform
    - è‹¥éšè—å‰åä½¿ç”¨2ä¸ªé¢æ¿ç»„ä»¶ï¼Œåˆ™éœ€è¦åœ¨åŠ¨ç”»ç»“æŸåæ‰‹åŠ¨ç§»é™¤dom
  - æ€è·¯2: heightå…ˆå‡ä¸º0å†åŠ ä¸ºæ–°å†…å®¹é«˜åº¦
    - å¯ä»¥åªç”¨1ä¸ªé¢æ¿ç»„ä»¶ï¼Œä½†æ•ˆæœå¯èƒ½ä¸ç¬¦è®¾è®¡ç¨¿
  - å‡å°‘layoutè®¡ç®—ï¼Œé¢æ¿ä¸Šæ–¹éƒ¨åˆ†å…ƒç´ å°½å¯èƒ½å‡å°‘é‡ç»˜
  - åŠ¨ç”»è¦è€ƒè™‘è¿›å…¥åœºæ™¯å’Œé€€å‡ºåœºæ™¯

### dev-summary

- åŒ…ç®¡ç†ä½¿ç”¨aptè€Œä¸æ˜¯nixçš„åŸå› 
  - nixå®‰è£…çš„åŒ…åœ¨bashæ— æ³•æ£€æµ‹åˆ°æ‰§è¡Œå…¥å£

- bcachefsæ¢å›btrfsï¼Œå› ä¸ºforkä¸ç¨³å®š

- ä¸€å°å®¿ä¸»æœºä¸Šåˆ›å»ºå¤šä¸ªdockerå®¹å™¨ï¼Œå®æµ‹éš”ç¦»æ€§ä¸å¥½
  - é‡‡ç”¨vmçš„æ–¹æ¡ˆéš”ç¦»å¾—æ›´å½»åº•

- 
- 
- 

### codebase-collab ğŸ”€

- aiå·¥ä½œæ—¶
- å¯¹äºæ–°å»ºæ–‡ä»¶çš„actionç±»å‹
  - aiå…ˆæ‰“å¼€ç©ºç™½æ–‡ä»¶ï¼Œsdkå‰ç«¯å‘é€syncOTUpdatesï¼Œversion-0
    - æ”¶åˆ°å“åº”latestRevision-0
  - aiæ”¹å®Œå
    - sdkå‰ç«¯æ”¶åˆ°pullOTUpdatesï¼ŒlatestRevision-1ï¼Œ
      - updates[0].changes[0]åŒ…å«aiçš„ä¿®æ”¹ï¼Œå³æ–°æ–‡ä»¶å…¨éƒ¨å†…å®¹
      - updates.agentUserId ä¸º clacky
- å¯¹äºä¿®æ”¹æ–‡ä»¶çš„actionç±»å‹
  - aiå…ˆæ‰“å¼€å·²å­˜åœ¨çš„æ–‡ä»¶ï¼Œsdkå‰ç«¯å‘é€syncOTUpdatesï¼Œversion-0 ğŸ§
    - æ”¶åˆ°å“åº”latestRevision-0
  - aiæ”¹å®Œå
    - sdkå‰ç«¯æ”¶åˆ°pullOTUpdatesï¼ŒlatestRevision-1ï¼Œ
      - updates[0].changes[0]åŒ…å«aiçš„ä¿®æ”¹ï¼Œå³æ–°æ–‡ä»¶å…¨éƒ¨å†…å®¹ï¼ŒåŒ…å«ä¸
      - updates.agentUserId ä¸º clacky

- aiç¼–è¾‘æ–‡ä»¶æ¯”å¤šäººååŒçš„åœºæ™¯æ›´å¤æ‚çš„åŸå› ï¼Œaiä¼šå‘é€å¾ˆå¤šäº‹ä»¶å¯¼è‡´ç¼–è¾‘å™¨å¤šæ¬¡æ¸²æŸ“

- aiæ‰§è¡Œactionæ—¶å‰ç«¯æ”¶åˆ°çš„äº‹ä»¶é¡ºåºï¼Œåœºæ™¯1ï¼Œå¤§å¤šæ•°æ‰§è¡Œæµç¨‹æ˜¯è¿™ç§
  - onTaskUpdated wip
  - file-æ‰“å¼€
  - pullOTUpdates
  - onTaskUpdated completed
  - ~~file-æ›´æ–°å†…å®¹çŠ¶æ€~~
- aiæ‰§è¡Œactionæ—¶å‰ç«¯æ”¶åˆ°çš„äº‹ä»¶é¡ºåºï¼Œåœºæ™¯2ï¼Œè¿™ç§æµç¨‹ä¹Ÿè¾ƒå¤š
  - onTaskUpdated wip
  - file-æ‰“å¼€
  - pullOTUpdates
  - ~~file-æ›´æ–°å†…å®¹çŠ¶æ€~~
  - onTaskUpdated completed
- aiæ‰§è¡Œactionæ—¶å‰ç«¯æ”¶åˆ°çš„äº‹ä»¶é¡ºåºï¼Œåœºæ™¯3ï¼Œå¾ˆå°‘
  - onTaskUpdated wip
  - file-æ‰“å¼€
  - onTaskUpdated completed
  - pullOTUpdates
  - ~~file-æ›´æ–°å†…å®¹çŠ¶æ€~~
- aiæ‰§è¡Œactionæ—¶å‰ç«¯æ”¶åˆ°çš„äº‹ä»¶é¡ºåºï¼Œåœºæ™¯4ï¼Œå¾ˆå°‘
  - onTaskUpdated wip
  - file-æ‰“å¼€
  - ~~pullOTUpdates~~, ç¼ºå°‘äº†æ­¤äº‹ä»¶
  - onTaskUpdated completed
  - ~~file-æ›´æ–°å†…å®¹çŠ¶æ€~~

```JS
[
  "pullOTUpdates",
  {
    "updates": [{
      "changes": [
        2,
        [
          0,
          "z"
        ],
        250
      ],
      "selection": {
        "ranges": [{
          "anchor": 3,
          "head": 3
        }],
        "main": 0
      },
      "agentUserId": "a9db200d-f439-4687-94c3-d905890baaae"
    }],
    "lastRevision": 51,
    "latestRevision": 52,
    "path": "README.md",
    "id": "c555f900-cb62-4e1b-9f2f-dac9dcbbed29",
    "mapSelection": {
      "a9db200d-f439-4687-94c3-d905890baaae": {
        "ranges": [{
          "anchor": 3,
          "head": 3
        }],
        "main": 0
      },
      "1f381fbe-d91e-46b5-ba5d-66511ebdb681": {
        "ranges": [{
          "anchor": 249,
          "head": 249
        }],
        "main": 0
      }
    }
  }
]
```

### âœ¨ feat-ai-writing-with-diff

- æ‰“å­—åŠ¨ç”»çš„é—®é¢˜ä¸ä¼˜åŒ–æ–¹æ¡ˆ
- æ¯è¡Œæ‰“å­—æ•ˆæœæ˜¯ä»ä¸‹å‘ä¸Šçš„ï¼Œä½“éªŒä¸å¥½
  - è°ƒæ•´æ‰“å­—åŠ¨ç”»çš„å®ç°
- å¯¹äºæŸäº›ç±»å‹çš„actionå¦‚æ–°å¢æ–‡ä»¶ï¼Œè·Ÿéšæœ‰æ˜æ˜¾å»¶è¿Ÿ
  - æ–°å¢æ–‡ä»¶æ—¶ï¼Œå¸Œæœ›aièƒ½å°½å¿«æ‰“å¼€æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å†™å®Œå†æ‰“å¼€

- å…¶ä»–ä¼˜åŒ–
  - ç¼“å­˜diffè§†å›¾çš„å¿«ç…§æ•°æ®ï¼Œä¸éœ€è¦æ¯æ¬¡å‘èµ·çœŸå®è¯·æ±‚
  - æ‰“å¼€å…³é—­diffè§†å›¾ä¸éœ€è¦åˆ·æ–°æ–‡ä»¶

- 
- 
- 

- æ—¶å…‰æœº
  - ~~å¼€å¯å…³é—­diffè§†å›¾, é…ç½®åœ¨ä¸šåŠ¡å±‚~~
  - ~~åˆ‡æ¢diffè§†å›¾çš„å¸ƒå±€, ä¸Šä¸‹ã€å·¦å³ï¼Œé…ç½®åœ¨ä¸šåŠ¡å±‚~~
  - ~~æ‰§è¡Œè®¡åˆ’æ—¶è®¡ç®—diff-opï¼Œopçš„å†…å®¹å’Œæ—¶æœº~~
  - ~~å›æ”¾~~æ¨¡å¼è·å–diff-op
  - ~~å›æ”¾~~æ¨¡å¼æ”¯æŒç¼–è¾‘ï¼Œå†…å®¹å’Œå…‰æ ‡é€‰åŒºçš„å˜åŒ–
  - changed-files-list

- ai-codingçš„åŠ¨ç”»ç¼–ç æ•ˆæœçš„æŠ€æœ¯æ–¹æ¡ˆ
  - ä¸èƒ½ä½¿ç”¨çº¯csså®ç°æ‰“å­—æ•ˆæœï¼Œcsséš¾ä»¥æ§åˆ¶æš‚åœç»§ç»­ï¼Œ
    - ä½†ç¬¦åˆaiæŒ‰è¡Œå†™ä»£ç çš„ä¸»æµå®ç°æ–¹å¼, ä¸”aiæ‰“å­—ä¸€èˆ¬ä»å·¦åˆ°å³åªæ‰“ä¸€é
  - æ€è·¯1: ä¿®æ”¹unifiedMergeViewçš„æºç ï¼Œé»˜è®¤åªæ¸²æŸ“çº¢è‰²æ—§ä»£ç ï¼Œæ–°ä»£ç å…ˆé€šè¿‡decorationéšè—å†é€šè¿‡é€ä¸ªæ’å…¥å­—ç¬¦å®ç°
  - æ€è·¯2: é€ä¸ªæ’å…¥è¡Œ, æ’å…¥è¡Œå¯ä»¥ä½¿ç”¨ line-decoration
  - æ€è·¯3: ç»¿è‰²éƒ¨åˆ†æ¯ä¸€è¡Œé»˜è®¤æŠ˜å ï¼Œç„¶åä¾æ¬¡å±•å¼€
  - å…¶ä»–æ€è·¯
    - å…ˆé€šè¿‡ç±»ä¼¼code-foldéšè—ä»£ç ï¼Œå½“éœ€è¦æ˜¾ç¤ºæ—¶ï¼Œæ¸²æŸ“æ‰“å­—æœºæ•ˆæœçš„æ–‡æœ¬
    - ~~ä¸æ–­ä¼ å…¥newDocï¼Œä¸æ–­è®¡ç®—diff~~
  - å‚è€ƒæ¡ˆä¾‹
    - folded-codeä¹Ÿæ˜¯éšè—ä»£ç çš„ä¸€ç§æ€è·¯
    - æ§åˆ¶è¿›åº¦éœ€è¦è‡ªåŠ¨ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªchangedLine
- diffè§†å›¾å¼€å¯å…³é—­åŠ¨ç”»çš„é…ç½®æ”¾åœ¨ä¸šåŠ¡å±‚è¿˜æ˜¯state-field
  - åŠ¨ç”»æ‰§è¡Œçš„è¿›åº¦å¯ä»¥æ”¾åœ¨state-field, å› ä¸ºä¼šéšç€editorStateçš„æ›´æ–°è€Œæ›´æ–°

- preOpenFile
  - æ£€æŸ¥å‚æ•° diffMode, originalContentï¼ŒnewContentï¼Œtitle

- æŠ€æœ¯å®ç°ç¡®è®¤0731
- å¦‚ä½•è·å–agentè¿”å›çš„ä¿®æ”¹åçš„ä»£ç å¹¶å¼€å§‹ç¼–è¾‘
  - ~~agentåˆ‡æ¢å¹¶æ‰“å¼€æ–‡ä»¶æ—¶ï¼Œpaasæ£€æŸ¥isAgentWritingï¼Œç„¶åè®¡ç®—diff-op~~
  - ~~ç„¶åé€šè¿‡**ç±»ä¼¼**å°è£…replayCodeByRangeçš„modifyCodeæ–¹æ³•ï¼Œä»¥æ‰“å­—æœºçš„æ•ˆæœæ¸²æŸ“diffï¼Œæ”¯æŒä¸€æ¬¡æ€§å°†aiçš„ä¿®æ”¹å…¨æ’¤é”€~~
  - actionè¿›åº¦æ¡å¤„äºæ¿€æ´»æ—¶ï¼Œä¸”ç”¨æˆ·æ‰“å¼€äº†è¿™ä¸ªæ–‡ä»¶
- agentæ‰§è¡Œè®¡åˆ’æ—¶ï¼Œæš‚åœæ’­æ”¾åï¼Œåœæ­¢åœ¨å“ªä¸ªå­—ç¬¦
  - æš‚åœä¹Ÿæ˜¯å†™å…¨æ–‡
- ç­‰å¾…aiè¿”å›æˆ–è®¡ç®—diffå¾ˆæ…¢æ—¶ï¼Œéœ€è¦loading
  - æç¤ºç”¨æˆ·ï¼Œé™åˆ¶å¤§å°
- æ”¯æŒæ‰“å¼€å·²åˆ é™¤çš„æ–‡ä»¶ï¼Œæ˜¾ç¤ºdiff
  - originalContent
- å¦‚ä½•åˆ¤æ–­opæ˜¯æ¥è‡ªaiè¿˜æ˜¯çœŸå®ç”¨æˆ·ï¼ŒagentUserId
  - ç”±ä¸šåŠ¡æ–¹åˆ¤æ–­ï¼Œpaasä¸å…³å¿ƒagent
- ä½•æ—¶ä»¥åŠå¦‚ä½•è·å–2ä¸ªå¸§ä¹‹é—´çš„æ‰€æœ‰op, éœ€è¦æµ‹è¯•è‡ªå®šä¹‰å¸§
- æ’å…¥è‡ªå®šä¹‰å¸§çš„æ—¶æœºæ˜¯æ‰§è¡Œè®¡åˆ’æˆ–è¿½åŠ æ­¥éª¤å¼€å§‹å‰ï¼Œå­˜å‚¨åå‡ ä¸ªæ–‡ä»¶å¿«ç…§çš„æ•°æ®é‡å¯èƒ½å¾ˆå¤§ï¼Œç¡®å®šè¦å­˜å—
  - agentå†™ä»£ç æ—¶ä¸€ä¸ªactionä¸€ä¸ªè‡ªå®šä¹‰å¸§ï¼Œæ•°æ®é‡ä¸å¤§
  - å¿«ç…§æ•°æ®æ˜¯å¦ä¿å­˜åœ¨historyBaseDataæ›´åˆç†

- agentæ‰§è¡Œæ—¶ï¼ŒåŠ¨æ€è®¡ç®—agentè¿”å›å†…å®¹å¯¹åº”çš„opï¼Œæ¸²æŸ“diff
  - å›æ”¾æ—¶ï¼Œç›´æ¥ä»ideServerè·å–opï¼Œæ¸²æŸ“diff

- ç”±AIè´Ÿè´£æ’å…¥æ•°æ®å¸§(è€ƒè™‘æ’å…¥å¿«ç…§å†…å®¹), å¦‚æœæœ‰æ–°çš„action, ä¹Ÿæ˜¯æ­£å¸¸æ’å…¥å¸§
  - è‡ªå®šä¹‰äº‹ä»¶å¸§å¯é€šè¿‡è‡ªå®šä¹‰eventNameæ·»åŠ 

- å¿«ç…§æ–‡ä»¶ä»€ä¹ˆæ—¶å€™æ˜¾ç¤º
  - åªæœ‰è¿½åŠ æ­¥éª¤ä¿®æ”¹åŒä¸€æ–‡ä»¶æ‰æ˜¾ç¤ºåªè¯»çš„å¿«ç…§æ–‡ä»¶ï¼Œå¦åˆ™æ˜¾ç¤ºå¯ç¼–è¾‘çš„diffè§†å›¾

- aiå˜æ›´æ–‡ä»¶åˆ—è¡¨ ä¸æ˜¾ç¤ºéè®¡åˆ’å†…çš„æ–‡ä»¶æ›´æ”¹

- 
- 
- 
- 

- åŸºäºindexeddbå­˜å‚¨ç¼–è¾‘opçš„é—®é¢˜
  - éœ€è¦å®ç°åŒæ­¥åˆ°å…¶ä»–åä½œè€…
  - åŒæ­¥ç¼–è¾‘opï¼Œè®¡ç®—planæ—¶é—´æ®µæ–‡ä»¶çš„å…¨éƒ¨æ”¹åŠ¨
  - æ–°å¢åˆ é™¤æ–‡ä»¶çš„op
  - åŒæ­¥è¿›åº¦

- indexeddbçš„å­˜å‚¨é€»è¾‘æ”¾åœ¨ä¸šåŠ¡å±‚è¿˜æ˜¯paaså±‚
  - ä¸šåŠ¡å±‚-pros
    - å¯ç»•è¿‡paasç›´æ¥ä¸agenté€šä¿¡, agent > web > idb
  - ä¸šåŠ¡å±‚-cons
    - ä¸šåŠ¡ä»£ç çš„å¤æ‚åº¦ä¼šå˜é«˜
  - paaså±‚-pros
    - ä¸agenté€šä¿¡çš„é€»è¾‘ä¼šå˜å¤æ‚ï¼Œä¸šåŠ¡è§¦å‘actionï¼Œæ¥ç€ agent > ideServer > paas > web
  - paaså±‚-cons
    - éƒ¨åˆ†é€šç”¨æ€§ä¸å¼ºçš„åŠŸèƒ½ä¸é€‚åˆæ”¾åœ¨paasï¼Œä¸é€‚åˆçš„å¦‚reviewè¯„è®ºï¼Œé€‚åˆçš„å¦‚å˜æ›´æ–‡ä»¶åˆ—è¡¨ã€diff

- å›æ”¾
  - æ˜¯å¦æ”¯æŒååŒå›æ”¾
  - å›æ”¾æ¨¡å¼ä»…å±•ç¤ºå·²å®Œæˆçš„actionï¼Œæœªå®Œæˆçš„ä¸å±•ç¤ºï¼Œè¿½åŠ æ­¥éª¤çš„actionä¼šå±•ç¤º
  - æ’¤é”€åçš„æ–‡ä»¶è¦æ”¯æŒå–æ¶ˆæ’¤å›
  - æ’¤é”€åçš„æ–‡ä»¶è¿›åº¦æ¡ä¸Šçš„actionä¼šå˜ç°ï¼Œå–æ¶ˆæ’¤å›ä¼šå˜ç»¿

- æ˜¯å¦è¦æ”¯æŒå†…éƒ¨cdeä»“åº“çš„åˆå¹¶
  - gitæœ‰å†²çª
  - crdtæ— å†²çª

- Editor
  - åˆ‡æ¢diffè§†å›¾çš„api

- æœ¬åœ°llmæ¶æ„

- 
- 
- 
- 

#### ä¸šåŠ¡æ•°æ®ç»“æ„è®¾è®¡

- ä¸šåŠ¡æ“ä½œ
  - æ’¤é”€æ–‡ä»¶
  - åˆ‡æ¢æ–‡ä»¶

- ååŒç¼–è¾‘çš„æ•°æ®ç»“æ„
  - ç›®å‰åŸºäºot
  - agentç¼–è¾‘ã€ç”¨æˆ·ç¼–è¾‘
  - ç”¨æˆ·ç¼–è¾‘è¡Œå·èŒƒå›´ã€agentç¼–è¾‘èŒƒå›´

- æ“ä½œop
  - æ‰€å±æ–‡æ¡£idï¼Œæ‰§è¡Œæ—¶é—´
  - ğŸ¤” æ‰€å±æ­¥éª¤ï¼Œæ ¹æ®timeç¡®è®¤

- å˜æ›´æ–‡ä»¶åˆ—è¡¨
  - æ–‡ä»¶ç±»å‹ã€æ–‡ä»¶åã€æ–‡ä»¶è·¯å¾„ã€å˜æ›´ä»£ç è¡Œæ•°ã€æ“ä½œç±»å‹ã€æ“ä½œäººå¤´åƒå’Œç”¨æˆ·å

- paasç°æœ‰æŒä¹…åŒ–æ•°æ®ç»“æ„(mongodbçš„è¡¨)

```JS
// mongodbçš„historycrdtsè¡¨å­˜å‚¨ç¼–è¾‘å™¨ã€æ–‡ä»¶æ ‘çš„æ“ä½œæ•°æ®
[
  // custom event/frame
  {
    "_id": {
      "$oid": "66a9bdf2cc8eccde2db14a2e"
    },
    "data": {
      "action": "beforeSteps",
      "value": "steps1416",
      "uuid": "1722400242698"
    },
    "eventName": "customize",
    "playgroundId": "690273537138839552",
    "__v": 0,
    "agentUserId": "9cc647d3-e2f1-4dde-ae3b-8b97680b1ee7",
    "dockerId": "690273537168199680",
    "timestamp": 1722400242699
  },

  // delete file
  {
    "_id": {
      "$oid": "66ba003949c463e87f872df0"
    },
    "timestamp": 1723465785685,
    "playgroundId": "694744266697789440",
    "dockerId": "694744266731343872",
    "eventName": "fileTree",
    "agentUserId": "2d7317e4-ec19-4f27-b7bd-ba92b9750af4",
    "data": {
      "action": "DELETE",
      "files": [{
        "type": "FILE",
        "name": "hello.go"
      }],
      "fileRootId": "@dfbbaecc-27a0-4545-a986-c259e4a6ede0",
      "result": true
    },
    "__v": 0
  },

  // fileTree
  {
    "_id": {
      "$oid": "66a38107fabfd7026f68dfd8"
    },
    "timestamp": 1721991431081,
    "playgroundId": "688546823149174784",
    "dockerId": "688546823174340608",
    "eventName": "fileTree",
    "agentUserId": "ide",
    "data": {
      "action": "REFRESH",
      "fileRootPath": "/Users/yaoo/Documents/repos/com2024-showmebug/clacky-ai-paas-frontend/packages/server/apps/entry/test/filetree_mock",
      "url": "becbf0df199be859138c5a5d6778d595-app.develop.clackypaas.com",
      "payload": {
        "path": ".",
        "name": ".",
        "type": "DIRECTORY",
        "children": [{
            "type": "FILE",
            "name": "hello.c",
            "path": "hello.c",
            "children": [],
            "hide": false,
            "lock": false,
            "unittest": false,
            "isRetainedFile": false
          },
          {
            "type": "FILE",
            "name": "hello.go",
            "path": "hello.go",
            "children": [],
            "hide": false,
            "lock": false,
            "unittest": false,
            "isRetainedFile": false
          },
          {
            "type": "FILE",
            "name": "hello.rb",
            "path": "hello.rb",
            "children": [],
            "hide": false,
            "lock": false,
            "unittest": false,
            "isRetainedFile": false
          },
          {
            "type": "FILE",
            "name": "index.html",
            "path": "index.html",
            "children": [],
            "hide": false,
            "lock": false,
            "unittest": false,
            "isRetainedFile": false
          },
          {
            "type": "FILE",
            "name": "index.js",
            "path": "index.js",
            "children": [],
            "hide": false,
            "lock": false,
            "unittest": false,
            "isRetainedFile": false
          },
          {
            "type": "DIRECTORY",
            "name": "root",
            "path": "root",
            "children": [{
              "type": "FILE",
              "name": "1.txt",
              "path": "root/1.txt",
              "children": [],
              "hide": false,
              "lock": false,
              "unittest": false,
              "isRetainedFile": false
            }],
            "hide": false,
            "lock": false,
            "unittest": false,
            "isRetainedFile": false
          }
        ]
      }
    },
    "__v": 0
  },

  // editor
  {
    "_id": {
      "$oid": "66a3840ffabfd7026f68dffa"
    },
    "timestamp": 1721992207807,
    "playgroundId": "688546823149174784",
    "dockerId": "688546823174340608",
    "eventName": "editor",
    "agentUserId": "9cc647d3-e2f1-4dde-ae3b-8b97680b1ee7",
    "data": {
      "openedPath": "index.html"
    },
    "__v": 0
  }

  // editor-
  {
    "_id": {
      "$oid": "66a38413fabfd7026f68e005"
    },
    "timestamp": 1721992211304,
    "playgroundId": "688546823149174784",
    "dockerId": "688546823174340608",
    "eventName": "editor",
    "agentUserId": "9cc647d3-e2f1-4dde-ae3b-8b97680b1ee7",
    "data": {
      "revision": 3,
      "openedPath": "index.html",
      "updates": [{
        "changes": [
          280
        ],
        "selection": {
          "ranges": [{
            "anchor": 109,
            "head": 109
          }],
          "main": 0
        },
        "agentUserId": "9cc647d3-e2f1-4dde-ae3b-8b97680b1ee7"
      }]
    },
    "uuid": "0340dc0b-ec3d-4294-b3d4-a1d407264621",
    "__v": 0
  }

  // focusChange
  {
    "_id": {
      "$oid": "66a38411fabfd7026f68e002"
    },
    "timestamp": 1721992209938,
    "playgroundId": "688546823149174784",
    "dockerId": "688546823174340608",
    "eventName": "focusChange",
    "agentUserId": "9cc647d3-e2f1-4dde-ae3b-8b97680b1ee7",
    "data": {
      // "componentName": "Editor"
      "componentName": "Tree"
    },
    "__v": 0
  }

]
```

### âœ¨ feat-æ—¶å…‰æœºçš„ä»»åŠ¡æ‰§è¡Œ

- ğŸ¤” æ—¶å…‰æœºæ‰“å­—åŠ¨ç”»çš„æ—¶æœºä¸é‡‡ç”¨pullOTUpdatesäº‹ä»¶çš„åŸå› 
  - pullOTUpdatesäº‹ä»¶è™½ç„¶åŒ…å«äº†ç”¨æˆ·idï¼Œä½†aiè¿›è¡Œå…¶ä»–æ“ä½œæ—¶é¡ºä¾¿ä¿®æ”¹æ–‡ä»¶æ­¤æ—¶ä¹Ÿä¼šæ‰“å¼€diffè§†å›¾ï¼Œè€Œä¸šåŠ¡ä¾§åªæƒ³è¦aiåœ¨actionå¯¹åº”çš„æ–‡ä»¶æ‰æ‰“å¼€æ‰“å­—åŠ¨ç”»(éè®¡åˆ’å†…çš„æ–‡ä»¶ä¸æ‰“å¼€æ‰“å­—åŠ¨ç”»)ï¼Œåœ¨ä¸šåŠ¡ä¾§éš¾ä»¥æ§åˆ¶å’Œå®šåˆ¶diffè§†å›¾çš„æ‰“å¼€æ—¶æœº
  - å¤šäººååŒæ—¶ï¼Œå…¶ä»–ç”¨æˆ·ç¼–è¾‘ä¼šå½±å“diff-viewçš„originalContentçš„å€¼ï¼Œæ²¡æœ‰ä½¿ç”¨ç¨³å®šå¯é çš„mongodbé‡Œçš„å¿«ç…§å€¼
  - otäº‹ä»¶çš„è§¦å‘é¢‘ç‡è¿‡é«˜ï¼Œè®¡ç®—diffè§†å›¾å½±å“æ€§èƒ½

- aiä¿®æ”¹æ–‡ä»¶çš„é€»è¾‘20241216
  - ğŸš© u<<all: taskUpdated, {'id': '2-1', 'title': 'Modify index.html to include progressbar.mjs script', 'action': <ActionType. MODIFY_FILE: 'modify_file'>, 'status': <ActionStatus. IN_PROGRESS_STATUS: 'in_progress'>, 'result': None
  - >>IDEserver: `file`, args=`{'path': 'index.html', 'timestamp': 1734337154, 'loadType': 'default', 'readOnly': False}`.
    - å¯èƒ½ä¼šæ‰“å¼€ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œå¯¹ä¸å­˜åœ¨çš„æ–‡ä»¶ä¸éœ€è¦æ‰“å¿«ç…§ï¼Œä½†å¿«ç…§ä¸ºç©ºå­—ç¬¦ä¸²æ—¶ä¸å½±å“
  - >>IDEserver: `appendCustomizeFrameData`, args=`{'action': 'snapshot_file', 'value': {'path': 'index.html', 'content': 
  - >>IDEserver: `queryCustomizeFrameData`, args=`{'action': 'snapshot_file', 'uuid': '41dba51a-42fa-4aa1-a501-bc7d81c93a61', 'value': {'path': 'index.html'}}`
  - >>IDEserver: `file`, args=`{'path': 'progressbar.mjs', 'timestamp': 1734337154, 'loadType': 'default', 'readOnly': True}`
    - ä¸ºä»€ä¹ˆä¼šè¯»å–éæœ¬actionçš„æ–‡ä»¶, readonly é™é»˜æ‰“å¼€ä¸å½±å“å‰ç«¯ï¼Œæ˜¯åœ¨è¯»references
  - >>IDEserver: `agentWriteFile`, args=`{'path': 'index.html', 'content': 
  - >>IDEserver: `file`, args=`{'path': 'index.html', 'timestamp': 1734337158, 'loadType': 'default', 'readOnly': False}`
  - ğŸš© u<<all: taskUpdated, {'id': '2-1', 'title': 'Modify index.html to include progressbar.mjs script', 'action': <ActionType. MODIFY_FILE: 'modify_file'>, 'status': <ActionStatus. COMPLETED_STATUS: 'completed'>, 
    - ä¸ºä»€ä¹ˆæœ‰æ—¶actionçš„taskUpdatedäº‹ä»¶æ²¡äº†ï¼Œè¿˜æ˜¯åœ¨å¾ˆåé¢?
  - ç­‰2s
  - u<<all: taskStateUpdated, done

- æ—¶å…‰æœºçš„uiè§†è§‰åªé™åˆ¶åœ¨åº•éƒ¨é¢æ¿ï¼Œä½†æœ‰äº›é€»è¾‘ä¸èƒ½åªå†™åœ¨åº•éƒ¨é¢æ¿ç»„ä»¶ä¸­
  - è‡ªåŠ¨æ‰“å¼€éšè—åº•éƒ¨æ—¶å…‰æœºé¢æ¿çš„é€»è¾‘å¿…é¡»å†™åœ¨ç»„ä»¶ä¹‹å¤–ï¼Œå¦åˆ™ç»„ä»¶æœªrenderæ‰§è¡Œå°±ä¸ä¼šè‡ªåŠ¨æ‰“å¼€éšè—
  - æ—¶å…‰æœºä¸ä¾§è¾¹æ å…±äº«è”åŠ¨çš„çŠ¶æ€ä¹Ÿå¿…é¡»å†™åœ¨ç»„ä»¶ä¹‹å¤–
  - ğŸ§ æ—¶å…‰æœºç›¸å…³çš„uiæ“ä½œåªå±€é™åœ¨è¿›åº¦æ¡ï¼Œæ‰“å¼€æ–‡ä»¶éœ€è¦é¢å¤–å¤„ç†

- å¼•å…¥task-engineçš„å¥½å¤„
  - å¯ç»†ç²’åº¦æ§åˆ¶æ‰“å­—åŠ¨ç”»çš„æš‚åœå’Œactionæ‰§è¡Œçš„æ—¶åº
  - å¯å•ç‹¬æ§åˆ¶å›æ”¾çš„é•¿åº¦ï¼Œä¸å¿…å›æ”¾å…¨éƒ¨action

- liveæ¨¡å¼ä¸‹actionçš„æš‚åœä¸æ¢å¤
  - å®Œå…¨ç”±agentæ§åˆ¶ï¼Œagentåœ¨æœªæ‰§è¡Œå®Œactionæ—¶ç‚¹æš‚åœä¼šå°†å½“å‰actionè§†ä¸ºæœªæ‰§è¡Œ
  - æ‰“å­—åŠ¨ç”»åœ¨æš‚åœæ—¶ä¼šç«‹å³æ‰“å®Œï¼Œå½“å‰actionè§†ä¸ºå·²æ‰§è¡Œ
  - taskçŠ¶æ€å˜åŒ– inited > planning > working > pausing > working > done/canceled/appended 
  - actionçŠ¶æ€å˜åŒ– inited > in_progress > completed/abandoned/canceled

- playbackæ¨¡å¼ä¸‹actionçš„æš‚åœä¸æ¢å¤
  - å®Œå…¨ç”±ä¸šåŠ¡å‰ç«¯æ§åˆ¶, åœ¨æœªæ‰§è¡Œå®Œactionæ—¶ç‚¹æš‚åœä¼šç«‹å³å°†è¯¥actionæ‰§è¡Œå®Œä¸”æš‚åœ
  - æ‰“å­—åŠ¨ç”»åœ¨æš‚åœæ—¶ä¼šç«‹å³æ‰“å®Œï¼Œå½“å‰actionè§†ä¸ºå·²æ‰§è¡Œ
  - taskçŠ¶æ€å˜åŒ– waitingActionsä¸ºç©ºæ—¶å›æ”¾å®Œæˆ
  - actionçŠ¶æ€å˜åŒ– running > playedï¼ŒæŒ‰é¡ºåºæ‰§è¡Œ
  - å›æ”¾æ—¶ç‚¹å‡»actionä¼šç«‹å³æš‚åœåˆ°ç‚¹å‡»çš„actionï¼Œç„¶åæ›´æ–°waitingActionsï¼Œä¸èƒ½æ¸…ç©ºå¦åˆ™ä¸¢å¤±pauseçŠ¶æ€
  - æš‚åœåç‚¹æ’­æ”¾ä¼šä»ä¸‹ä¸€ä¸ªactionå¼€å§‹æ’­æ”¾

### âœ¨ feat-cmdk

- improve
  - migrate to StateField
  - cmdk-undoæœ‰æ—¶éœ€è¦undoä¸¤æ¬¡çš„é€»è¾‘å¯ä»¥é€šè¿‡ä¼ å…¥å‚æ•°å®šåˆ¶ `history({joinToEvent: tr=>boolean})` æ¥å®ç°

- ğŸš§ å¼€å‘å®ç°è®°å½•
  - rejectåundoçš„æµç¨‹é€šè¿‡ isCmdkDiffRejected çš„ 1/0/-1 ä¸‰ç§çŠ¶æ€æ§åˆ¶ï¼Œç”±äºåœºæ™¯çš„ç‰¹æ®Šæ€§ï¼Œ1/0ä¸è¡¨ç¤ºtrue/falseï¼Œè€Œæ˜¯before/after
  - åœ¨undoæ—¶è¾“å…¥æ¡†æ¢å¤æ­£ç¡®ä½ç½®å¯é€šè¿‡ tr.startState.field() æ‰¾åˆ°æ—§å€¼ï¼Œè€Œä¸æ˜¯tr.state
  - å¿«æ·é”®ac/rjçš„é€»è¾‘ä¸ä¸€å®šè¦importå„ç§é€»è¾‘å’Œæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨å·²æœ‰çš„domäº‹ä»¶ï¼Œ acceptBtn.click() å¯ç›´æ¥è§¦å‘å·²æ³¨å†Œçš„äº‹ä»¶ï¼Œå¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šé€šè¿‡domå¯¹è±¡å‡å°‘å®ç°çš„å¤æ‚åº¦

- âœ¨ cmd+kï¼Œ ä¸»æµç¨‹æ˜¯ç”¨æˆ·è¾“å…¥éœ€æ±‚ï¼Œagentè¿”å›å»ºè®®çš„ä»£ç 
  - å¯¹äºä¸æ¸…æ™°çš„ç”¨æˆ·éœ€æ±‚ï¼Œcmd+kå¦‚ä½•å¤„ç†ï¼Œéœ€ä¸éœ€è¦æ¾„æ¸…, uiäº¤äº’æ˜¯å¦è¦è¡¥å……
  - agentå·¥ä½œç¼–è¾‘æ—¶æ˜¯å¦ç¦ç”¨cmd+kå¿«æ·é”®
  - ç”¨æˆ·ç‚¹å‡»ä¸‹é¢çš„éƒ¨åˆ†æ¥å—æ—¶ï¼Œä¸Šé¢æ˜¯å¦å‡ºç° accept selectedæ•°é‡ï¼Œç±»ä¼¼3/5
  - éƒ¨åˆ†acceptçš„æ¥å—æ‹’ç»ï¼Œå’Œdiffå·¥å…·æ¡åŒæ—¶å‡ºç°å—ï¼Ÿ
  - ç‚¹å‡»Stopåœæ­¢ç”Ÿæˆåï¼Œä»ä¿æŒdiffè§†å›¾ï¼Œæ˜¾ç¤ºæœªå†™å®Œçš„ä»£ç ï¼Œæ­¤æ—¶acceptæ˜¯å¦æ˜¾ç¤ºæ¶ˆè€—ç§¯åˆ†
  - éƒ¨åˆ†acceptåï¼Œcmd+zå›åˆ°åŸæ–‡ä»¶ä¸æœ€æ–°æ–‡ä»¶çš„diffï¼Œè¿˜æ˜¯å›åˆ°åŸæ–‡ä»¶ä¸agentè¿”å›çš„æ–‡ä»¶çš„diffè§†å›¾
  - addToChatå‘é€åˆ°é©¾é©¶èˆ±çš„æ¶ˆæ¯æ¥å£ï¼Œagentåšä»€ä¹ˆå“åº”
  - å¯¹è¯æ¡†æ¶ˆå¤±åå†æ˜¾ç¤ºéœ€è¦æ¢å¤promptå—
- cmd+k apiéœ€è¦æ”¯æŒ uRemakeFile, uStopRemakingFile, uRegenerateAlternative?
  - éœ€è¦å•ç‹¬å‘é€selectedContentå¯¹åº”çš„ä»£ç å­—ç¬¦ä¸²å—
  - accept/rejectåœ¨å‰ç«¯ç»™ç”¨æˆ·æ“ä½œ, ç”¨æˆ·rejectåagentéœ€è¦çŸ¥é“å—ï¼Œç›®å‰æ“ä½œçš„ç²’åº¦æ˜¯å…¨éƒ¨
    - ç”±å‰ç«¯æ¥å—æ‹’æ¥ä¸”agentä¸éœ€è¦çŸ¥é“ï¼Œ ä¿®æ”¹ç²’åº¦ä¸ºæ¯ä¸ªå˜æ›´å—suggestedBlock
  - è¿½åŠ ä¿®æ”¹éœ€è¦æ–°å¢å•ç‹¬çš„uFollowUpRemakeFileäº‹ä»¶å—ï¼Œè¿½åŠ çš„èŒƒå›´é»˜è®¤æ˜¯ä¸Šæ¬¡ä¿®æ”¹çš„èŒƒå›´
    - è¿½åŠ éœ€è¦è¿½åŠ çš„æç¤ºè¯
  - éœ€è¦æ–°å¢å•ç‹¬çš„uRegenerateAlternativeçš„äº‹ä»¶å—, å¯ä»¥ä¸€æ¬¡è¿”å›å¤šä¸ª
  - regenerateæ˜¯å¦éœ€è¦åˆ‡æ¢å›æ—§ç‰ˆä»£ç çš„ui 
    - æš‚æ—¶ä¸åšæ–°çš„uiäº¤äº’
  - sdkå’Œå‰ç«¯çš„é€šä¿¡æ–¹å¼ï¼Œå¼¹å‡ºæ¡†å¦‚ä½•è®©paaså’Œagenté€šä¿¡

- cmd+käº¤äº’ç»†èŠ‚
  - diffå†…å®¹æ»šåŠ¨åˆ°çª—å£ä¹‹å¤–æ—¶ï¼Œä¼šä½œä¸ºæ‚¬æµ®æ¡†å›ºå®šæ˜¾ç¤ºåœ¨é¡¶éƒ¨
  - æ‰“å­—åŠ¨ç”»çš„diffï¼Œä¸ä¼šæ»šåŠ¨é¡µé¢
  - followupä¸æ˜¯æŒ‰é’®ï¼Œè€Œæ˜¯è¾“å…¥æ¡†

- diffå·¥å…·æ¡æ˜¾ç¤ºçš„æ¡ä»¶æ—¶æœºå’Œä½ç½®
  - regenerate ä»€ä¹ˆ
  - edit
  - undo

## proj-idepaas-sdk

- resources
  - https://staging.1024paas.com/   (æµ‹è¯•æ•°æ®è¾ƒå¤šï¼Œapiè¾ƒç¨³å®š)
  - https://develop.1024paas.com/
  - https://www.1024paas.com/
  - https://app.apifox.com/project/3335675
  - [DaoPaaS API Options](https://www.1024paas.com/sdk/docs/index.html)
  - [1024PaaS-ç§Ÿæˆ·ä¸šåŠ¡æ¥å£](https://apifox.com/apidoc/shared-c0c0ebad-15b3-4605-896e-e39879fe6e47/doc-952073)
  - https://staging.showmebug.com/  (å¸å· 01test)
  - [ShowMeBugå­—èŠ‚çº§å›æ”¾åœ¨çº¿ç¬”é¢è¯•è¿‡ç¨‹å®ç°æ€è·¯ - æ˜é‡‘ _202107](https://juejin.cn/post/6985068859099201544)

- sdkè®¾è®¡å‚è€ƒ
  - vscode, theia, opensumi, replit, codesandbox
  - [Running the SDK](https://cloud9-sdk.readme.io/docs/running-the-sdk)

### not-yet

- 

- åˆå§‹åŒ–cdeæ—¶å¤„ç†å¹¶å‘åˆå§‹åŒ–çš„é—®é¢˜

- â“ snapshotæ•°æ®æ˜¯å¦‚ä½•å­˜å‚¨çš„
  - åˆ‡æ¢åˆ†æ”¯åçš„å›æ”¾è¿˜èƒ½æ‰§è¡Œå—

- å›æ”¾çš„ç¤ºä¾‹ï¼Œæš‚åœ/ç»§ç»­æ’­æ”¾çš„å›è°ƒäº‹ä»¶æœªç”Ÿæ•ˆ
- å›æ”¾çš„ç¤ºä¾‹ï¼Œåªæ‰“å°äº† onAvailable äº‹ä»¶
- å›æ”¾æ›´é€‚åˆçº¯å‰ç«¯å®ç°? 
  - çº¯å‰ç«¯çš„å›æ”¾ä¸æ”¯æŒååŒè°ƒè¯•ï¼Œæ‰€ä»¥éœ€è¦
- å›æ”¾è¦æ”¯æŒå…¶ä»–é¢æ¿: terminal/browser

- ä¸ºä»€ä¹ˆä¸éœ€è¦åˆ›å»ºå•ç‹¬çš„å›æ”¾ç¼–è¾‘å™¨
  - å›æ”¾æ—¶éœ€è¦åœ¨å¿«ç…§çš„åŸºç¡€ä¸Šæ”¯æŒç›´æ¥ç¼–è¾‘
- å›æ”¾åŠæ’­æ”¾æ§åˆ¶éœ€è¦å®ç°åœ¨æœåŠ¡ç«¯å—
  - ä¸ºäº†ååŒè°ƒè¯•ï¼Œéœ€è¦

- è·å–ticketçš„apiæœªæ·»åŠ æƒé™æ ¡éªŒï¼Œheaderä¸­æ²¡æœ‰token

- sdkçš„ä¸»è¦ç»„ä»¶Editor/FileTree/Browser/Shellçš„æ¸²æŸ“æ˜¯ç‹¬ç«‹çš„ `createRoot(dom).render(<Editor />)`; 

- editor
  - æ”¯æŒå¤šå®ä¾‹
  - è¡Œçº§ code-comment
  - aiåˆ‡æ¢æ–‡ä»¶æ—¶ï¼Œæ²¡æœ‰é”€æ¯ä¸­é—´å±‚CodeEditor

- â“ ä¸ºä»€ä¹ˆè¦å°†editorViewå¯¹è±¡æŒ‚åœ¨å…¨å±€stateçš„fileä¸‹
  - actions.file.editorView(view)
- å¦‚ä½•å¤ç”¨idepaas-sdkçš„ç¼–è¾‘å™¨ç»„ä»¶ï¼Œä¸€ç§æ€è·¯æ˜¯ä½¿ç”¨readonlyç‰ˆæœ¬

- fileTree
  - å¤§æ–‡ä»¶æ— æ³•æ‰“å¼€ï¼Œ å¦‚package-lock.json
  - æ–‡ä»¶æ ‘æœªå®ç°æ‡’åŠ è½½ï¼Œ ç‚¹å‡»æ—¶å†è¯·æ±‚æ–‡ä»¶å¤¹çš„æ•°æ®è€Œä¸æ˜¯ä¸€æ¬¡è¯·æ±‚æ•´æ£µæ ‘
  - éƒ¨åˆ†æ–‡ä»¶å†æ¬¡æ‰“å¼€å…‰æ ‡ä¼šè·³åˆ°æ–‡ä»¶å°¾
  - fileChangeLogsçš„å˜æ›´åˆ—è¡¨æ— æ³•åŒºåˆ«ä¿®æ”¹åˆ é™¤
  - æœç´¢æ’é™¤äº†node_modulesç›®å½•å—
- ideServeræ— æ³•æ£€æµ‹å¹¶å¹¿æ’­file-deleteäº‹ä»¶

- collab
  - åœ¨æœ‰ç”¨æˆ·ä¸Šä¸‹çº¿æ—¶ä¼šå…¨é‡å¹¿æ’­å½“å‰åä½œçš„æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼Œå­˜åœ¨æ•°æ®é‡å¤§ä¸”é¢‘æ¬¡é«˜çš„é—®é¢˜

- è·Ÿéšæ¨¡å¼ï¼Œå‡è®¾ç”¨æˆ·Aæ­£åœ¨è·Ÿéšç”¨æˆ·B
  - ç”¨æˆ·Aè‡ªå·±åˆ‡æ¢æ–‡ä»¶æ—¶ï¼Œå¤´åƒä»åœç•™åœ¨ç”¨æˆ·Bçš„æ–‡ä»¶

- 
- 

#### bugs-in-prod

- 
- 

#### bugs-in-prod-unstable

- consoleæœ‰æ—¶æ¸²æŸ“ç©ºç™½ï¼Œå¤§å¤šæ•°æ—¶å€™èƒ½æ­£å¸¸æ¸²æŸ“

- 
- 

### draft

- 
- 
- 
- 

- codemirror-themes

- æ‰€æœ‰æ•°æ®çš„é€šä¿¡éƒ½åŸºäºchannel(websocket)?
  - è·å–å›æ”¾æ•°æ®æ²¡å¿…è¦ç”¨websocketï¼Œå› ä¸ºå¯¹å®æ—¶æ€§è¦æ±‚ä¸é«˜

- LSPçš„serverè¿ç§»åˆ°workerçš„æ–¹æ¡ˆ

- ç»™å®šä»“åº“çš„urlï¼Œç±»ä¼¼ `/user/repo?task=desc`, å¯ä»¥è®¿é—®urlæŸ¥çœ‹aiåˆ›å»ºprçš„è¿‡ç¨‹

- paaså¹³å°ä¸ºä»€ä¹ˆéš¾ä»¥è½åœ°
  - åŠŸèƒ½åˆå¤šåˆæ‚
  - å¯ä»¥å»æ‰éæ ¸å¿ƒéœ€æ±‚

- codemirrorç›¸å…³çš„ä»£ç ä¸ºä»€ä¹ˆä¸é€šè¿‡npmåŒ…å¼•å…¥
  - ç›´æ¥ä¿®æ”¹githubä¸Šçš„æºç 
- daoPaasçš„åˆå§‹åŒ–é€»è¾‘åŒ…å«æ¸²æŸ“domå—? 
  - mapRenderæ¸²æŸ“åˆ°dom
- mapRender æœ‰ä»€ä¹ˆé—®é¢˜
  - æœªå®ç°æŒ‰éœ€åŠ è½½FileTree/Editor/Terminal

### roadmap

- features-to-dev
  - å¤šæ–‡ä»¶æ‰“å¼€
  - å¤šshell
  - å¼€å‘å¯åŠ¨æ”¯æŒå¤šport
  - è€ƒè™‘2å¥—agent: å‰ç«¯agent, åç«¯agentï¼Œå¯åˆ‡æ¢æ¥èŠ‚çœèµ„æºï¼Œç±»ä¼¼appleçš„3çº§llmæ¶æ„
  - æ”¯æŒç»Ÿä¸€æµè§ˆå™¨ä¸åŒæ ‡ç­¾é¡µæ‰“å¼€ä¸åŒide

- ç”¨ä¸€ä¸ªç¨‹åºç›‘å¬æ‰€æœ‰å®¢æˆ·ç«¯çš„æ–‡ä»¶å†™å…¥å¯¼è‡´çš„æ–‡ä»¶å˜åŒ–ï¼Œä¼šå¯¼è‡´ç›‘å¬ç»å¸¸å´©æºƒ

- embed

#### maybe

- 
- 

- branching
  - å„åˆ†æ”¯çš„ dev-server
  - å„åˆ†æ”¯çš„ historyã€time-travel

- 
- 

- è€ƒè™‘è½»ç¼–è¾‘ï¼Œé€šè¿‡devcontainerè¿æ¥è¿œç¨‹ä»“åº“æ¥è¿›è¡Œæœ¬åœ°ç¼–è¾‘

- 
- 
- 

- åä½œè¿ç§»åˆ°yjsçš„å®ç°

- å»æ‰rrweb

- d42paasçš„ demo playgrounds èƒ½å¦ç”¨ d42paas çš„sdkå®ç°
  - ç”¨è‡ªå·±çš„å¹³å°å¼€å‘ä»£ç 

- preview react/vue components

- æŒä¹…åŒ–ç”¨æˆ·å®‰è£…çš„åŒ…å¯ä»¥å¿«é€Ÿforkå’Œå¤ç”¨ï¼Œä¸€ä¸ªç”¨æˆ·å®‰è£…äº†ï¼Œå…¶ä»–ç”¨æˆ·å¯ç›´æ¥ç”¨

- 
- 
- 

### dev-xp

- `d42paas_frontend` é¡¹ç›®å¯åŠ¨è®°å½•
  - pnpmçš„ç‰ˆæœ¬å¿…é¡»æ˜¯v9ï¼Œä¸èƒ½æ˜¯v8
  - cp .env.local.example .env, å¯ä¸ä¿®æ”¹ä»»ä½•é…ç½®ï¼Œä½†ä¿®æ”¹é…ç½®ä¸­queueçš„åå­—å¯æ–¹ä¾¿è°ƒè¯•
  - cd packages/demo; pnpm dev
  - cd packages/server; pnpm dev
  - ä¿®æ”¹ packages/server/apps/entry/test/filetree_mock_test æœ«å°¾æ–‡ä»¶åä¸º filetree_mock
  - åœ¨ http://localhost:3010/ demoçš„ç”¨æˆ·åå’Œæ‰‹æœºå·å¯éšä¾¿å†™

- pros-paas ğŸŒ¹
  - åœ¨ä¸šåŠ¡ä¸­ä½¿ç”¨æ—¶ï¼Œå¯é€šè¿‡å•ç‹¬çš„playgroundIdåœ¨demoé¡µé¢è¿›è¡Œæµ‹è¯•ï¼Œéš”ç¦»æ€§è¾ƒå¥½ï¼Œä¸”ä¸å½±å“ä¸šåŠ¡
  - åç«¯ä¸šåŠ¡é€šè¿‡tenantCodeéš”ç¦»ï¼Œæ–¹ä¾¿æµ‹è¯•äººå‘˜ã€agentç»„ã€å…¶ä»–é¡¹ç›®ç»„å•ç‹¬æµ‹è¯•
  - ä»¥websocketä½œä¸ºä¸»è¦æ•°æ®é€šä¿¡æ–¹å¼

- âŒ›ï¸ å›æ”¾ç¤ºä¾‹(ç¯å¢ƒæ”¯æŒsdk-staging/sdk-localhost-3010/showmebug)
  - åœ¨sdk demoç•Œé¢ï¼Œéœ€è¦æŒ‡å®šä»£ç å¤„ç†ä¸º showmebug
    - åœ¨basicç¤ºä¾‹ç‚¹å‡» å½•åˆ¶æ•°æ® å’Œ åœæ­¢å½•åˆ¶
    - å¤åˆ¶basicç¤ºä¾‹urlä¸­çš„playgroundId, å¯åœ¨æ“ä½œå›æ”¾ä¸­æŒ‡å®šç§Ÿæˆ·ä¸º showmebug å’Œ playgroundId
  - åœ¨showmebug, æµ‹è¯•å¸å·ä¸º 01test
    - æµ‹è¯•æ¡ˆä¾‹: ä¸èƒ½æŠŠçš„ç¬”è¯•, 2023-12-12 17:34ï¼Œ åŒ…æ‹¬java/python/vue/æ¶æ„å›¾ç”»æ¿
  - ğŸŒ¹ äº®ç‚¹
    - âœ¨ ä¸åŒé¢æ¿çš„çŠ¶æ€èƒ½å¤ŸåŒæ—¶å›æ”¾ï¼Œå¦‚ç¼–è¾‘å™¨ç•Œé¢ã€é¢„è§ˆç•Œé¢ã€æ§åˆ¶å°
      - å›æ”¾æ”¯æŒå…¶ä»–é¢æ¿: æµ‹è¯•ç”¨ä¾‹ã€é¢˜ç›®è¯„åˆ†ã€é€‰æ‹©é¢˜
    - å›æ”¾æ”¯æŒä¸ç¼–è¾‘æ—¶çš„å…‰æ ‡ä½ç½®å˜åŒ–
    - å›æ”¾æ”¯æŒshellçš„æ“ä½œå‘½ä»¤å’Œæ§åˆ¶å°çš„è¾“å…¥è¾“å‡º
    - å›æ”¾æ”¯æŒdebugæ–­ç‚¹è¯¦ç»†æ•°æ®
    - å›æ”¾æ”¯æŒæ¶æ„å›¾ç”»æ¿
  - ğŸ› ç¼ºç‚¹
    - æ–‡ä»¶æ ‘åœ¨ç”¨æˆ·æ“ä½œä¸åŒæ–‡ä»¶æ—¶ï¼Œæ²¡æœ‰é«˜äº®å¯¹åº”çš„æ‰“å¼€æ–‡ä»¶
    - ğŸ‘ï¸ éƒ¨åˆ†æ¡†æ¶çš„é¢„è§ˆè§†å›¾é¢æ¿ï¼Œä¸æ”¯æŒå›æ”¾
  - ğŸ”² to-do
    - æ’­æ”¾è¿›åº¦æ¡çš„ä¸­é—´èŠ‚ç‚¹æ”¯æŒæ˜¾ç¤ºé¢„è§ˆç”»é¢
    - æ’­æ”¾æ—¶å¯å¹¶æ’æ˜¾ç¤ºå¤šä¸ªshellçš„è¾“å‡º
    - å½•åˆ¶æ•°æ®åªèƒ½æœ‰ä¸€ä¸ªç”¨æˆ·ï¼Œå¦‚æœSMBéœ€è¦è·Ÿéšæ¥å›åˆ‡æ¢ï¼Œ å¦‚æœåˆ‡æ¢åˆ°é¢è¯•å®˜å½•åˆ¶ï¼Œ å€™é€‰äººåªèƒ½åœæ­¢å½•åˆ¶

- paaså¹³å°çš„æ³¨å†Œåªéœ€è¦nameå’Œä»»æ„secretå°±ä¼šè¿”å›token
  - ç”šè‡³æ ¡éªŒæ—¶åªéœ€è¦ticketï¼Œä¸éœ€è¦token

- å˜æ›´æ–‡ä»¶åˆ—è¡¨ä¹‹å‰é€šè¿‡åœ¨æœåŠ¡ç«¯è·‘ `git status` å‘½ä»¤è·å–ï¼Œä½†å¯¹æœåŠ¡å™¨æ€§èƒ½å½±å“å¤ªå¤§
  - ç¼–è¾‘å™¨ç³»ç»Ÿè‹¥æ”¯æŒå¤–éƒ¨å‘½ä»¤è¡Œçš„git push/pullæ“ä½œï¼Œåˆ™å¿…é¡»ä»¥gitä»“åº“æ•°æ®ä½œä¸ºå”¯ä¸€æ•°æ®æºï¼Œä¸èƒ½ä»¥webç³»ç»Ÿçš„æ•°æ®ä½œä¸ºä»£ç æ•°æ®æº

- idepaasçš„æ‰“å­—æœºæ•ˆæœå®ç°, æ”¯æŒä¸€æ¬¡å°†aiçš„ä¿®æ”¹å…¨æ’¤é”€

- ğŸ  paasçš„diffè§†å›¾å¼€å¯æ–¹å¼ï¼Œé€šè¿‡é…ç½®å±æ€§diffConfigæ— æ³•æ”¯æŒè‡ªèº«æ–‡ä»¶æ ‘æ‰“å¼€æ—¶æ˜¯å¦å¼€å¯diff
  - å¯å°†é…ç½®å±æ€§diffConfigå˜ä¸ºé…ç½®æ–¹æ³•detectDiffï¼Œè¿™æ ·æ”¯æŒæ–‡ä»¶æ ‘ï¼Œè¿˜èƒ½åœ¨ä¸šåŠ¡ä¾§å®šåˆ¶å…·ä½“çš„å¼€å¯ç»†èŠ‚å’Œè¯·æ±‚å…¶ä»–æ•°æ®
  - ä¸ºäº†æ”¯æŒæ·»åŠ å’Œå–æ¶ˆï¼Œä¸å»ºè®®åˆå§‹åŒ–æ—¶ä¼ å…¥é…ç½®ï¼Œé€šè¿‡registerDetectDiffå’Œunregisteræ–¹æ³•å¯ä»¥æ›´çµæ´»åœ°å®ç°

### codebase-sdk

- lazy-loadçš„ç»„ä»¶
  - CodeEditor
  - FileTree
  - TerminalComponent
  - Console
  - OutputBrowser

- app-init-dataflow
  - getTicketInit
    - init > `const dao = new DaoPaaS()`;
      - this.daoEditor = new DaoEditor(); // DaoEditorå°è£…å¾ˆå°‘
      - requestChannelPathFromTicket
      - this.initChannel(data.data);
      - window.addEventListener('message',fn)
      - store.dao.channel().startChannel()
    - dao.onMessage()
    - dao.subscribe()
    - dao.mapRender() æ¸²æŸ“ç¼–è¾‘å™¨ã€é¢„è§ˆã€shellé¢æ¿
  - effects
    - getTicketInit
    - updateConfig
    - daoPaasObj.onMessage

- å„è§†å›¾ç»„ä»¶éƒ½å¯ä»¥ä»å…¨å±€çŠ¶æ€ä¸­æ‹¿åˆ°socketçŠ¶æ€ å‘é€æ¶ˆæ¯
  - store.dao.channel().send('updateAiCodeInfo', {})
  - store.dao.channel().send('syncOTUpdates', {})
- å„è§†å›¾ç»„ä»¶éƒ½å¯ä»¥ä»å…¨å±€çŠ¶æ€ä¸­æ‹¿åˆ°socketçŠ¶æ€ æ³¨å†Œäº‹ä»¶
  - store.dao.channel().on('removeAiCodeInfo', cb)

#### LazyEditor/CodeEditor

- ä¸‰å±‚editorç»“æ„
  - LazyEditor: æ³¨å†Œsocketäº‹ä»¶
  - CodeEditor: è®¡ç®—content, å‡†å¤‡extensionsï¼Œ LSP
  - CodeMirrorEditor: åˆå§‹åŒ–codemirror, è®¾ç½®menu, ä¸å…³å¿ƒfilePath

- CodeEditor ç¼–è¾‘å™¨åˆå§‹åŒ–æ—¶è®¡ç®—é…ç½®å’Œæ’ä»¶ï¼Œæ³¨å†Œå¤–éƒ¨äº‹ä»¶
  - CodeMirrorEditor(useCodeMirror) ç¼–è¾‘å™¨åˆå§‹åŒ–æ—¶æ³¨å†Œå„ç±»èœå•äº‹ä»¶

```JS
// playback
useEffect(() => {
  if (isPlayBack) {
    channel.subscribeForComponent(Events.Editor, {
      onStart: () => {},
      onData, // ç›‘å¬å›æ”¾æ—¶çš„å¸§æ•°æ®, actions.file.switchFile(), actions.dao.setLatestDocContent
      getPlaybackSnapshot, // è·å–å¿«ç…§æ•°æ®
    });
  }
}, [channel, isPlayBack]);

// ç›‘å¬å…¨å±€æ¶ˆæ¯(å¤„ç†è‡ªå®šä¹‰å¸§)
useEffect(() => {
  if (channelAvailable && channel) {
    channel.removeMessageListener(handleMessageListener);
    channel.addMessageListener(handleMessageListener);
  }

  return () => channel.removeMessageListener(handleMessageListener);
}, [channel, channelAvailable]);
```

- CodeMirrorEditor é€šè¿‡ useImperativeHandle å¯¹å¤–æš´éœ²æ–¹æ³• setState/setView

- channel.addMessageListener(editorMessage); 
  - ç›‘å¬åˆ°æ¶ˆæ¯æ—¶ï¼Œæ›´æ–°ç¼–è¾‘å™¨ view.dispatch({changes})

- åœ¨codemirrorçš„collabæ’ä»¶åˆå§‹åŒ–æ—¶, initEventWatcher ä¼šæ³¨å†Œæ¥æ”¶åˆ°syncOTUpdates/pushOTUpdates/pullOTUpdatesçš„å›è°ƒï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­ä¼šæ‰§è¡Œ store.dao.channel().send('pushOTUpdates', sendData); 
  - å¯¹äºsyncOTUpdatesï¼Œä¼šå¼ºåˆ¶æ‰§è¡Œ this.handleUpdate(true)ï¼Œå‘é€opåˆ°server
  - viewPluginçš„updateæ–¹æ³•ï¼Œåœ¨viewæ›´æ–°domå‰æ‰§è¡Œï¼Œcollabæ’ä»¶è¿™é‡Œä¼špushæ•°æ®åˆ°server

- 
- 
- 
- 
- 

#### playback âŒ›ï¸

- roadmap
  - å›æ”¾æ—¶~~ä¸æ”¯æŒæµè§ˆå™¨é¢„è§ˆé¢æ¿~~, showMeBugä¸­åŸºäºrrwebå®ç°æµè§ˆå™¨é¢„è§ˆé¢æ¿çš„å›æ”¾
  - è‹¥æ“ä½œopå¾ˆå¤šï¼Œåˆ™å›æ”¾æ€§èƒ½å·®ã€‚ è€ƒè™‘snapshot
  - æ”¯æŒå¤šæ¬¡ç¼–è¾‘çš„snapshotæ•°æ®? å¤šä¸ªtask?

- ä¸´æ—¶æ–¹æ¡ˆ/å¾…ä¼˜åŒ–
  - ğŸ¤” æ¯ä¸ªç”¨æˆ·å¯¼å…¥githubä»“åº“åˆ°clacky-projåï¼Œæ¯ä¸ªç”¨æˆ·çš„projä¸å…±äº«ï¼Œç”¨æˆ·åšå®Œéœ€æ±‚è¦æpråˆ°github
    - å¤šäººååŒçš„åœºæ™¯æ›´å¤šæ˜¯è®¨è®ºå’Œreviewï¼Œè€Œä¸æ˜¯å®æ—¶ååŒå¼€å‘
    - æ˜¯å¦æ”¯æŒæ¯ä¸ªç”¨æˆ·ä»…å›æ”¾è‡ªå·±çš„æ“ä½œï¼Œæˆ–è€…å›æ”¾æ—¶è®¾ç½®ä»…å›æ”¾è‡ªå·±çš„op

- not-yet â“
- recordBrowserå‚æ•°ä¼¼ä¹æœªä½¿ç”¨
- å›æ”¾æ—¶æ‹–åŠ¨è¿›åº¦ï¼Œæ˜¯å¦å­˜åœ¨å¿«ç…§æ¥åŠ é€Ÿæ‹–åŠ¨
  - æ‹–åŠ¨è¿›åº¦æ—¶ï¼Œä¼¼ä¹æ²¡æœ‰ç”¨ä¸“é—¨çš„å¿«ç…§æ¥åŠ é€Ÿï¼Œä½† â“ å·²æ’­æ”¾è¿‡çš„frameè¢«ç¼“å­˜äº†
  - this.playbackEngine!.movePosition(start); 
  - findFrameByTimeStampä¼šæŸ¥æ‰¾æ‹–åŠ¨çš„è¿›åº¦ç›®æ ‡ç¥¯
  - è‹¥ç›®æ ‡ç¥¯ä¸å­˜åœ¨ï¼Œåˆ™ this.preFrameTime = Date.now(); + step()

- snapshotæ•°æ®æ˜¯å¦‚ä½•å­˜å‚¨çš„
  - const { content } = store.file.getFileBaseHistoryByPath(dockerId, openedPath); 
  - æ¯æ¬¡è·å–æ–‡ä»¶å†…å®¹ï¼Œå¹¶è®¡ç®—å¿«ç…§æŒ‚è½½åˆ°frame, 
  - frame.snapshot = { currentDoc, selection, agentUserId: agentUserId, isChange, changes, }; 

```JS
{
  // ä¼šè§¦å‘store.dao.channel().getPlaybackInfo()è·å–æ‰€æœ‰äº‹ä»¶æ•°æ®
  const res = await daoPaasObj.preparePlaybackSync();
  messageBox.info('é€šè¿‡åŒæ­¥äº‹ä»¶æ”¶åˆ°å›æ”¾æ•°æ®');
  setQuestionsData(res.questionsData);
  if (res.total > 0) {
    setPlayable(true);
    setPlaybackDuration(res.end - res.start);
  }
}

// ;; startRecordBrowser  
// https://d6f47ebf168c8bac0d9048551a99512c-app.staging.1024paas.com null

// http://localhost:3010/ide/replay/664529280084164608/showmebug?showRRwebController=1
// daoPaasObj.preparePlaybackSync()
// å®¢æˆ·ç«¯request getPlaybackInfo
// 42 

// æ’å…¥è‡ªå®šä¹‰å¸§
const res: any = await daoPaasObj?.appendCustomizeFrameDataSync({
  action: 'startQuestion',
  value: id,
  uuid,
});
```

- å›æ”¾æ—¶ï¼Œæ”¯æŒä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œä½†ç»§ç»­æ‰§è¡Œå¾ˆå¯èƒ½å¤±è´¥
  - playbackçŠ¶æ€æ—¶ï¼Œæ”¯æŒæ”¶é›†æ“ä½œop

- [å›æ”¾é‡æ„](https://www.notion.so/dao42/0ba448333b3f4740a6e569cefd40f821)
  - å›æ”¾çš„å®ç°åŸç†æ˜¯sdkä»æœåŠ¡ç«¯é‡æ–°åŠ è½½æ‰€æœ‰å†å²äº‹ä»¶, å¹¶åˆ†å‘ç»™ç›¸åº”ç»„ä»¶(åœ¨reacté¡¹ç›®ä¸­å¯ä»¥é€šè¿‡æ›´æ–°stateæ¥é©±åŠ¨å„ç»„ä»¶), å„ç»„ä»¶æ¥æ”¶åˆ°äº‹ä»¶è¿›è¡Œç›¸åº”æ¸²æŸ“
  - å¯¹äºå¤§éƒ¨åˆ†ç»„ä»¶, æ¸²æŸ“æ—¶å¹¶ä¸éœ€è¦åŒºåˆ†æ˜¯å¦åœ¨å›æ”¾æ¨¡å¼, åªæœ‰å¯è¾“å…¥å‹ç»„ä»¶éœ€è¦åœ¨å›æ”¾æ¨¡å¼æ—¶ç¦æ­¢ç”¨æˆ·æ“ä½œ
  - ç°åœ¨FileTreeå’ŒEditorç»„ä»¶ä¸­ç›´æ¥æ³¨å†Œäº‹ä»¶, ä¸åˆ©äºå®ç°ç»Ÿä¸€çš„å›æ”¾æ¶ˆæ¯é‡æ’­. æ•…éœ€è¦å¯¹Daoä¸­çš„channelåšå‡ºä¿®æ”¹, å…³é—­onå‡½æ•°ä¸å…è®¸ç»„ä»¶è‡ªå·±æ³¨å†Œäº‹ä»¶. ç»Ÿä¸€ç”± MessageDispatcher æ¥åˆ†å‘äº‹ä»¶
  - æœ‰ä¸¤ç§subscriber, ä¸€ç§æ˜¯æ’­æ”¾æ§åˆ¶ç»„ä»¶çš„subscriberå«PlayControlSubscriber, å¦ä¸€ç§æ˜¯æ™®é€šæ•°æ®ç»„ä»¶çš„subscriberå« ComponentSubscriber
  - å¯ä»¥åœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶è°ƒç”¨DaoPaaSçš„æ–¹æ³•è®¢é˜…ç›¸åº”çš„äº‹ä»¶
- æ–°å¢æµè§ˆå™¨ååŒå’Œå›æ”¾åŠŸèƒ½ï¼ˆRRWEBï¼‰v0.9.159

- syncPlaygroundInfo
  - fileRootPath: /app/data/codeZone/2024/3/5-16/@fad3d6d8-d302-4e29-9c2a-a02f9ca04026/source
  - fileTree: æ–‡ä»¶æ ‘æ‰€æœ‰æ–‡ä»¶åå’Œpath, ä¸åŒ…å«å†…å®¹æ•°æ®

- playbackInfo ç»“æ„åˆ†æ
  - playbackSummerize
    - total äº‹ä»¶eventsæ€»æ•°
    - start/end æ—¶é—´æˆ³
  - playbackData æ‰€æœ‰eventsæ•°æ®
    - timestamp 
    - eventName: fileTree/editor, å†³å®šäº†æ­¤äº‹ä»¶å½’å±çš„ç»„ä»¶
    - data äº‹ä»¶ç›¸å…³æ“ä½œæ•°æ®
      - editor: openedPath
      - editor: revision, openedPath, updates(changes/sel)
      - fileTree: focus
  - historyBaseData 
    - å„æ–‡ä»¶å†…å®¹æ•°æ® path, content(å†…å®¹å¿«ç…§)

- PlaybackEngine
  - stepæ˜¯è§¦å‘æ’­æ”¾çš„æ ¸å¿ƒæ–¹æ³•
  - å¯¹äºéå¤šç¥¯çš„åœºæ™¯ï¼Œ this.getPlaybackSnapshot?.(frame.eventName, frame, preFrame) 
  - æ¯æ¬¡stepæ–¹æ³•çš„æœ«å°¾ï¼Œéƒ½ä¼šæ‰§è¡Œ gotoNextFrame() 
    - this.preFrameTime = Date.now(); æ›´æ–°preFrameæ—¶é—´
    - window.requestAnimationFrame(this.step);

```JS
// æœ¬åœ°å›æ”¾åˆå§‹åŒ–æ—¶ï¼Œticketæ˜¯åœ¨æœ¬åœ°mockçš„
{
  ticket: Base64.encode('showmebug|662725910453239808|194e9365-4ae3-46fa-be09-a2753887328c|1716202534910|null|')
}
// ${params.tenantCode}|${params.playgroundId}|${userId}|${ Date.now() + 10000 }|null|
```

```JS
// å›æ”¾æ‹–åŠ¨å¡é¡¿çš„é—®é¢˜ç¤ºä¾‹å¦‚ä¸‹
// https://www.1024paas.com/ide/replay/672251935319277568/showmebug?showRRwebController=1

const playbackInfo = [
  "playbackInfo",
  {
    "playbackSummerize": {
      "total": 49,
      "start": 1716261783156,
      "end": 1716261833013,
      "customize": []
    },
    "playbackData": {
      "playbackData": [{
          "_id": "664c1397e6ca87f076703709",
          "timestamp": 1716261783156,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "fileTree",
          "agentUserId": "ide",
          "data": {
            "action": "REFRESH",
            "fileRootPath": "/app/data/codeZone/2024/3/5-21/@0d04a0b4-3799-4013-9c36-396fb6187ae9/source",
            "payload": {
              "path": ".",
              "name": ".",
              "type": "DIRECTORY",
              "children": [{
                  "type": "FILE",
                  "name": ".1024",
                  "path": ".1024",
                  "children": [],
                  "hide": false,
                  "lock": false,
                  "unittest": false,
                  "isRetainedFile": false
                },
                {
                  "type": "FILE",
                  "name": ".1024nix",
                  "path": ".1024nix",
                  "children": [],
                  "hide": false,
                  "lock": false,
                  "unittest": false,
                  "isRetainedFile": false
                },
                {
                  "type": "FILE",
                  "name": "bs-config.js",
                  "path": "bs-config.js",
                  "children": [],
                  "hide": false,
                  "lock": false,
                  "unittest": false,
                  "isRetainedFile": false
                },
                {
                  "type": "FILE",
                  "name": "index.html",
                  "path": "index.html",
                  "children": [],
                  "hide": false,
                  "lock": false,
                  "unittest": false,
                  "isRetainedFile": false
                }
              ]
            }
          },
          "__v": 0
        },
        {
          "_id": "664c139ae6ca87f07670370e",
          "timestamp": 1716261786399,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "console",
          "agentUserId": "backend",
          "data": {
            "value": "PaasNewLineSign"
          },
          "__v": 0
        },
        {
          "_id": "664c139ae6ca87f076703710",
          "timestamp": 1716261786402,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "terminal",
          "agentUserId": "backend",
          "data": {
            "value": "PaasNewLineSign"
          },
          "__v": 0
        },
        {
          "_id": "664c139be6ca87f076703712",
          "timestamp": 1716261787595,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "terminal",
          "agentUserId": "backend",
          "data": {
            "value": "\u001b[?2004h"
          },
          "__v": 0
        },
        {
          "_id": "664c139be6ca87f076703714",
          "timestamp": 1716261787595,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "terminal",
          "agentUserId": "backend",
          "data": {
            "value": "\u001b[01;34m~/app\u001b[00m$ "
          },
          "__v": 0
        },
        {
          "_id": "664c13a9e6ca87f076703717",
          "timestamp": 1716261801803,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "focusChange",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "componentName": "Tree"
          },
          "__v": 0
        },
        {
          "_id": "664c13a9e6ca87f076703720",
          "timestamp": 1716261801852,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "fileTree",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "action": "FOCUS",
            "files": [{
              "type": "FILE",
              "name": "bs-config.js"
            }]
          },
          "__v": 0
        },
        {
          "_id": "664c13a9e6ca87f076703721",
          "timestamp": 1716261801853,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "openedPath": "bs-config.js"
          },
          "__v": 0
        },
        {
          "_id": "664c13aae6ca87f076703726",
          "timestamp": 1716261802455,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 2,
            "openedPath": "bs-config.js",
            "updates": [{
                "changes": [
                  2324
                ],
                "selection": {
                  "ranges": [{
                    "anchor": 2324,
                    "head": 2324
                  }],
                  "main": 0
                },
                "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
              },
              {
                "changes": [
                  2324
                ],
                "selection": {
                  "ranges": [{
                    "anchor": 2324,
                    "head": 2324
                  }],
                  "main": 0
                },
                "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
              }
            ]
          },
          "uuid": "7ca399c6-8ecb-47e7-a642-f2c2543d5411",
          "__v": 0
        },
        {
          "_id": "664c13aae6ca87f076703731",
          "timestamp": 1716261802759,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "openedPath": "index.html"
          },
          "__v": 0
        },
        {
          "_id": "664c13aae6ca87f076703730",
          "timestamp": 1716261802759,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "fileTree",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "action": "FOCUS",
            "files": [{
              "type": "FILE",
              "name": "index.html"
            }]
          },
          "__v": 0
        },
        {
          "_id": "664c13abe6ca87f076703736",
          "timestamp": 1716261803225,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 2,
            "openedPath": "index.html",
            "updates": [{
                "changes": [
                  272
                ],
                "selection": {
                  "ranges": [{
                    "anchor": 272,
                    "head": 272
                  }],
                  "main": 0
                },
                "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
              },
              {
                "changes": [
                  272
                ],
                "selection": {
                  "ranges": [{
                    "anchor": 272,
                    "head": 272
                  }],
                  "main": 0
                },
                "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
              }
            ]
          },
          "uuid": "fb16b3c8-c750-444c-82ea-95f9115fb67e",
          "__v": 0
        },
        {
          "_id": "664c13ace6ca87f07670373e",
          "timestamp": 1716261804424,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "fileTree",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "action": "FOCUS",
            "files": [{
              "type": "FILE",
              "name": "bs-config.js"
            }]
          },
          "__v": 0
        },
        {
          "_id": "664c13ace6ca87f07670373f",
          "timestamp": 1716261804425,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "openedPath": "bs-config.js"
          },
          "__v": 0
        },
        {
          "_id": "664c13ace6ca87f076703744",
          "timestamp": 1716261804966,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 4,
            "openedPath": "bs-config.js",
            "updates": [{
                "changes": [
                  2324
                ],
                "selection": {
                  "ranges": [{
                    "anchor": 2324,
                    "head": 2324
                  }],
                  "main": 0
                },
                "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
              },
              {
                "changes": [
                  2324
                ],
                "selection": {
                  "ranges": [{
                    "anchor": 2324,
                    "head": 2324
                  }],
                  "main": 0
                },
                "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
              }
            ]
          },
          "uuid": "dde48bc7-f187-45cb-85cd-0c2b8b799cb3",
          "__v": 0
        },
        {
          "_id": "664c13aee6ca87f07670374c",
          "timestamp": 1716261806523,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "fileTree",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "action": "FOCUS",
            "files": [{
              "type": "FILE",
              "name": "index.html"
            }]
          },
          "__v": 0
        },
        {
          "_id": "664c13aee6ca87f07670374d",
          "timestamp": 1716261806524,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "openedPath": "index.html"
          },
          "__v": 0
        },
        {
          "_id": "664c13aee6ca87f076703752",
          "timestamp": 1716261806996,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 4,
            "openedPath": "index.html",
            "updates": [{
                "changes": [
                  272
                ],
                "selection": {
                  "ranges": [{
                    "anchor": 272,
                    "head": 272
                  }],
                  "main": 0
                },
                "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
              },
              {
                "changes": [
                  272
                ],
                "selection": {
                  "ranges": [{
                    "anchor": 272,
                    "head": 272
                  }],
                  "main": 0
                },
                "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
              }
            ]
          },
          "uuid": "449af58f-0526-48d6-8cac-5fda47739bd4",
          "__v": 0
        },
        {
          "_id": "664c13b3e6ca87f076703755",
          "timestamp": 1716261811907,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 5,
            "openedPath": "index.html",
            "updates": [{
              "changes": [
                272
              ],
              "selection": {
                "ranges": [{
                  "anchor": 61,
                  "head": 61
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "48cc1bd7-48ff-4d5c-8cc4-97ae3f95a235",
          "__v": 0
        },
        {
          "_id": "664c13b4e6ca87f076703758",
          "timestamp": 1716261812100,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "focusChange",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "componentName": "Editor"
          },
          "__v": 0
        },
        {
          "_id": "664c13b4e6ca87f07670375b",
          "timestamp": 1716261812373,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 6,
            "openedPath": "index.html",
            "updates": [{
              "changes": [
                61,
                [
                  0,
                  "",
                  "        "
                ],
                211
              ],
              "selection": {
                "ranges": [{
                  "anchor": 70,
                  "head": 70
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "b07546c6-926b-4fa6-b3ba-5f14434536ca",
          "__v": 0
        },
        {
          "_id": "664c13b5e6ca87f07670375d",
          "timestamp": 1716261813672,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 7,
            "openedPath": "index.html",
            "updates": [{
              "changes": [
                281
              ],
              "selection": {
                "ranges": [{
                  "anchor": 249,
                  "head": 249
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "b817119d-c166-4c77-9c9f-8677e79fad4a",
          "__v": 0
        },
        {
          "_id": "664c13b6e6ca87f07670375f",
          "timestamp": 1716261814006,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 8,
            "openedPath": "index.html",
            "updates": [{
              "changes": [
                249,
                [
                  0,
                  "",
                  "        "
                ],
                32
              ],
              "selection": {
                "ranges": [{
                  "anchor": 258,
                  "head": 258
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "140ff157-d6c1-496d-b870-0fbe8c592ca9",
          "__v": 0
        },
        {
          "_id": "664c13b6e6ca87f076703761",
          "timestamp": 1716261814861,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 9,
            "openedPath": "index.html",
            "updates": [{
              "changes": [
                258,
                [
                  0,
                  "c"
                ],
                32
              ],
              "selection": {
                "ranges": [{
                  "anchor": 259,
                  "head": 259
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "c77985cf-cde3-4ab9-b1b9-749078fb13fa",
          "__v": 0
        },
        {
          "_id": "664c13b7e6ca87f076703763",
          "timestamp": 1716261815161,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 10,
            "openedPath": "index.html",
            "updates": [{
              "changes": [
                259,
                [
                  0,
                  "onsole.log("
                ],
                32
              ],
              "selection": {
                "ranges": [{
                  "anchor": 270,
                  "head": 270
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "9efbc495-9cd9-4b64-9897-c67ae9bf099d",
          "__v": 0
        },
        {
          "_id": "664c13b7e6ca87f076703765",
          "timestamp": 1716261815967,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 11,
            "openedPath": "index.html",
            "updates": [{
              "changes": [
                270,
                [
                  0,
                  ")"
                ],
                32
              ],
              "selection": {
                "ranges": [{
                  "anchor": 271,
                  "head": 271
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "ec2728cb-28ce-43d8-a991-60329ea7750a",
          "__v": 0
        },
        {
          "_id": "664c13b8e6ca87f076703767",
          "timestamp": 1716261816550,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 12,
            "openedPath": "index.html",
            "updates": [{
              "changes": [
                303
              ],
              "selection": {
                "ranges": [{
                  "anchor": 270,
                  "head": 270
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "09b70d89-54b7-43e7-9400-66520f352ed0",
          "__v": 0
        },
        {
          "_id": "664c13b9e6ca87f076703769",
          "timestamp": 1716261817452,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 13,
            "openedPath": "index.html",
            "updates": [{
              "changes": [
                270,
                [
                  0,
                  "''"
                ],
                33
              ],
              "selection": {
                "ranges": [{
                  "anchor": 271,
                  "head": 271
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "875e0dfd-9ffb-4d25-b5ff-5b9656051361",
          "__v": 0
        },
        {
          "_id": "664c13b9e6ca87f07670376b",
          "timestamp": 1716261817958,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 14,
            "openedPath": "index.html",
            "updates": [{
              "changes": [
                271,
                [
                  0,
                  "a"
                ],
                34
              ],
              "selection": {
                "ranges": [{
                  "anchor": 272,
                  "head": 272
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "8ba26309-cc63-4393-8ff9-27d8214cc2ff",
          "__v": 0
        },
        {
          "_id": "664c13bae6ca87f07670376d",
          "timestamp": 1716261818258,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 15,
            "openedPath": "index.html",
            "updates": [{
              "changes": [
                272,
                [
                  0,
                  "a"
                ],
                34
              ],
              "selection": {
                "ranges": [{
                  "anchor": 273,
                  "head": 273
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "a10a2d66-f09a-4cad-8f92-261dcc11171c",
          "__v": 0
        },
        {
          "_id": "664c13bce6ca87f076703771",
          "timestamp": 1716261820277,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "focusChange",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "componentName": "Tree"
          },
          "__v": 0
        },
        {
          "_id": "664c13bce6ca87f076703779",
          "timestamp": 1716261820326,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "fileTree",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "action": "FOCUS",
            "files": [{
              "type": "FILE",
              "name": "bs-config.js"
            }]
          },
          "__v": 0
        },
        {
          "_id": "664c13bce6ca87f07670377a",
          "timestamp": 1716261820327,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "openedPath": "bs-config.js"
          },
          "__v": 0
        },
        {
          "_id": "664c13bce6ca87f07670377f",
          "timestamp": 1716261820773,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 6,
            "openedPath": "bs-config.js",
            "updates": [{
                "changes": [
                  2324
                ],
                "selection": {
                  "ranges": [{
                    "anchor": 2324,
                    "head": 2324
                  }],
                  "main": 0
                },
                "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
              },
              {
                "changes": [
                  2324
                ],
                "selection": {
                  "ranges": [{
                    "anchor": 2324,
                    "head": 2324
                  }],
                  "main": 0
                },
                "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
              }
            ]
          },
          "uuid": "30680c65-61e8-48d2-bd47-dabf4a6b5f23",
          "__v": 0
        },
        {
          "_id": "664c13bee6ca87f076703781",
          "timestamp": 1716261822369,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 7,
            "openedPath": "bs-config.js",
            "updates": [{
              "changes": [
                2324,
                [
                  0,
                  "",
                  ""
                ]
              ],
              "selection": {
                "ranges": [{
                  "anchor": 2325,
                  "head": 2325
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "cd8dec64-430d-4228-9ebb-bcf28bfc072a",
          "__v": 0
        },
        {
          "_id": "664c13c1e6ca87f076703783",
          "timestamp": 1716261825143,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 8,
            "openedPath": "bs-config.js",
            "updates": [{
              "changes": [
                2325,
                [
                  0,
                  "c"
                ]
              ],
              "selection": {
                "ranges": [{
                  "anchor": 2326,
                  "head": 2326
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "b3a8d82c-f025-4bc7-a66b-2965938467bd",
          "__v": 0
        },
        {
          "_id": "664c13c1e6ca87f076703785",
          "timestamp": 1716261825701,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 9,
            "openedPath": "bs-config.js",
            "updates": [{
              "changes": [
                2326,
                [
                  0,
                  "onsole.log("
                ]
              ],
              "selection": {
                "ranges": [{
                  "anchor": 2337,
                  "head": 2337
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "b85d43e8-9409-4442-b91a-e8bb0121b1ce",
          "__v": 0
        },
        {
          "_id": "664c13c2e6ca87f076703787",
          "timestamp": 1716261826480,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 10,
            "openedPath": "bs-config.js",
            "updates": [{
              "changes": [
                2337,
                [
                  0,
                  ")"
                ]
              ],
              "selection": {
                "ranges": [{
                  "anchor": 2338,
                  "head": 2338
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "9be2f8da-400a-4570-87cf-4ab615ff36f6",
          "__v": 0
        },
        {
          "_id": "664c13c3e6ca87f076703789",
          "timestamp": 1716261827419,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 11,
            "openedPath": "bs-config.js",
            "updates": [{
              "changes": [
                2338
              ],
              "selection": {
                "ranges": [{
                  "anchor": 2337,
                  "head": 2337
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "4573878a-5eca-4d76-953b-b4db179b11de",
          "__v": 0
        },
        {
          "_id": "664c13c3e6ca87f07670378b",
          "timestamp": 1716261827857,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 12,
            "openedPath": "bs-config.js",
            "updates": [{
              "changes": [
                2337,
                [
                  0,
                  "''"
                ],
                1
              ],
              "selection": {
                "ranges": [{
                  "anchor": 2338,
                  "head": 2338
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "c54a6005-c77f-47de-bff4-0e746a25d4f3",
          "__v": 0
        },
        {
          "_id": "664c13c4e6ca87f07670378d",
          "timestamp": 1716261828448,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 13,
            "openedPath": "bs-config.js",
            "updates": [{
              "changes": [
                2338,
                [
                  0,
                  "b"
                ],
                2
              ],
              "selection": {
                "ranges": [{
                  "anchor": 2339,
                  "head": 2339
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "f303e1c9-3de8-4234-a977-4a252571cc23",
          "__v": 0
        },
        {
          "_id": "664c13c4e6ca87f07670378f",
          "timestamp": 1716261828750,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 14,
            "openedPath": "bs-config.js",
            "updates": [{
              "changes": [
                2339,
                [
                  0,
                  "b"
                ],
                2
              ],
              "selection": {
                "ranges": [{
                  "anchor": 2340,
                  "head": 2340
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "c7e34838-2958-44d7-a8a6-1a5d450977b0",
          "__v": 0
        },
        {
          "_id": "664c13c5e6ca87f076703791",
          "timestamp": 1716261829580,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 15,
            "openedPath": "bs-config.js",
            "updates": [{
              "changes": [
                2342
              ],
              "selection": {
                "ranges": [{
                  "anchor": 2324,
                  "head": 2324
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "3cf06025-31c0-4d2c-a638-d476fb3a17f6",
          "__v": 0
        },
        {
          "_id": "664c13c5e6ca87f076703794",
          "timestamp": 1716261829770,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "focusChange",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "componentName": "Editor"
          },
          "__v": 0
        },
        {
          "_id": "664c13c5e6ca87f076703797",
          "timestamp": 1716261829906,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 16,
            "openedPath": "bs-config.js",
            "updates": [{
              "changes": [
                2324,
                [
                  0,
                  "",
                  ""
                ],
                18
              ],
              "selection": {
                "ranges": [{
                  "anchor": 2325,
                  "head": 2325
                }],
                "main": 0
              },
              "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
            }]
          },
          "uuid": "4bf00752-cd3f-408a-8a41-29c2d2612d71",
          "__v": 0
        },
        {
          "_id": "664c13c8e6ca87f07670379b",
          "timestamp": 1716261832497,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "focusChange",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "componentName": "Tree"
          },
          "__v": 0
        },
        {
          "_id": "664c13c8e6ca87f0767037a3",
          "timestamp": 1716261832554,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "fileTree",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "action": "FOCUS",
            "files": [{
              "type": "FILE",
              "name": "index.html"
            }]
          },
          "__v": 0
        },
        {
          "_id": "664c13c8e6ca87f0767037a4",
          "timestamp": 1716261832555,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "openedPath": "index.html"
          },
          "__v": 0
        },
        {
          "_id": "664c13c9e6ca87f0767037a9",
          "timestamp": 1716261833013,
          "playgroundId": "664529280084164608",
          "dockerId": "664529280126107648",
          "eventName": "editor",
          "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
          "data": {
            "revision": 17,
            "openedPath": "index.html",
            "updates": [{
                "changes": [
                  307
                ],
                "selection": {
                  "ranges": [{
                    "anchor": 307,
                    "head": 307
                  }],
                  "main": 0
                },
                "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
              },
              {
                "changes": [
                  307
                ],
                "selection": {
                  "ranges": [{
                    "anchor": 273,
                    "head": 273
                  }],
                  "main": 0
                },
                "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea"
              }
            ]
          },
          "uuid": "959cd8d9-be76-44c5-9610-010d6430809c",
          "__v": 0
        }
      ],
      "historyBaseData": [{
          "_id": "664c13a9636433ffb912046d",
          "dockerId": "664529280126107648",
          "path": "bs-config.js",
          "playgroundId": "664529280084164608",
          "__v": 0,
          "content": "// @see https://browsersync.io/docs/options/\nmodule.exports = {\n    // \"ui\": {\n    //     \"port\": 3001,\n    //     \"weinre\": {\n    //         \"port\": 8080\n    //     }\n    // },\n    \"files\": [\"**/*.css\", \"**/*.html\", \"**/*.js\"],\n    \"watchOptions\": {\n      ignore: '.*',\n      usePolling: true, // å¼€å¯è½®è¯¢ç›‘å¬æ–‡ä»¶å˜åŒ–\n      interval: 200 // è½®è¯¢é—´éš”ms\n    },\n    \"server\": {\n      // baseDir: \"src\"\n    },\n    // \"proxy\": false,\n    \"port\": 8080,\n    // \"middleware\": false,\n    // \"serveStatic\": [],\n    // \"ghostMode\": {\n    //     \"clicks\": true,\n    //     \"scroll\": true,\n    //     \"forms\": {\n    //         \"submit\": true,\n    //         \"inputs\": true,\n    //         \"toggles\": true\n    //     }\n    // },\n    // \"logLevel\": \"info\",\n    // \"logPrefix\": \"Browsersync\",\n    // \"logConnections\": false,\n    // \"logFileChanges\": true,\n    // \"logSnippet\": true,\n    // \"rewriteRules\": false,\n    \"open\": false,\n    // \"browser\": [\"google chrome\"],\n    // \"xip\": false,\n    // \"hostnameSuffix\": false,\n    // \"reloadOnRestart\": true,\n    \"notify\": false,\n    // \"scrollProportionally\": true,\n    // \"scrollThrottle\": 0,\n    // \"scrollRestoreTechnique\": \"window.name\",\n    // \"scrollElements\": [],\n    // \"scrollElementMapping\": [],\n    // \"reloadDelay\": 0,\n    // \"reloadDebounce\": 0,\n    // \"plugins\": [],\n    // \"injectChanges\": true,\n    // \"startPath\": null,\n    // \"minify\": true,\n    // \"host\": null,\n    // \"codeSync\": true,\n    // \"timestamps\": true,\n    // \"clientEvents\": [\n    //     \"scroll\",\n    //     \"scroll:element\",\n    //     \"input:text\",\n    //     \"input:toggles\",\n    //     \"form:submit\",\n    //     \"form:reset\",\n    //     \"click\"\n    // ],\n    // \"socket\": {\n    //     \"socketIoOptions\": {\n    //         \"log\": false\n    //     },\n    //     \"socketIoClientConfig\": {\n    //         \"reconnectionAttempts\": 50\n    //     },\n    //     \"path\": \"/browser-sync/socket.io\",\n    //     \"clientPath\": \"/browser-sync\",\n    //     \"namespace\": \"/browser-sync\",\n    //     \"clients\": {\n    //         \"heartbeatTimeout\": 5000\n    //     }\n    // },\n    // \"tagNames\": {\n    //     \"less\": \"link\",\n    //     \"scss\": \"link\",\n    //     \"css\": \"link\",\n    //     \"jpg\": \"img\",\n    //     \"jpeg\": \"img\",\n    //     \"png\": \"img\",\n    //     \"svg\": \"img\",\n    //     \"gif\": \"img\",\n    //     \"js\": \"script\"\n    // }\n};",
          "createTime": 1716261801845
        },
        {
          "_id": "664c13aa636433ffb912047b",
          "dockerId": "664529280126107648",
          "path": "index.html",
          "playgroundId": "664529280084164608",
          "__v": 0,
          "content": "<html>\n\n<head>\n    <style>\n    h1 {\n        font-size: 30px; \n        color: red;\n    }\n    </style>\n</head>\n\n<body style=\"background-color:white\">\n    <h1>Hello HTML/CSS/JS! Hot reload!</h1>\n    <script>\n        console.log('hello world!')\n    </script>\n</body>\n\n</html>\n",
          "createTime": 1716261802753
        }
      ]
    },
    "agentUsers": [{
        "agentUserId": "63ba7a74-e3d4-4efd-9558-0fdd47a2d3ea",
        "userId": "661695283872350209",
        "userInfo": {
          "username": "king",
          "avatarUrl": "https://ui-avatars.com/api/?background=3A3C40&color=fff&rounded=true&uppercase=true&bold=true&length=1&name=king"
        },
        "fileOpened": "index.html",
        "status": "online",
        "followingAgentUserId": "",
        "focusComponent": "Tree",
        "focusXterm": null,
        "editorScroll": 0,
        "cursor": {},
        "wsClientID": "YQona0KWXQtJBRtvABtf",
        "color": "#3091F2"
      },
      {
        "agentUserId": "6e8f9905-1425-4295-8629-ac1307f6ef9f",
        "userId": "194e9365-4ae3-46fa-be09-a2753887328c",
        "userInfo": {
          "username": "king",
          "avatarUrl": "https://ui-avatars.com/api/?background=3A3C40&color=fff&rounded=true&uppercase=true&bold=true&length=1&name=king"
        },
        "status": "online",
        "followingAgentUserId": "",
        "focusComponent": null,
        "focusXterm": null,
        "editorScroll": 0,
        "cursor": {},
        "wsClientID": "i2LiXI_kHLo236lkABth",
        "color": "#5C5CE5"
      }
    ],
    "rrwebDataAllData": {
      "rrwebData": [],
      "customEvents": []
    }
  }
]
```

- åˆ‡æ¢æ–‡ä»¶æ—¶
  - ä¼šæ”¶åˆ° ["selectedUpdated", {"mapSelection":{}, "path":"bs-config.js"}]

- 
- 

#### rrweb

- è·Ÿéšæµè§ˆå™¨çš„äº¤äº’åŸºäºrrwebå®ç°
  - cdeåˆå§‹åŒ–æ—¶ï¼ŒsyncPlaygroundInfoä¼šåŒ…å« supportRRWeb: true
  - ç‚¹å‡»è·Ÿéšç”¨æˆ·æ—¶ï¼Œä¼šå‘é€ `followingAgentUser/liveBrowser` 2ä¸ªäº‹ä»¶ï¼Œ ç„¶åæ”¶åˆ°followingå’ŒfollowBrowser2ä¸ªå“åº”äº‹ä»¶
    - è¢«è·Ÿéšçš„ç”¨æˆ·ä¼šè¿˜æ”¶åˆ°liveBrowseräº‹ä»¶
  - è·Ÿéšæ¨¡å¼uiäº¤äº’çš„é¼ æ ‡å’Œå€™é€‰äººåç§°æ¸²æŸ“åœ¨iframeä¹‹å¤–ï¼Œè·Ÿéšæ—¶çš„æµè§ˆå™¨ç•Œé¢å’Œå†…å®¹ä¸æ˜¯åŸæœ¬iframeå†…çš„çœŸå®domå…ƒç´ ï¼Œè€Œæ˜¯æ¸²æŸ“åœ¨iframeä¹‹å¤–çš„`.replayer-wrapper canvas`å…ƒç´ 
  - å°ç»“: è·Ÿéšæµè§ˆå™¨çš„featureä¸ä¾èµ–æµ®åŠ¨åœ¨æµè§ˆå™¨é¢æ¿ä¹‹ä¸Šçš„å›¾æ ‡åè€Œé€ æˆå›°æƒ‘ï¼Œå¯ä»¥ä»¥åå†è”è°ƒrrwebçš„å®Œæ•´åŠŸèƒ½

#### browser

- ä¾èµ–ide-serverçš„åªæœ‰ followBrowser äº‹ä»¶
- 
- 
- 

#### fileTree

- è§†å›¾ç»„ä»¶åŸºäº react-complex-tree çš„ ControlledTreeEnvironment å’Œ Tree å®ç°
  - renderItemå®šä¹‰åœ¨é¡¶å±‚

- é€šè¿‡é¼ æ ‡ç‚¹å‡»åˆ‡æ¢æ–‡ä»¶æ—¶ä¼šæ‰§è¡Œclickäº‹ä»¶çš„openFile()é€»è¾‘
  - å…ˆè®¾ç½®è·Ÿéš store.dao.channel().followingFocusComponent('Tree'); 
  - setOpenPath(''); 
  - onSelectFileOrFolder([src]); + `onCustomSelect?.([src], type)`; 
  - setSelectedFilePath(items[0] as string); 
- åœ¨useEffecté‡Œé¢ï¼Œæ¯æ¬¡`selectedFilePath`å˜åŒ–ï¼Œéƒ½ä¼šè¯·æ±‚æ–‡ä»¶å†…å®¹å¹¶æ›´æ–°ç¼–è¾‘å™¨(æ”¶åˆ°æœåŠ¡ç«¯çš„åˆ›å»ºæ–‡ä»¶äº‹ä»¶æ—¶ä¹Ÿä¼šè¿™æ ·)
  - channel.loadFile(selectedFilePath); 
  - actions.file.setDocLoading(true); 
  - this.send(Commands. File, { path }) å‘ideServerè¯·æ±‚æ–‡ä»¶å†…å®¹
  - å½“æ”¶åˆ°ideServerè¿”å›çš„æ–‡ä»¶å†…å®¹æ—¶ this.socket.on(Events. File, 
  - switchFile(event.data) æ›´æ–° fileStore.doc
  - this.transitionFileInfo({ openedPath: event.data.openedPath }); è§¦å‘`fileInfo`äº‹ä»¶åˆ°sdkå‰ç«¯
  - this.dispatchDataEvent('editor', event); è§¦å‘åˆå§‹æ³¨å†Œäº‹ä»¶
  - æ¯æ¬¡ fileStore.doc.openedPath å˜åŒ–éƒ½ä¼šè§¦å‘`CodeEditor`ç»„ä»¶å¼ºåˆ¶unmountå†mounté‡æ¸²æŸ“
  - `CodeEditor`åœ¨EditorViewåˆå§‹åŒ–å®Œæˆåä¼šæ‰§è¡Œ setEditorSelectionï¼Œè§¦å‘ `fileOpenDone` äº‹ä»¶

- 
- 
- 
- 
- 

### codebase-collab ğŸ”€

- 

### codebase-ideServer ğŸ”¡

- init-dataflow å‰ææ˜¯sdkå·²ç»è·å–åˆ°ideServerçš„socketè¿æ¥åœ°å€urläº†
  - AppServiceä½¿ç”¨setIntervalå‘é€ideServerHeartBeatåˆ°manager
  - AppGatewayåˆå§‹åŒ– new PlaygroundChannel(this.i18n, client, this.server)
  - AgentUserService
  - PlaygroundManagerService

- plygroundæ”¯æŒåˆ‡æ¢å®¹å™¨ç¯å¢ƒ
  - åˆ‡æ¢æ—¶playgroundIdä¸å˜ï¼Œä½†fileRootPathå’ŒdockerIdéƒ½å¯èƒ½å˜ï¼ŒdockerIdåå­—å–å¾—ä¸å¥½å®ƒä»£è¡¨çš„æ˜¯å®¹å™¨ç¯å¢ƒè€Œä¸æ˜¯docker
  - å®¹å™¨å¤±æ´»åå†æ¿€æ´»ï¼ŒdockerIdä¸ä¼šå˜

- playgroundLayerçš„è®¾è®¡æ˜¯ä¸ºäº†è§£å†³åˆ‡æ¢ç¯å¢ƒæ—¶é€šä¿¡ä¸­æ–­çš„é—®é¢˜ï¼Œ
  - æ–¹æ³•æ˜¯å…ˆåœ¨layerå±‚æ›´æ–°æ•°æ®ï¼Œç„¶åä¸€æ¬¡æ€§æ›´æ–°playgroundItemçš„å±æ€§

- paas-sdk-clienté€šè¿‡manageråŠ¨æ€è·å–åˆ°ide-serverçš„urlï¼Œä¸æ˜¯å›ºå®šçš„
  - managerè´Ÿè´£dockerå®¹å™¨çš„ç®¡ç†å’Œåˆ†é…

- ä»€ä¹ˆæ—¶å€™ç”¨æœ¬åœ°ide-server
  - æœ¬åœ°ide-serverå¯åŠ¨æ—¶ä¼šå‘manageræ³¨å†Œid/codeï¼Œmanageræ”¶åˆ°sdkè¯·æ±‚ide-serverçš„urlæ—¶ï¼Œä¼šæ£€æŸ¥codeï¼Œè‹¥å­˜åœ¨åˆ™è¿”å›æœ¬åœ°ide-serverè¿æ¥ws://localhost:3012ï¼Œå¦åˆ™è¿”å›çº¿ä¸Šide-serverè¿æ¥
- å½•åˆ¶ç”¨æˆ·æ“ä½œï¼Œä»€ä¹ˆæ—¶å€™å¼€å§‹
  - æ•´ä¸ªplaygroundçš„æœŸé—´

- fileTree
  - playgroundItem.getPlaygroundInfo()
    - ç›´æ¥ä½¿ç”¨playgroundItem.fileTreeç¼“å­˜ï¼Œæœªåšé‡æ–°è®¡ç®—
  - registerFileTreeEvent
    - æ¯æ¬¡éƒ½å»æ„å»ºæ–‡ä»¶æ ‘, æ“ä½œè¿‡é‡, éœ€è¦ç»†åˆ†
- registerFileEvent
  - è‹¥éå¤§æ–‡ä»¶ï¼Œè¯»å†…å®¹ä½¿ç”¨ await this.currentPlaygroundItem. FileTree_readFile( path, fileRootPath ); 
  - æ‰“å¼€æ–‡ä»¶æ—¶ï¼Œä¾¿è¦åˆå§‹åŒ–æ–‡ä»¶çš„åŸºç¡€ä¿¡æ¯å†™å…¥æ•°æ®åº“ï¼Œç”¨äºå›æ”¾
    - this.currentPlaygroundItem.playgroundHistoryCRDT.initialBaseFileByPath( path, { currentDoc } );
    - this.currentPlaygroundItem.playgroundHistoryCRDT.initCachedOTMap( path, loadType === 'refresh', { currentDoc }, );
  - OTInfo = await this.currentPlaygroundItem.playgroundHistoryCRDT.queryEditorOTInfoByPath( path, ); 
    - queryEditorOTInfoByPathFromCache
  - this.broadcastAll('file', { data:{ content: OTInfo.currentDoc } }, true); 

- PlaygroundChannel ç›‘å¬getPlaybackInfo
  - ä»mongodbè¡¨è·å–ç¼–è¾‘æ“ä½œæ•°æ® playgroundHistoryCRDT.loadAllData(); 
  - è·å–ä»£ç æ–‡ä»¶æ•°æ® playgroundHistoryBase.findSourceByPlaygroundId()

- ğŸ”Š mqé€šä¿¡é€»è¾‘
- åœ¨æ”¶åˆ°managerå‘è¿‡æ¥çš„playgroundInfoäº‹ä»¶æ—¶ï¼ŒideServerä¼šç¼“å­˜éƒ¨åˆ†çŠ¶æ€å¦‚console/terminal-historyï¼Œå¯¹å‘ç»™å‰ç«¯çš„ä¸šåŠ¡æ•°æ®ç”¨çš„æ˜¯å…ˆç¼“å­˜å†æ›´æ–°çš„é€»è¾‘ç„¶åå‘ç»™å‰ç«¯
  - this.playgroundLayerMap.set(playgroundInfo.dockerId, layer); 
  - await layer.updatePlaygroundInfo(playgroundInfo); 
  - this.playgroundItem.consumerLayer(data.dockerId); 
  - this.playgroundItemInfo = cloneDeep(layer.playgroundItemInfo); 
- åœ¨playgroundæœªåˆ›å»ºæ—¶ï¼Œé€šä¿¡ä½¿ç”¨toManager
  - åœ¨playgroundåˆ›å»ºåï¼Œé€šä¿¡ä½¿ç”¨toPlayground

- Events. ForceRefreshFile
  - const isFileExist = await this.currentPlaygroundItem.checkIfThePathExists(
  - if (!isFileExist), not exist
  - let OTInfo = this.currentPlaygroundItem.playgroundHistoryCRDT.queryEditorOTInfoByPathFromCache( path, ); 
  - if (fileByte / (1024 * 1024) >= 16), this.transmit('file', fileJson); largeSuffix = 'd42.large'
  - this.broadcastAll('file', fileJson, true); 

- 
- 
- 
- 
- 
- 
- 

#### not-yet

- ideServerå¯¹äºæ–‡ä»¶æ ‘çš„crudæ“ä½œæ²¡æœ‰ç”¨ç±»ä¼¼chokidarçš„æ–¹å¼å®ç°ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨node.fsæ“ä½œæˆ–ä¾èµ–å¤–éƒ¨äº‹ä»¶æ¥æ›´æ–°ï¼Œæ˜¯ä»€ä¹ˆåŸå› 
  - 20250217: goAgentåœ¨ç§»åŠ¨æ–‡ä»¶åˆ°å­æ–‡ä»¶å¤¹åï¼Œgit stashå¯¼è‡´æ–‡ä»¶æ¶ˆå¤±ï¼Œgolangçš„fsnotifyæ— æ³•æ•è·å­æ–‡ä»¶å¤¹çš„æ–‡ä»¶å˜æ›´ï¼Œå˜æ›´äº‹ä»¶åªåŒ…å«éç§»åŠ¨æ–‡ä»¶çš„å˜æ›´
  - æ€è·¯1: ideServerè‡ªèº«ç§»åŠ¨æ–‡ä»¶åï¼Œç«‹å³touch moved-file.mdè®©å…¶ä»–ç›‘å¬ç³»ç»Ÿèƒ½ç›‘å¬åˆ°äº‹ä»¶
  - æ€è·¯2: ideServerè‡ªèº«ç§»åŠ¨æ–‡ä»¶åï¼Œæ‰‹åŠ¨é€šçŸ¥manager/goAgentå˜åŒ–çš„è·¯å¾„ï¼Œè®©ç›‘å¬æ–¹è‡ªå·±å»æ›´æ–°
  - NFSè‡ªèº«æ²¡æœ‰ç›‘å¬æ–‡ä»¶å˜æ›´çš„èƒ½åŠ›ï¼Œéœ€è¦ä¾èµ–ç¬¬ä¸‰æ–¹

- 
- 
- 
- 
- 
- 

### docs-sdk

- æœ¬æ¡ˆä¾‹çš„axiosä¸ºå°è£…åçš„axios, baseUrlé»˜è®¤ä¸ºâ€œwww.1024paas.comâ€ã€‚

- PART-ONE è¯·æ±‚è·å–ticket(ç¥¨)æµç¨‹
  - ç¬¬ä¸€æ­¥ï¼šå®šä¹‰æ¥å£
  - ç¬¬äºŒæ­¥ï¼šå°è£…é€»è¾‘
  - getEnvironmentsApi
  - getCodeZoneIdApi
  - getPlaygroundIdApi
  - getTicketApi
- PART-TWO åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
  - ç¬¬ä¸€æ­¥ï¼šå¼•å…¥SDKå’Œæ ·å¼ import { DaoPaaS, Messages } from 'DaoPaaS.cjs'; 
  - ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–å®ä¾‹ 
    - const dao = new DaoPaaS({ tenantId: 'ç§Ÿæˆ·id', ticket: 'åŠ¨æ€è·å–çš„ticket', userInfo: { username: 'ç”¨æˆ·å'} }); 
    - dao.onMessage()
    - dao.mapRender()  // ä¼šæŠŠdaoå†…éƒ¨ç»„ä»¶æ¸²æŸ“åˆ°å¯¹åº”çš„domèŠ‚ç‚¹
  - ç¬¬ä¸‰æ­¥ï¼šé”€æ¯å®ä¾‹ dao.dispose()
- PART-THREE SDKéƒ¨åˆ†å…¶ä»–æ–¹æ³•
  - dao.activePlayground() // æ¿€æ´»å®¹å™¨
  - dao.runPlayground() // è¿è¡Œå®¹å™¨
- PART-FOUR åŸºç¡€æ¡ˆä¾‹

## proj-1024code

- resources
  - [1024Code](https://1024code.com/)
  - [1024Code æ–‡æ¡£ä¸­å¿ƒ](https://docs.1024code.com/)

### not-yet

- questions
  - /ideè·¯ç”±çš„ CloudIDEPageç»„ä»¶æ²¡æœ‰åœ¨react-devtoolsæ˜¾ç¤ºå‡ºæ¥, å› ä¸ºæ‡’åŠ è½½ï¼Ÿ 

- å‰ç«¯é¡¹ç›®åœ¨æ‰“å¼€ideæ—¶æ²¡æœ‰å®ç°è¿è¡Œé¢„è§ˆï¼Œéœ€è¦æ‰‹åŠ¨ç‚¹å‡»è¿è¡Œ

- åœ¨ideä¸­ä¿®æ”¹æ–‡ä»¶åï¼Œæ›´æ–°é¢„è§ˆå¤ªæ…¢

### draft

### dev-xp

- `1024code` æ³¨å†Œæ—¶è¦å…ˆç‚¹å‡»å‘é€éªŒè¯ç ï¼Œç„¶ååœ¨éªŒè¯ç è¾“å…¥æ¡†å¡«å…¥6ä¸ª0å°±å¯ä»¥æ³¨å†ŒæˆåŠŸ
  - å·²æ³¨å†Œç”¨æˆ·å¯ç›´æ¥åœ¨å‘é€éªŒè¯ç åè¾“å…¥6ä¸ª0
  - âš ï¸ nodeç‰ˆæœ¬ä¸æ”¯æŒv22ï¼Œæš‚æ—¶ä½¿ç”¨v20
  - ç¼–è¯‘æ„å»ºæ—¶å¯é€šè¿‡ä¿®æ”¹repoæ–‡ä»¶å¤¹åæ¥é¿å…ä½¿ç”¨turborepoçš„cache

### codebase

- init-app-dataflow
  - StoreProvider > createStore
    - new CodecubeStore
    - åˆå§‹åŒ–socketè¿æ¥ï¼ŒåŸºäºrails-action-cable
- init-ide-dataflow
  - codecube.mount()
  - this.ideStore?.mount()
  - const ideCodecube = await getPlaygroundFn(this.slug); 
  - this.initPaaS(); 
    - defaultOpenFiles.push()
    - contextMenu.push
    - aiCodeMenu.push
    - daoEditor?.addHotKeys
  - this.createChatChannel(); 
  - this.createChatgptChannel(); 
  - `dao_paas = await DaoPaaS()`; 

- OpenAIStream
  - new ReadableStream

```JS
// stream response (SSE) from OpenAI may be fragmented into multiple chunks
// this ensures we properly read chunks and invoke an event for each SSE event stream
const parser = createParser(onParse);
// https://web.dev/streams/#asynchronous-iteration
for await (const chunk of res.body as any) {
  parser.feed(decoder.decode(chunk));
}
```

- å·¦ä¾§å›¾æ ‡èœå•: fileTree, search, git
  - ActivityPane: å·¦ä¾§å›¾æ ‡èœå•å¯¹åº”çš„é¢æ¿
  - .tree-section
- Editor: ç¼–è¾‘åŒº .editor-section
  - EditorPane > `CodeEditor`; 
- Preview: é¢„è§ˆåŒº
  - OpenBrowser
  - Terminal
  - Console

- webé¡¹ç›®ä¸­çš„ç¼–è¾‘å™¨
  - apps/web/src/store/IDEStore.tsx  æ¥å…¥äº†daoPaasçŠ¶æ€
  - apps/web/src/ui/MarkdownEditor/index.tsx
  - apps/web/src/ui/Codecubes/hooks/AtEditor/index.tsx
  - apps/web/src/pages/community/publish/AtEditor/index.tsx

- aièŠå¤©æ˜¯è¾“å‡ºçš„ä»£ç ä½¿ç”¨highlightjsé«˜äº®
- 
- 
- 
