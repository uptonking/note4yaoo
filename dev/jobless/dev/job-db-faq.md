---
title: job-db-faq
tags: [database, job]
created: 2021-09-28T14:38:20.560Z
modified: 2021-09-28T14:38:46.122Z
---

# job-db-faq

# guide

- 数据库范式、ACID、隔离级别、锁、索引、主从等
# [数据库查询问题实例优化](https://blog.csdn.net/qq_38514574/article/details/119000268)

1、一定要绝对避免循环查数据库和缓存（PS：循环里面就不能有查询缓存，更不能有查询数据库的操作，因为循环的次数没法控制）；

2、对于API接口的话，一般都是直接查缓存的，没有查数据库的；

3、多用批量查询，少用单条查询，尽量一次查出来；

4、对于使用阿里云，要留意一下相应产品的配置，该花的钱还是得花，同时，千万要记得正式环境中使用相应产品的内网地址；

5、注意连接池大小（包括数据库连接池、Redis缓存连接池、线程池）；

6、压测的机器上不要部署其它的服务，只跑待压测的服务，避免受其它项目影响；对于线上环境，最好一台机器上只部署一个重要的服务；

7、没有用的以及被注释掉的代码，没有用的依赖最好及时清理掉；

8、集群自不用说；

9、一些监控类的工具工具可以帮助我们更好的定位问题，比如链路跟踪，这次项目中使用了PinPoint；

10、如果技术上优化的空间已经非常小了，可以试着从业务上着手，用实际的数据说话，可以从日常的访问量，历史访问量数据来说服测试；

11、每一次代码改动都有可能引入新的问题，因此，每次修改代码后都要回归测试一下（PS：每次修改完以后，我都会用几组不同的关键词搜索，然后比对修改前和修改后返回的数据是否一致，这个时候postman，以及Beyond compare就派上用场了）；

12、关键的地方一定要多加点儿日志，方便以后排除问题，因为排查线上问题最主要还是靠日志；
