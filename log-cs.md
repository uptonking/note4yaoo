---
tags: [cs]
title: log-cs
created: '2020-03-28T19:35:12.408Z'
modified: '2020-06-30T12:42:57.640Z'
---

# log-cs

- linux的硬链接与软链接
- 现代操作系统为解决信息能独立于进程之外被长期存储引入了文件，文件作为进程创建信息的逻辑单元可被多个进程并发使用
- Linux与其他类UNIX系统一样并不区分文件与目录：目录是记录了其他文件名的文件
- 文件有文件名与数据，这在Linux上被分成两个部分：用户数据 (user data) 与元数据 (metadata)
  - 用户数据，即文件数据块 (data block)，数据块是记录文件真实内容的地方
  - 元数据则是文件的附加属性，如文件大小、创建时间、所有者等信息
    - 在Linux中，元数据中的inode号（inode 是文件元数据的一部分但其并不包含文件名，inode 号即索引节点号）才是文件的唯一标识而非文件名
    - 文件名仅是为了方便人们的记忆和使用，系统或程序通过inode号寻找正确的文件数据块
    - 查看inode号可使用命令 stat 或 ls -i
- 为解决文件的共享使用，Linux系统引入了两种链接：硬链接 (hard link) 与软链接（又称符号链接，即 soft link 或 symbolic link）
  - 链接为Linux系统解决了文件的共享使用，还带来了隐藏文件路径、增加权限安全及节省存储等好处
- 若一个inode号对应多个文件名，则称这些文件为 `硬链接` 。换言之，硬链接就是同一个文件使用了多个别名，硬链接的特点：
  - 文件有相同的inode及data block；
  - 只能对已存在的文件进行创建；
  - 不能交叉文件系统进行硬链接的创建；
  - 不能对目录进行创建，只可对文件创建；
  - 删除一个硬链接文件并不影响其他有相同inode号的文件
  - 硬链接不能对目录创建是受限于文件系统的设计。Linux文件系统中的目录均隐藏了两个个特殊的目录：当前目录（.）与父目录（..）。查看这两个特殊目录的 inode 号可知其实这两目录就是两个硬链接。若系统允许对目录创建硬链接，则会产生目录环
- 若文件用户数据块中存放的内容是另一文件的路径名的指向，则该文件就是 `软连接` 。软链接就是一个普通文件，只是数据块内容有点特殊。软链接有自己的inode号以及用户数据块。因此软链接的创建与使用没有类似硬链接的诸多限制：
  - 软链接有自己的文件属性及权限等；
  - 可对不存在的文件或目录创建软链接；
  - 软链接可交叉文件系统；
  - 软链接可对文件或目录创建；
  - 创建软链接时，链接计数 i_nlink 不会增加；
  - 删除软链接并不影响被指向的文件，但若被指向的原文件被删除，则相关软连接被称为死链接（即dangling link，若被指向路径文件被重新创建，死链接可恢复为正常的软链接）。
